{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f2e7010a0a60d748ebd7","webpack:///./src/index.js","webpack:///./src/Exsurge.Core.js","webpack:///./src/Exsurge.Text.js","webpack:///./src/Exsurge.Glyphs.js","webpack:///./src/Exsurge.Drawing.js","webpack:///./assets/fonts/ExsurgeChar.otf","webpack:///./src/Exsurge.Chant.js","webpack:///./src/Exsurge.Chant.Signs.js","webpack:///./src/Exsurge.Gabc.js","webpack:///./src/Exsurge.Chant.Markings.js","webpack:///./src/Exsurge.Chant.Neumes.js"],"names":[],"mappings":"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","file":"exsurge.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"exsurge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exsurge\"] = factory();\n\telse\n\t\troot[\"exsurge\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f2e7010a0a60d748ebd7\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\n'use strict';\n\nimport { Annotation, ChantContext } from 'Exsurge.Drawing'\nimport { Gabc } from 'Exsurge.Gabc'\n\n// client side support\nvar ChantVisualElementPrototype = Object.create(HTMLElement.prototype);\n\nChantVisualElementPrototype.createdCallback = function() {\n  var ctxt = new ChantContext();\n  \n  ctxt.lyricTextFont = \"'Crimson Text', serif\";\n  ctxt.lyricTextSize *= 1.2;\n  ctxt.dropCapTextFont = ctxt.lyricTextFont;\n  ctxt.annotationTextFont = ctxt.lyricTextFont;\n\n  var useDropCap = true;\n  var useDropCapAttr = this.getAttribute(\"use-drop-cap\");\n  if (useDropCapAttr === 'false')\n    useDropCap = false;\n\n  var score = Gabc.loadChantScore(ctxt, this.innerText, useDropCap);\n\n  var annotationAttr = this.getAttribute(\"annotation\");\n  if (annotationAttr) {\n    // add an annotation\n    score.annotation = new Annotation(ctxt, annotationAttr);\n  }\n\n  var _element = this;\n\n  var width = 0;\n  var doLayout = function() {\n    var newWidth = _element.parentElement.clientWidth;\n    if(width === newWidth) return;\n    width = newWidth;\n    // perform layout on the chant\n    score.performLayout(ctxt, function() {\n      score.layoutChantLines(ctxt, width, function() {\n        // render the score to svg code\n        _element.innerHTML = score.createDrawable(ctxt);\n      });\n    });\n  }\n  doLayout();\n  if (window.addEventListener)\n    window.addEventListener('resize',doLayout,false);\n  else if (window.attachEvent)\n    window.attachEvent('onresize',doLayout);\n}\n\nChantVisualElementPrototype.attachedCallback = function() {\n  \n}\n\ndocument.registerElement = document.registerElement || function() {};\n// register the custom element\nexport var ChantVisualElement = document.registerElement('chant-visual', {\n  prototype: ChantVisualElementPrototype\n});\n\n\nexport * from 'Exsurge.Core'\nexport * from 'Exsurge.Text'\nexport * from 'Exsurge.Glyphs'\nexport * from 'Exsurge.Drawing'\nexport * from 'Exsurge.Chant'\nexport * from 'Exsurge.Chant.Markings'\nexport * from 'Exsurge.Chant.Signs'\nexport * from 'Exsurge.Chant.Neumes'\nexport * from 'Exsurge.Gabc'\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nexport var Units = {\n  // enums\n  DeviceIndepenedent: 0, // device independent units: 96/inch\n  Centimeters: 1,\n  Millimeters: 2,\n  Inches: 3,\n\n  // constants for device independent units (diu)\n  DIU_PER_INCH: 96,\n  DIU_PER_CENTIMETER: 96 / 2.54,\n\n  ToDeviceIndependent: function (n, inputUnits) {\n    switch (inputUnits) {\n      case Centimeters:\n        return n * DIU_PER_CENTIMETER;\n      case Millimeters:\n        return n * DIU_PER_CENTIMETER / 10;\n      case Inches:\n        return n * DIU_PER_INCH;\n      default:\n        return n;\n    }\n  },\n\n  FromDeviceIndependent: function (n, outputUnits) {\n    switch (outputUnits) {\n      case Centimeters:\n        return n / DIU_PER_CENTIMETER;\n      case Millimeters:\n        return n / DIU_PER_CENTIMETER * 10;\n      case Inches:\n        return n / DIU_PER_INCH;\n      default:\n        return n;\n    }\n  },\n\n\n  StringToUnitsType: function(s) {\n    switch (s.ToLower()) {\n      case \"in\":\n      case \"inches\":\n        return Inches;\n\n      case \"cm\":\n      case \"centimeters\":\n        return Centimeters;\n\n      case \"mm\":\n      case \"millimeters\":\n        return Millimeters;\n\n      case \"di\":\n      case \"device-independent\":\n        return DeviceIndepenedent;\n\n      default:\n        return DeviceIndepenedent;\n    }\n  },\n\n  UnitsTypeToString: function(units) {\n    switch (units) {\n      case Inches: return \"in\";\n      case Centimeters: return \"cm\";\n      case Millimeters: return \"mm\";\n      case DeviceIndepenedent: return \"device-independent\";\n      default: return \"device-independent\";\n    }\n  }\n}\n\nexport function DeviceIndependent(n) {\n  return n;\n}\n\nexport function Centimeters(n) {\n  return Units.ToDeviceIndependent(n, Units.Centimeters);\n}\n\nexport function Millimeters(n) {\n  return Units.ToDeviceIndependent(n, Units.Millimeters);\n}\n\nexport function Inches(n) {\n  return Units.ToDeviceIndependent(n, Units.Inches);\n}\n\nexport function ToCentimeters(n) {\n  return Units.FromDeviceIndependent(n, Units.Centimeters);\n}\n\nexport function ToMillimeters(n) {\n  return Units.FromDeviceIndependent(n, Units.Millimeters);\n}\n\nexport function ToInches(n) {\n  return Units.FromDeviceIndependent(n, Units.Inches);\n}\n\n\n/*\n * Point\n */\nexport class Point {\n  constructor(x, y) {\n    this.x = (typeof x !== 'undefined') ? x : 0;\n    this.y = (typeof y !== 'undefined') ? y : 0;\n  }\n\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  equals(point) {\n    return this.x === point.x && this.y === point.y;\n  }\n}\n\n/*\n * Rect\n */\nexport class Rect {\n  constructor(x, y, width, height) {\n    this.x = (typeof x !== 'undefined') ? x : Infinity;\n    this.y = (typeof y !== 'undefined') ? y : Infinity;\n    this.width = (typeof width !== 'undefined') ? width : -Infinity;\n    this.height = (typeof height !== 'undefined') ? height : -Infinity;\n  }\n\n  clone() {\n    return new Rect(this.x, this.y, this.width, this.height);\n  }\n\n  isEmpty() {\n    return (this.x === Infinity &&\n            this.y === Infinity &&\n            this.width === -Infinity &&\n            this.height === -Infinity);\n  }\n\n  // convenience method\n  right() {\n    return this.x + this.width;\n  }\n\n  bottom() {\n    return this.y + this.height;\n  }\n\n  equals(rect) {\n    return this.x === rect.x && this.y === rect.y &&\n           this.width === rect.width && this.height === rect.height;\n  }\n\n  // other can be a Point or a Rect\n  contains(other) {\n    if (other instanceof Point) {\n      return other.x >= this.x &&\n              other.x <= this.x + this.width &&\n              other.y >= this.y &&\n              other.y <= this.y + this.height;\n    } else { // better be instance of Rect\n      return this.x <= other.x &&\n              this.x + this.width >= other.x + other.width &&\n              this.y <= other.y &&\n              this.y + this.height >= other.y + other.height;\n    }\n  }\n\n  union(rect) {\n\n    var right = Math.max(this.x + this.width, rect.x + rect.width);\n    var bottom = Math.max(this.y + this.height, rect.y + rect.height);\n\n    this.x = Math.min(this.x, rect.x);\n    this.y = Math.min(this.y, rect.y);\n\n    this.width = right - this.x;\n    this.height = bottom - this.y;\n  }\n}\n\n/**\n * Margins\n *\n * @class\n */\nexport class Margins {\n  constructor(left, top, right, bottom) {\n    this.left = (typeof left !== 'undefined') ? left : 0;\n    this.top = (typeof top !== 'undefined') ? top : 0;\n    this.right = (typeof right !== 'undefined') ? right : 0;\n    this.bottom = (typeof bottom !== 'undefined') ? bottom : 0;\n  }\n\n  clone() {\n    return new Margins(this.left, this.top, this.right, this.bottom);\n  }\n\n  equals(margins) {\n    return this.left === margins.left &&\n        this.top === margins.top &&\n        this.right === margins.right &&\n        this.bottom === margins.bottom;\n  }\n}\n\n/**\n * Size\n *\n * @class\n */\nexport class Size {\n  constructor(width, height) {\n    this.width = (typeof width !== 'undefined') ? width : 0;\n    this.height = (typeof height !== 'undefined') ? height : 0;\n  }\n\n  clone() {\n    return new Size(this.width, this.height);\n  }\n\n  equals(size) {\n    return this.width === size.width && this.height === size.height;\n  }\n}\n\n\n/*\n * Pitches, notes\n */\nexport var Step = {\n  Do: 0,\n  Du: 1,\n  Re: 2,\n  Me: 3,\n  Mi: 4,\n  Fa: 5,\n  Fu: 6,\n  So: 7,\n  La: 9,\n  Te: 10,\n  Ti: 11\n};\n\n  // this little array helps map step values to staff positions. The numeric values of steps\n  // correspond to whole step increments (2) or half step increments (1). This gives us the ability\n  // to compare pitches precisely, but makes it challenging to place steps on the staff. this little\n  // array maps the steps to an incremental position the steps take on the staff line. This works\n  // so simply because chant only uses do and fa clefs, and only has a flatted ti (te), making\n  // for relatively easy mapping to staff line locations.\n  //                         Do Du Re Me Mi Fa Fu So    La Te Ti\nvar __StepToStaffPosition = [0, 0, 1, 1, 2, 3, 3, 4, 4, 5, 6, 6];\nvar __StaffOffsetToStep = [Step.Do, Step.Re, Step.Mi, Step.Fa, Step.So, Step.La, Step.Ti]; // no accidentals in this one\n\n\nexport class Pitch {\n  constructor(step, octave) {\n    this.step = step;\n    this.octave = octave;\n  }\n  \n  toInt() {\n    return this.octave * 12 + this.step;\n  }\n\n  isHigherThan(pitch) {\n    return this.toInt() > pitch.toInt();\n  }\n\n  isLowerThan(pitch) {\n    return this.toInt() < pitch.toInt();\n  }\n\n  equals(pitch) {\n    return this.toInt() === pitch.toInt();\n  }\n\n  static stepToStaffOffset(step) {\n    return __StepToStaffPosition[step];\n  }\n\n  static staffOffsetToStep(offset) {\n    while (offset < 0)\n      offset = __StaffOffsetToStep.length + offset;\n\n    return __StaffOffsetToStep[offset % __StaffOffsetToStep.length];\n  }\n}\n\n// for positioning markings on notes\nexport var MarkingPositionHint = {\n  Default: 0,\n  Above: 1,\n  Below: 2\n};\n\nexport function generateRandomGuid() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return s4() + s4();\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Core.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from 'Exsurge.Core'\n\n/**\n * @class\n */\nexport class Language {\n  constructor(name) {\n    this.name = (typeof name !== 'undefined') ? name : \"<unknown>\";\n  }\n\n  /**\n   * @param {String} text The string to parsed into words.\n   * @return {Word[]} the resulting parsed words from syllabification\n   */\n  syllabify(text) {\n\n    var parsedWords = [];\n\n    if (typeof text === 'undefined' || text === \"\")\n      return parsedWords;\n\n    // Divide the text into words separated by whitespace\n    var words = text.split(/[\\s]+/);\n\n    for (var i = 0, end = words.length; i < end; i++)\n      parsedWords.push(this.syllabifyWord(words[i]));\n\n    return parsedWords;\n  }\n}\n\n/**\n * @class\n */\nexport class Latin extends Language {\n\n  /**\n   * @constructs\n   */\n  constructor() {\n    super(\"Latin\");\n\n    // fixme: should we include 'diphthongs' with accented vowels, e.g., e?\n    // fixme: ui is only diphthong in the exceptional cases below (according to Wheelock's Latin)\n    this.diphthongs = [\"ae\", \"au\", \"oe\"];\n\n    // some words that are simply exceptions to standard syllabification rules!\n    var wordExceptions = new Object();\n\n    // ui combos pronounced as diphthongs\n    wordExceptions[\"huius\"] = [\"hui\", \"us\"];\n    wordExceptions[\"cuius\"] = [\"cui\", \"us\"];\n    wordExceptions[\"huic\"] = [\"huic\"];\n    wordExceptions[\"cui\"] = [\"cui\"];\n    wordExceptions[\"hui\"] = [\"hui\"];\n\n    this.vowels = ['a', 'e', 'i', 'o', 'u',\n                   '', '', '', '', '',\n                   '', '',\n                   '',  // no accented  in unicode?\n                   'y']; // y is treated as a vowel; not native to Latin but useful for words borrowed from Greek\n\n    this.muteConsonantsAndF = ['b', 'c', 'd', 'g', 'p', 't', 'f'];\n\n    this.liquidConsonants = ['l', 'r'];\n  }\n\n  // c must be lowercase!\n  isVowel(c) {\n    for (var i = 0, end = this.vowels.length; i < end; i++)\n      if (this.vowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * f is not a mute consonant, but we lump it together for syllabification\n   * since it is syntactically treated the same way\n   *\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isMuteConsonantOrF(c) {\n    for (var i = 0, end = this.muteConsonantsAndF.length; i < end; i++)\n      if (this.muteConsonantsAndF[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is a liquid consonant\n   */\n  isLiquidConsonant(c) {\n    for (var i = 0, end = this.liquidConsonants.length; i < end; i++)\n      if (this.liquidConsonants[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} s The string to test; must be lowercase\n   * @return {boolean} true if s is a diphthong\n   */\n  isDiphthong(s) {\n    for (var i = 0, end = this.diphthongs.length; i < end; i++)\n      if (this.diphthongs[i] === s)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * Rules for Latin syllabification (from Collins, \"A Primer on Ecclesiastical Latin\")\n   *\n   * Divisions occur when:\n   *   1. After open vowels (those not followed by a consonant) (e.g., \"pi-us\" and \"De-us\")\n   *   2. After vowels followed by a single consonant (e.g., \"vi-ta\" and \"ho-ra\")\n   *   3. After the first consonant when two or more consonants follow a vowel\n   *      (e.g., \"mis-sa\", \"minis-ter\", and \"san-ctus\").\n   *\n   * Exceptions:\n   *   1. In compound words the consonants stay together (e.g., \"de-scribo\").\n   *   2. A mute consonant (b, c, d, g, p, t) or f followed by a liquid consonant (l, r)\n   *      go with the succeeding vowel: \"la-crima\", \"pa-tris\"\n   *\n   * In addition to these rules, Wheelock's Latin provides this sound exception:\n   *   -  Also counted as single consonants are qu and the aspirates ch, ph,\n   *      th, which should never be separated in syllabification:\n   *      architectus, ar-chi-tec-tus; loquacem, lo-qua-cem.\n   *\n   */\n  syllabifyWord(word) {\n    var syllables = [];\n    var haveCompleteSyllable = false;\n    var previousWasVowel = false;\n    var workingString = word.toLowerCase();\n    var startSyllable = 0;\n\n    var c, lookahead, haveLookahead;\n\n    // a helper function to create syllables\n    var makeSyllable = function (length) {\n      if (haveCompleteSyllable) {\n        syllables.push(word.substr(startSyllable, length));\n        startSyllable += length;\n      }\n\n      haveCompleteSyllable = false;\n    }\n\n    for (var i = 0, wordLength = workingString.length; i < wordLength; i++) {\n\n      c = workingString[i];\n\n      // get our lookahead in case we need them...\n      lookahead = '*';\n      haveLookahead = (i + 1) < wordLength;\n\n      if (haveLookahead)\n        lookahead = workingString[i + 1];\n\n      var cIsVowel = this.isVowel(c);\n\n      // i is a special case for a vowel. when i is at the beginning\n      // of the word (Iesu) or i is between vowels (alleluia),\n      // then the i is treated as a consonant (y)\n      if (c === 'i') {\n        if (i === 0 && haveLookahead && this.isVowel(lookahead))\n          cIsVowel = false;\n        else if (previousWasVowel && haveLookahead && this.isVowel(lookahead)) {\n          cIsVowel = false;\n        }\n      }\n\n      if (c === '-') {\n\n        // a hyphen forces a syllable break, which effectively resets\n        // the logic...\n\n        haveCompleteSyllable = true;\n        previousWasVowel = false;\n        makeSyllable(i - startSyllable);\n        startSyllable++;\n\n      } else if (cIsVowel) {\n\n        // once we get a vowel, we have a complete syllable\n        haveCompleteSyllable = true;\n\n        if (previousWasVowel && !this.isDiphthong(workingString[i - 1] + \"\" + c)) {\n          makeSyllable(i - startSyllable);\n          haveCompleteSyllable = true;\n        }\n\n        previousWasVowel = true;\n\n      } else if (haveLookahead) {\n\n        if ((c === 'q' && lookahead === 'u') ||\n            (lookahead === 'h' && (c === 'c' || c === 'p' || c === 't'))) {\n          // handle wheelock's exceptions for qu, ch, ph and th\n          makeSyllable(i - startSyllable);\n          i++; // skip over the 'h' or 'u'\n        } else if (previousWasVowel && this.isVowel(lookahead)) {\n          // handle division rule 2\n          makeSyllable(i - startSyllable);\n        } else if (this.isMuteConsonantOrF(c) && this.isLiquidConsonant(lookahead)) {\n          // handle exception 2\n          makeSyllable(i - startSyllable);\n        } else if (haveCompleteSyllable) {\n          // handle division rule 3\n          makeSyllable(i + 1 - startSyllable);\n        }\n\n        previousWasVowel = false;\n      }\n    }\n\n    // if we have a complete syllable, we can add it as a new one. Otherwise\n    // we tack the remaining characters onto the last syllable.\n    if (haveCompleteSyllable)\n      syllables.push(word.substr(startSyllable));\n    else if (startSyllable > 0)\n      syllables[syllables.length - 1] += word.substr(startSyllable);\n\n    return syllables;\n  }\n\n  /**\n   * @param {String} s the string to search\n   * @param {Number} startIndex The index at which to start searching for a vowel in the string\n   * @retuns a custom class with three properties: {found: (true/false) startIndex: (start index in s of vowel segment) length ()}\n   */\n  findVowelSegment(s, startIndex) {\n\n    var i, end, index;\n    var workingString = s.toLowerCase();\n\n    // do we have a diphthongs?\n    for (i = 0, end = this.diphthongs.length; i < end; i++) {\n      var d = this.diphthongs[i];\n      index = workingString.indexOf(d, startIndex);\n\n      if (index >= 0)\n        return { found: true, startIndex: index, length: d.length };\n    }\n\n    // no diphthongs. Let's look for single vowels then...\n    for (i = 0, end = this.vowels.length; i < end; i++) {\n      index = workingString.indexOf(this.vowels[i], startIndex);\n\n      if (index >= 0) {\n        // if the first vowel found is a U, and it is immediately followed by another vowel, (e.g., sanguis, quis), the first u counts as a consonant:\n        // (in practice, this only affects words such as equus that contain a uu, since the alphabetically earlier vowel would be found before the U)\n        if(this.vowels[i] === 'u' && this.isVowel(workingString[index + 1])) {\n          ++index;\n        }\n        return { found: true, startIndex: index, length: 1 };\n      }\n    }\n\n    // no vowels sets found after startIndex!\n    return { found: false, startIndex: -1, length: -1 };\n  }\n}\n\n\n/**\n * @class\n */\nexport class Spanish extends Language {\n\n  constructor() {\n    super(\"Spanish\");\n\n    this.vowels = ['a', 'e', 'i', 'o', 'u', 'y',\n                    '', '', '', '', '', ''];\n\n    this.weakVowels = ['i', 'u', '', 'y'];\n\n    this.strongVowels = ['a', 'e', 'o', '', '', '', '', ''];\n\n\n    this.diphthongs = [\"ai\", \"ei\", \"oi\", \"ui\", \"ia\", \"ie\", \"io\", \"iu\", \"au\", \"eu\", \"ou\", \"ua\", \"ue\", \"uo\",\n                       \"i\", \"i\", \"i\", \"i\", \"i\", \"i\", \"i\", \"i\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\",\n                       \"e\", \"i\"];\n\n    this.uDiphthongExceptions = [\"gue\", \"gui\", \"qua\", \"que\", \"qui\", \"quo\"];\n  }\n\n  // c must be lowercase!\n  isVowel(c) {\n    for (var i = 0, end = this.vowels.length; i < end; i++)\n      if (this.vowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isWeakVowel(c) {\n    for (var i = 0, end = this.weakVowels.length; i < end; i++)\n      if (this.weakVowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isStrongVowel(c) {\n    for (var i = 0, end = this.strongVowels.length; i < end; i++)\n      if (this.strongVowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} s The string to test; must be lowercase\n   * @return {boolean} true if s is a diphthong\n   */\n  isDiphthong(s) {\n    for (var i = 0, end = this.diphthongs.length; i < end; i++)\n      if (this.diphthongs[i] === s)\n        return true;\n\n    return false;\n  }\n\n  createSyllable(text) {\n\n/*\n    var accented = false;\n    var ellidesToNext = false;\n\n    if (text.length > 0) {\n        \n        if (text[0] == '`') {\n            accented = true;\n            text = text.substr(1);\n        }\n\n        if (text[text.length - 1] == '_') {\n            ellidesToNext = true;\n            text = text.substr(0, text.length - 1);\n        }\n    }\n\n    var s = new Syllable(text);\n\n    s.isMusicalAccent = accented;\n    s.elidesToNext = ellidesToNext;*/\n\n    return text;\n  }\n\n  /**\n   */\n  syllabifyWord(word) {\n\n    var syllables = [];\n\n    var haveCompleteSyllable = false;\n    var previousIsVowel = false;\n    var previousIsStrongVowel = false; // only valid if previousIsVowel == true\n    var startSyllable = 0;\n\n    // fixme: first check for prefixes\n\n    for (i = 0; i < word.length; i++) {\n\n      var c = word[i].toLowerCase();\n\n      if (this.isVowel(c)) {\n\n        // we have a complete syllable as soon as we have a vowel\n        haveCompleteSyllable = true;\n\n        var cIsStrongVowel = this.isStrongVowel(c);\n\n        if (previousIsVowel) {\n          // if we're at a strong vowel, then we finish out the last syllable\n          if (cIsStrongVowel) {\n            if (previousIsStrongVowel) {\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              startSyllable = i;\n            }\n          }\n        }\n\n        previousIsVowel = true;\n        previousIsStrongVowel = cIsStrongVowel;\n\n      } else {\n        if (!haveCompleteSyllable) {\n          // do nothing since we don't have a complete syllable yet...\n        } else {\n\n          // handle explicit syllable breaks\n          if (word[i] === '-') {\n            // start new syllable\n            syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n            startSyllable = ++i;\n          } else {\n\n            var numberOfConsonants = 1, consonant2;\n\n            // count how many more consonants there are\n            for (j = i + 1; j < word.length; j++) {\n              if (this.isVowel(word[j]))\n                break;\n              numberOfConsonants++;\n            }\n\n            if (numberOfConsonants === 1) {\n              // start new syllable\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              startSyllable = i;\n\n            } else if (numberOfConsonants === 2) {\n              consonant2 = word[i + 1].toLowerCase();\n              if (consonant2 === 'l' || consonant2 === 'r' || (c === 'c' && consonant2 === 'h')) {\n                // split before the consonant pair\n                syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n                startSyllable = i++;\n              } else {\n                //split the consonants\n                syllables.push(this.createSyllable(word.substr(startSyllable, ++i - startSyllable)));\n                startSyllable = i;\n              }\n\n            } else if (numberOfConsonants === 3) {\n              consonant2 = word[i + 1].toLowerCase();\n\n              // if second consonant is s, divide cc-c, otherwise divide c-cc\n              if (consonant2 === 's') {\n                i += 2;\n                syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              } else\n                syllables.push(this.createSyllable(word.substr(startSyllable, ++i - startSyllable)));\n\n              startSyllable = i;\n\n            } else if (numberOfConsonants === 4) {\n              // four always get split cc-cc\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable + 2)));\n              startSyllable = i + 2;\n              i += 3;\n            }\n          }\n\n          haveCompleteSyllable = false;\n        }\n\n        previousIsVowel = false;\n      }\n    }\n\n\n    // if we have a complete syllable, we can add it as a new one. Otherwise\n    // we tack the remaining characters onto the last syllable.\n    if (haveCompleteSyllable)\n      syllables.push(word.substr(startSyllable));\n    else if (startSyllable > 0)\n      syllables[syllables.length - 1] += word.substr(startSyllable);\n    else if (syllables.length === 0)\n      syllables.push(this.createSyllable(word))\n\n    return syllables;\n  }\n\n  /**\n   * @param {String} s the string to search\n   * @param {Number} startIndex The index at which to start searching for a vowel in the string\n   * @retuns a custom class with three properties: {found: (true/false) startIndex: (start index in s of vowel segment) length ()}\n   */\n  findVowelSegment(s, startIndex) {\n\n    var i, end, index;\n    var workingString = s.toLowerCase();\n\n    // do we have a diphthongs?\n    for (i = 0, end = this.diphthongs.length; i < end; i++) {\n      var d = this.diphthongs[i];\n      index = workingString.indexOf(d, startIndex);\n\n      if (index >= 0) {\n\n        // check the exceptions...\n        if (d[0] === 'u' && index > 0) {\n          var tripthong = s.substr(index - 1, 3).toLowerCase();\n\n          for (j = 0, endj = this.uDiphthongExceptions.length; i < endj; j++) {\n            if (tripthong === this.uDiphthongExceptions[j]) {\n              // search from after the u...\n              return this.findVowelSegment(s, index + 1);\n            }\n          }\n        }\n\n        return { found: true, startIndex: index, length: d.length };\n      }\n    }\n\n    // no diphthongs. Let's look for single vowels then...\n    for (i = 0, end = this.vowels.length; i < end; i++) {\n      index = workingString.indexOf(this.vowels[i], startIndex);\n\n      if (index >= 0)\n        return { found: true, startIndex: index, length: 1 };\n    }\n\n    // no vowels sets found after startIndex!\n    return { found: false, startIndex: -1, length: -1 };\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Text.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\n\n// generated based on the svg data\nexport let Glyphs = {\n  \"None\": {\n    \"svgSrc\": \"<g></g>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 0,\n      \"height\": 0\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 0\n    }\n  },\n  \"AcuteAccent\": {\n    \"svgSrc\": \"<path d=\\\"M4 0C-.614.52-.614.52-.803-3.182l60.768-108.422c4.52-7.182 10.543-13.67 18.075-13.67 5.27 0 14.31 1.264 23.346 7.793 7.53 5.223 8.803 11.752 8.803 16.975 0 3.917-.52 11.1-8.05 17.628L4 0z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M4 0C-.614.52-.614.52-.803-3.182l60.768-108.422c4.52-7.182 10.543-13.67 18.075-13.67 5.27 0 14.31 1.264 23.346 7.793 7.53 5.223 8.803 11.752 8.803 16.975 0 3.917-.52 11.1-8.05 17.628L4 0z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 110.99200439453125,\n      \"height\": 125.79399108886719\n    },\n    \"origin\": {\n      \"x\": 0.8030000329017639,\n      \"y\": 125.27399444580078\n    }\n  },\n  \"Stropha\": {\n    \"svgSrc\": \"<path d=\\\"M1.22-73.438c4.165 13.02 12.238 27.084 24.217 42.188L49.657 0 34.812 27.344C18.666 55.47-.084 72.396-21.438 78.124c4.687-3.645 7.03-8.593 7.03-14.843 0-8.853-4.947-20.572-14.843-35.155L-48 0 1.22-73.438z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M1.22-73.438c4.165 13.02 12.238 27.084 24.217 42.188L49.657 0 34.812 27.344C18.666 55.47-.084 72.396-21.438 78.124c4.687-3.645 7.03-8.593 7.03-14.843 0-8.853-4.947-20.572-14.843-35.155L-48 0 1.22-73.438z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 97.65699768066406,\n      \"height\": 151.56201171875\n    },\n    \"origin\": {\n      \"x\": 48,\n      \"y\": 73.43800354003906\n    }\n  },\n  \"BeginningAscLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 152.343994140625\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 88.34400177001953\n    }\n  },\n  \"BeginningDesLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 151.56199645996094\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 75.56199645996094\n    }\n  },\n  \"CustodDescLong\": {\n    \"svgSrc\": \"<path d=\\\"M39.063 273.472c5.73.52 7.29-6.25 4.687-20.312V-65.59c-13.542 2.083-24.22 5.468-32.03 10.156C3.905-50.226 0-43.714 0-35.904V71.91c5.73-5.21 10.677-8.594 14.844-10.157 5.73-1.562 12.24-2.343 19.53-2.343v196.875c0 11.458 1.563 17.187 4.688 17.187z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M39.063 273.472c5.73.52 7.29-6.25 4.687-20.312V-65.59c-13.542 2.083-24.22 5.468-32.03 10.156C3.905-50.226 0-43.714 0-35.904V71.91c5.73-5.21 10.677-8.594 14.844-10.157 5.73-1.562 12.24-2.343 19.53-2.343v196.875c0 11.458 1.563 17.187 4.688 17.187\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 46.35300064086914,\n      \"height\": 339.58197021484375\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 65.58999633789062\n    }\n  },\n  \"CustodDescShort\": {\n    \"svgSrc\": \"<path d=\\\"M34.375 191.923c0 8.333 1.563 12.24 4.688 11.72 3.125-.522 4.687-7.033 4.687-19.533v-250c-13.542 2.084-24.22 5.47-32.03 10.157C3.905-50.525 0-44.015 0-36.203V71.61c5.73-5.208 10.677-8.593 14.844-10.156 5.73-1.562 12.24-2.344 19.53-2.344v132.813z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M34.375 191.923c0 8.333 1.563 12.24 4.688 11.72 3.125-.522 4.687-7.033 4.687-19.533v-250c-13.542 2.084-24.22 5.47-32.03 10.157C3.905-50.525 0-44.015 0-36.203V71.61c5.73-5.208 10.677-8.593 14.844-10.156 5.73-1.562 12.24-2.344 19.53-2.344v132.813z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 43.75,\n      \"height\": 270.0530090332031\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 65.88999938964844\n    }\n  },\n  \"CustodLong\": {\n    \"svgSrc\": \"<path d=\\\"M39.063-269.562c5.73-.52 7.29 6.25 4.687 20.312V69.5c-13.542-2.083-24.22-5.47-32.03-10.156C3.905 54.134 0 47.624 0 39.812V-68c5.73 5.208 10.677 8.594 14.844 10.156 5.73 1.563 12.24 2.344 19.53 2.344v-196.875c0-11.458 1.563-17.187 4.688-17.187z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M39.063-269.562c5.73-.52 7.29 6.25 4.687 20.312V69.5c-13.542-2.083-24.22-5.47-32.03-10.156C3.905 54.134 0 47.624 0 39.812V-68c5.73 5.208 10.677 8.594 14.844 10.156 5.73 1.563 12.24 2.344 19.53 2.344v-196.875c0-11.458 1.563-17.187 4.688-17.187z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 46.35300064086914,\n      \"height\": 339.5820007324219\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 270.0820007324219\n    }\n  },\n  \"CustodShort\": {\n    \"svgSrc\": \"<path d=\\\"M34.375-188.125c0-8.333 1.563-12.24 4.688-11.72 3.125.522 4.687 7.033 4.687 19.532v250c-13.542-2.083-24.22-5.468-32.03-10.156C3.905 54.324 0 47.813 0 40V-67.813c5.73 5.21 10.677 8.594 14.844 10.157 5.73 1.562 12.24 2.344 19.53 2.343v-132.812z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M34.375-188.125c0-8.333 1.563-12.24 4.688-11.72 3.125.522 4.687 7.033 4.687 19.532v250c-13.542-2.083-24.22-5.468-32.03-10.156C3.905 54.324 0 47.813 0 40V-67.813c5.73 5.21 10.677 8.594 14.844 10.157 5.73 1.562 12.24 2.344 19.53 2.343v-132.812z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 43.75,\n      \"height\": 270.052001953125\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 200.36500549316406\n    }\n  },\n  \"DoClef\": {\n    \"svgSrc\": \"<path d=\\\"M0 98.406V-97.688C0-118 5.99-134.275 17.97-146.516c11.978-12.24 27.603-18.36 46.874-18.36 10.937 0 19.53 3.126 25.78 9.376s9.376 14.583 9.376 25v107.813l-6.25-5.47c-4.167-3.645-10.287-7.42-18.36-11.327-8.072-3.907-16.796-5.86-26.17-5.86-11.46 0-21.486 4.427-30.08 13.282-8.593 8.854-12.89 19.53-12.89 32.03s4.297 23.308 12.89 32.423c8.594 9.115 18.62 13.672 30.08 13.672 9.374 0 18.098-1.822 26.17-5.468 8.073-3.646 14.193-7.292 18.36-10.938l6.25-6.25V132c0 9.896-3.125 18.1-9.375 24.61-6.25 6.51-14.844 9.765-25.78 9.765-19.272 0-34.897-6.25-46.876-18.75C5.99 135.125 0 118.72 0 98.405z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M0 98.406V-97.688C0-118 5.99-134.275 17.97-146.516c11.978-12.24 27.603-18.36 46.874-18.36 10.937 0 19.53 3.126 25.78 9.376s9.376 14.583 9.376 25v107.813l-6.25-5.47c-4.167-3.645-10.287-7.42-18.36-11.327-8.072-3.907-16.796-5.86-26.17-5.86-11.46 0-21.486 4.427-30.08 13.282-8.593 8.854-12.89 19.53-12.89 32.03s4.297 23.308 12.89 32.423c8.594 9.115 18.62 13.672 30.08 13.672 9.374 0 18.098-1.822 26.17-5.468 8.073-3.646 14.193-7.292 18.36-10.938l6.25-6.25V132c0 9.896-3.125 18.1-9.375 24.61-6.25 6.51-14.844 9.765-25.78 9.765-19.272 0-34.897-6.25-46.876-18.75C5.99 135.125 0 118.72 0 98.405z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 331.2510070800781\n    },\n    \"origin\": {\n      \"x\": 0,\n      \"y\": 164.87600708007812\n    }\n  },\n  \"FaClef\": {\n    \"svgSrc\": \"<path d=\\\"M85.156-32v193.75c0 9.375-1.562 14.323-4.687 14.844-1.564 0-2.605-.52-3.126-1.563-.52-1.04-.782-2.603-.78-4.686V56.28c-8.335-8.332-19.793-12.5-34.376-12.5-17.71 0-31.77 3.907-42.188 11.72V-32c0-18.23 14.193-27.344 42.578-27.344 28.385 0 42.578 9.115 42.578 27.344zM98.438 93V-92.156c0-19.27 5.73-34.896 17.187-46.875 11.458-11.98 26.562-17.97 45.313-17.97 10.937 0 19.14 2.865 24.61 8.594 5.467 5.73 8.202 13.542 8.202 23.437v103.126l-5.47-4.687c-3.645-3.647-9.374-7.293-17.186-10.94-7.813-3.645-15.886-5.467-24.22-5.468-11.978 0-22.004 4.167-30.077 12.5-8.073 8.334-12.11 18.36-12.11 30.08 0 11.717 4.037 22.004 12.11 30.858s18.1 13.28 30.078 13.28c8.333 0 16.406-1.822 24.22-5.468 7.81-3.645 13.54-7.03 17.186-10.156l5.47-5.468V125.81c0 9.896-2.865 17.84-8.594 23.83-5.73 5.988-13.802 8.983-24.22 8.983-18.75 0-33.853-6.12-45.31-18.36-11.46-12.24-17.19-27.994-17.19-47.265z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M85.156-32v193.75c0 9.375-1.562 14.323-4.687 14.844-1.564 0-2.605-.52-3.126-1.563-.52-1.04-.782-2.603-.78-4.686V56.28c-8.335-8.332-19.793-12.5-34.376-12.5-17.71 0-31.77 3.907-42.188 11.72V-32c0-18.23 14.193-27.344 42.578-27.344 28.385 0 42.578 9.115 42.578 27.344zM98.438 93V-92.156c0-19.27 5.73-34.896 17.187-46.875 11.458-11.98 26.562-17.97 45.313-17.97 10.937 0 19.14 2.865 24.61 8.594 5.467 5.73 8.202 13.542 8.202 23.437v103.126l-5.47-4.687c-3.645-3.647-9.374-7.293-17.186-10.94-7.813-3.645-15.886-5.467-24.22-5.468-11.978 0-22.004 4.167-30.077 12.5-8.073 8.334-12.11 18.36-12.11 30.08 0 11.717 4.037 22.004 12.11 30.858s18.1 13.28 30.078 13.28c8.333 0 16.406-1.822 24.22-5.468 7.81-3.645 13.54-7.03 17.186-10.156l5.47-5.468V125.81c0 9.896-2.865 17.84-8.594 23.83-5.73 5.988-13.802 8.983-24.22 8.983-18.75 0-33.853-6.12-45.31-18.36-11.46-12.24-17.19-27.994-17.19-47.265z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 193.75201416015625,\n      \"height\": 333.5950012207031\n    },\n    \"origin\": {\n      \"x\": 0.001003265380859375,\n      \"y\": 157.00100708007812\n    }\n  },\n  \"Flat\": {\n    \"svgSrc\": \"<path d=\\\"M7.813-204.406c4.166 0 6.25 5.208 6.25 15.625L12.5-10.657C33.854 13.302 54.167 25.28 73.438 25.28c9.374 0 14.062-4.686 14.062-14.06 0-6.25-1.042-11.72-3.125-16.407-2.083-4.688-7.03-9.766-14.844-15.235-7.81-5.47-13.02-8.984-15.624-10.547L27.344-45.81V-80.97c17.187 0 33.073 4.82 47.656 14.454C89.583-56.88 96.875-47.376 96.875-38c0 67.708-.26 101.562-.78 101.563-38.543 0-69.532-12.24-92.97-36.72C0-52.322-1.042-123.936 0-188c0-10.937 2.604-16.406 7.813-16.406z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M7.813-204.406c4.166 0 6.25 5.208 6.25 15.625L12.5-10.657C33.854 13.302 54.167 25.28 73.438 25.28c9.374 0 14.062-4.686 14.062-14.06 0-6.25-1.042-11.72-3.125-16.407-2.083-4.688-7.03-9.766-14.844-15.235-7.81-5.47-13.02-8.984-15.624-10.547L27.344-45.81V-80.97c17.187 0 33.073 4.82 47.656 14.454C89.583-56.88 96.875-47.376 96.875-38c0 67.708-.26 101.562-.78 101.563-38.543 0-69.532-12.24-92.97-36.72C0-52.322-1.042-123.936 0-188c0-10.937 2.604-16.406 7.813-16.406z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 97.91699981689453,\n      \"height\": 267.968994140625\n    },\n    \"origin\": {\n      \"x\": 1.0420000553131104,\n      \"y\": 204.406005859375\n    }\n  },\n  \"Mora\": {\n    \"svgSrc\": \"<path d=\\\"M47.478-24c6.957 0 12.793 2.288 17.49 6.883C69.662-12.52 72-6.904 72-.267c0 6.64-2.337 12.352-7.033 17.118C60.27 21.618 54.435 24 47.477 24c-6.26 0-11.748-2.383-16.444-7.15C26.337 12.086 24 6.374 24-.265c0-6.638 2.337-12.255 7.033-16.85C35.73-21.713 41.217-24 47.478-24z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M47.478-24c6.957 0 12.793 2.288 17.49 6.883C69.662-12.52 72-6.904 72-.267c0 6.64-2.337 12.352-7.033 17.118C60.27 21.618 54.435 24 47.477 24c-6.26 0-11.748-2.383-16.444-7.15C26.337 12.086 24 6.374 24-.265c0-6.638 2.337-12.255 7.033-16.85C35.73-21.713 41.217-24 47.478-24z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 48,\n      \"height\": 48\n    },\n    \"origin\": {\n      \"x\": -24,\n      \"y\": 24\n    }\n  },\n  \"Natural\": {\n    \"svgSrc\": \"<path d=\\\"M7.906-166.563c-2.864 0-5.614.52-8.218 1.563v13.28l.78 56.25.782 78.907v85.157c.52 3.646 2.604 5.73 6.25 6.25l23.438-3.906 23.437-3.907v29.69c0 42.186-.26 63.54-.78 64.06l6.25 2.345c1.04.52 2.082.78 3.124.78 2.603 0 4.947-1.3 7.03-3.905L67.656-71.25c-.52-2.604-2.083-3.906-4.687-3.906-7.814 0-17.19 1.04-28.126 3.125l-19.53 3.124.78-38.28V-165c-2.604-1.042-5.323-1.562-8.188-1.563zM55.938-40v71.875l-41.407 7.03c0-48.436.262-72.655.783-72.655L55.938-40z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M7.906-166.563c-2.864 0-5.614.52-8.218 1.563v13.28l.78 56.25.782 78.907v85.157c.52 3.646 2.604 5.73 6.25 6.25l23.438-3.906 23.437-3.907v29.69c0 42.186-.26 63.54-.78 64.06l6.25 2.345c1.04.52 2.082.78 3.124.78 2.603 0 4.947-1.3 7.03-3.905L67.656-71.25c-.52-2.604-2.083-3.906-4.687-3.906-7.814 0-17.19 1.04-28.126 3.125l-19.53 3.124.78-38.28V-165c-2.604-1.042-5.323-1.562-8.188-1.563zM55.938-40v71.875l-41.407 7.03c0-48.436.262-72.655.783-72.655L55.938-40z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 70.31100463867188,\n      \"height\": 330.468994140625\n    },\n    \"origin\": {\n      \"x\": 0.3120002746582031,\n      \"y\": 166.56300354003906\n    }\n  },\n  \"OriscusAsc\": {\n    \"svgSrc\": \"<path d=\\\"M50 30.25c0 12.5-3.125 21.354-9.375 26.562-3.125 2.605-7.813 3.907-14.063 3.907-3.125 0-5.99-.522-8.593-1.564-2.605-1.04-5.6-2.474-8.986-4.297C5.6 53.035 2.734 51.603.39 50.56c-2.343-1.04-5.338-2.474-8.984-4.296-3.646-1.823-6.77-3.256-9.375-4.297-2.603-1.043-5.468-1.564-8.593-1.564-6.25 0-10.937 1.563-14.062 4.688C-46.875 50.824-50 59.677-50 71.656v-106.25c0-13.02 3.125-21.875 9.375-26.562 3.125-2.604 7.813-3.906 14.063-3.907 3.125 0 5.99.52 8.593 1.563 2.605 1.042 5.73 2.474 9.376 4.297 3.646 1.823 6.51 2.995 8.594 3.516l10.938 5.468c6.25 3.126 11.458 4.69 15.624 4.69 6.25 0 10.938-1.564 14.063-4.69C46.875-55.426 50-64.02 50-76V30.25z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M50 30.25c0 12.5-3.125 21.354-9.375 26.562-3.125 2.605-7.813 3.907-14.063 3.907-3.125 0-5.99-.522-8.593-1.564-2.605-1.04-5.6-2.474-8.986-4.297C5.6 53.035 2.734 51.603.39 50.56c-2.343-1.04-5.338-2.474-8.984-4.296-3.646-1.823-6.77-3.256-9.375-4.297-2.603-1.043-5.468-1.564-8.593-1.564-6.25 0-10.937 1.563-14.062 4.688C-46.875 50.824-50 59.677-50 71.656v-106.25c0-13.02 3.125-21.875 9.375-26.562 3.125-2.604 7.813-3.906 14.063-3.907 3.125 0 5.99.52 8.593 1.563 2.605 1.042 5.73 2.474 9.376 4.297 3.646 1.823 6.51 2.995 8.594 3.516l10.938 5.468c6.25 3.126 11.458 4.69 15.624 4.69 6.25 0 10.938-1.564 14.063-4.69C46.875-55.426 50-64.02 50-76V30.25z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 147.656005859375\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 76\n    }\n  },\n  \"OriscusDes\": {\n    \"svgSrc\": \"<path d=\\\"M-50 30.844v-106.25c0 11.458 3.125 20.052 9.375 25.78 3.125 3.126 7.813 4.69 14.063 4.688 4.687 0 13.41-3.255 26.17-9.765 12.762-6.51 21.746-9.766 26.954-9.766 6.25 0 10.938 1.303 14.063 3.907C46.875-55.874 50-47.02 50-34V72.25c0-11.98-3.125-20.833-9.375-26.563C37.5 42.563 32.812 41 26.562 41 21.875 41 13.023 44.385 0 51.156c-4.167 2.604-8.594 4.948-13.28 7.032-4.69 2.083-9.116 3.124-13.283 3.124-6.25 0-10.937-1.302-14.062-3.906C-46.875 52.198-50 43.344-50 30.844z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50 30.844v-106.25c0 11.458 3.125 20.052 9.375 25.78 3.125 3.126 7.813 4.69 14.063 4.688 4.687 0 13.41-3.255 26.17-9.765 12.762-6.51 21.746-9.766 26.954-9.766 6.25 0 10.938 1.303 14.063 3.907C46.875-55.874 50-47.02 50-34V72.25c0-11.98-3.125-20.833-9.375-26.563C37.5 42.563 32.812 41 26.562 41 21.875 41 13.023 44.385 0 51.156c-4.167 2.604-8.594 4.948-13.28 7.032-4.69 2.083-9.116 3.124-13.283 3.124-6.25 0-10.937-1.302-14.062-3.906C-46.875 52.198-50 43.344-50 30.844z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 147.656005859375\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 75.40599822998047\n    }\n  },\n  \"OriscusLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M 19.05539,78.886528 C 20.242277,78.486807 21.532179,77.890297 22.925106,77.09701 24.317891,76.303653 26.700882,74.417241 30.074091,71.437777 33.447144,68.45824 36.523539,64.985185 39.303286,61.018598 42.082855,57.051975 44.562739,51.395765 46.742952,44.049969 48.922975,36.704172 50.01304,28.671032 50.013135,19.950525 L 50.013135,-34.225545 C 50.01304,-54.464261 42.07377,-64.583661 26.195289,-64.583768 20.248326,-64.583661 11.518758,-61.410372 0.00656131,-55.06389 -11.505742,-48.717218 -20.23531,-45.543929 -26.182179,-45.544024 -34.515109,-45.543929 -40.567968,-48.520405 -44.340791,-54.473441 -48.113613,-60.426286 -50.000025,-67.369373 -50.000025,-75.302702 L -50.000025,30.069925 C -50.000025,49.909039 -42.060754,59.828603 -26.182179,59.828615 -21.022584,59.828603 -12.38991,56.455465 -0.28412107,49.709203 11.821549,42.96294 20.648023,39.589803 26.195289,39.589803 29.368506,40.776762 30.361665,44.249817 29.17479,50.00897 27.987759,55.768122 26.00143,62.020829 23.215789,68.767116 z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M 19.05539,78.886528 C 20.242277,78.486807 21.532179,77.890297 22.925106,77.09701 24.317891,76.303653 26.700882,74.417241 30.074091,71.437777 33.447144,68.45824 36.523539,64.985185 39.303286,61.018598 42.082855,57.051975 44.562739,51.395765 46.742952,44.049969 48.922975,36.704172 50.01304,28.671032 50.013135,19.950525 L 50.013135,-34.225545 C 50.01304,-54.464261 42.07377,-64.583661 26.195289,-64.583768 20.248326,-64.583661 11.518758,-61.410372 0.00656131,-55.06389 -11.505742,-48.717218 -20.23531,-45.543929 -26.182179,-45.544024 -34.515109,-45.543929 -40.567968,-48.520405 -44.340791,-54.473441 -48.113613,-60.426286 -50.000025,-67.369373 -50.000025,-75.302702 L -50.000025,30.069925 C -50.000025,49.909039 -42.060754,59.828603 -26.182179,59.828615 -21.022584,59.828603 -12.38991,56.455465 -0.28412107,49.709203 11.821549,42.96294 20.648023,39.589803 26.195289,39.589803 29.368506,40.776762 30.361665,44.249817 29.17479,50.00897 27.987759,55.768122 26.00143,62.020829 23.215789,68.767116 z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 147.656005859375\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 75.40599822998047\n    }\n  },  \n  \"PodatusLower\": {\n    \"svgSrc\": \"<path d=\\\"M-4.688-30.28c22.396 0 34.636-.262 36.72-.782 5.728-1.563 8.593-5.21 8.593-10.938H50v97.656c0 2.604-1.302 4.167-3.906 4.688-5.21.52-21.355.78-48.438.78-23.958 0-38.54-.26-43.75-.78-2.604 0-3.906-1.302-3.906-3.906v-82.032c0-3.646 1.302-5.468 3.906-5.468h2.344c2.604.52 15.625.78 39.063.78z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-4.688-30.28c22.396 0 34.636-.262 36.72-.782 5.728-1.563 8.593-5.21 8.593-10.938H50v97.656c0 2.604-1.302 4.167-3.906 4.688-5.21.52-21.355.78-48.438.78-23.958 0-38.54-.26-43.75-.78-2.604 0-3.906-1.302-3.906-3.906v-82.032c0-3.646 1.302-5.468 3.906-5.468h2.344c2.604.52 15.625.78 39.063.78z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 103.12399291992188\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 42\n    }\n  },\n  \"PodatusUpper\": {\n    \"svgSrc\": \"<path d=\\\"M-46.094-63.78c13.542 0 24.61 2.473 33.203 7.42C-4.298-51.41 0-43.99 0-34.093V62h-9.375c0-10.938-2.604-19.14-7.812-24.61-5.21-5.468-14.844-8.203-28.907-8.202-18.23 0-33.333 4.166-45.312 12.5v-75.782c0-19.79 15.104-29.687 45.312-29.687z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-46.094-63.78c13.542 0 24.61 2.473 33.203 7.42C-4.298-51.41 0-43.99 0-34.093V62h-9.375c0-10.938-2.604-19.14-7.812-24.61-5.21-5.468-14.844-8.203-28.907-8.202-18.23 0-33.333 4.166-45.312 12.5v-75.782c0-19.79 15.104-29.687 45.312-29.687z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 91.406005859375,\n      \"height\": 125.78099822998047\n    },\n    \"origin\": {\n      \"x\": 91.406005859375,\n      \"y\": 63.78099822998047\n    }\n  },\n  \"Porrectus1\": {\n    \"svgSrc\": \"<path d=\\\"M233.594 162.875c-58.855 0-107.032-6.25-144.53-18.75C34.895 125.895-11.46 99.855-50 66V-52.75C-21.354-24.625 26.302 6.885 92.97 41.78 123.697 57.928 163.54 66 212.5 66c21.354 0 34.635-9.896 39.844-29.688V151.94c0 7.29-6.25 10.937-18.75 10.937z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M233.594 162.875c-58.855 0-107.032-6.25-144.53-18.75C34.895 125.895-11.46 99.855-50 66V-52.75C-21.354-24.625 26.302 6.885 92.97 41.78 123.697 57.928 163.54 66 212.5 66c21.354 0 34.635-9.896 39.844-29.688V151.94c0 7.29-6.25 10.937-18.75 10.937z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 302.343994140625,\n      \"height\": 215.6269989013672\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 52.75\n    }\n  },\n  \"Porrectus2\": {\n    \"svgSrc\": \"<path d=\\\"M309.375 259.375c-50.52 0-110.938-22.396-181.25-67.188C48.437 141.667-10.938 94.272-50 50V-68.75C0-3.125 60.417 52.083 131.25 96.875c58.333 36.98 110.677 58.854 157.03 65.625h7.033c16.145 0 26.822-9.896 32.03-29.688v114.844c0 7.812-5.99 11.72-17.968 11.72z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M309.375 259.375c-50.52 0-110.938-22.396-181.25-67.188C48.437 141.667-10.938 94.272-50 50V-68.75C0-3.125 60.417 52.083 131.25 96.875c58.333 36.98 110.677 58.854 157.03 65.625h7.033c16.145 0 26.822-9.896 32.03-29.688v114.844c0 7.812-5.99 11.72-17.968 11.72z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 377.3429870605469,\n      \"height\": 328.1260070800781\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 68.75\n    }\n  },\n  \"Porrectus3\": {\n    \"svgSrc\": \"<path d=\\\"M309.375 355.78c-48.96-16.666-109.115-55.468-180.47-116.405C79.428 198.23 19.793 134.687-50 48.75V-70C20 40 94.104 103.79 135.25 148.063 190 200 230 230 288.28 258.906c4.168 2.083 8.334 3.125 12.5 3.125 12.5 0 21.355-10.937 26.564-32.81v114.06c0 9.376-3.386 14.063-10.156 14.064-2.084 0-4.688-.522-7.813-1.563z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M309.375 355.78c-48.96-16.666-109.115-55.468-180.47-116.405C79.428 198.23 19.793 134.687-50 48.75V-70C20 40 94.104 103.79 135.25 148.063 190 200 230 230 288.28 258.906c4.168 2.083 8.334 3.125 12.5 3.125 12.5 0 21.355-10.937 26.564-32.81v114.06c0 9.376-3.386 14.063-10.156 14.064-2.084 0-4.688-.522-7.813-1.563z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 377.343994140625,\n      \"height\": 427.3450012207031\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 70\n    }\n  },\n  \"Porrectus4\": {\n    \"svgSrc\": \"<path d=\\\"M350 453.438c-52.754-22.397-120-77.345-201.74-164.844C90.87 227.656 24.784 147.708-50 48.75V-70C-8.84-1.25 58.406 86.51 151.74 193.28c60.868 69.793 119.13 124.22 174.782 163.282 5.797 3.646 11.014 5.47 15.652 5.47 12.173 0 21.45-11.72 27.826-35.157V441.72c0 9.373-3.19 14.06-9.565 14.06-2.9 0-6.377-.78-10.435-2.342z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M350 453.438c-52.754-22.397-120-77.345-201.74-164.844C90.87 227.656 24.784 147.708-50 48.75V-70C-8.84-1.25 58.406 86.51 151.74 193.28c60.868 69.793 119.13 124.22 174.782 163.282 5.797 3.646 11.014 5.47 15.652 5.47 12.173 0 21.45-11.72 27.826-35.157V441.72c0 9.373-3.19 14.06-9.565 14.06-2.9 0-6.377-.78-10.435-2.342z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 420,\n      \"height\": 525.780029296875\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 70\n    }\n  },\n  \"PunctumCavum\": {\n    \"svgSrc\": \"<path d=\\\"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\\\"/><path fill=\\\"#fff\\\" d=\\\"M.08-42.56c9.585.206 20.126.53 27.954 6.822 4.96 3.9 4.71 10.792 4.574 16.482v51.278C22.09 27.066 7.283 26.072.168 26.01c-7.72.23-21.895.935-32.616 4.674.04-19.197-.083-38.395.064-57.59.567-7.5 7.834-12.33 14.62-13.774 5.818-1.498 11.857-1.86 17.844-1.88z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\"\n    },\n    {\n      \"type\": \"negative\",\n      \"data\": \"M.08-42.56c9.585.206 20.126.53 27.954 6.822 4.96 3.9 4.71 10.792 4.574 16.482v51.278C22.09 27.066 7.283 26.072.168 26.01c-7.72.23-21.895.935-32.616 4.674.04-19.197-.083-38.395.064-57.59.567-7.5 7.834-12.33 14.62-13.774 5.818-1.498 11.857-1.86 17.844-1.88z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 123.43799591064453\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 60.90599822998047\n    }\n  },\n  \"PunctumCuadratum\": {\n    \"svgSrc\": \"<path d=\\\"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 123.43799591064453\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 60.90599822998047\n    }\n  },\n  \"PunctumCuadratumAscLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 152.343994140625\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 88.34400177001953\n    }\n  },\n  \"PunctumCuadratumDesLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 151.56199645996094\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 75.56199645996094\n    }\n  },\n  \"PunctumInclinatum\": {\n    \"svgSrc\": \"<path d=\\\"M0-75.78L50 0 0 75-50 0 0-75.78z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M0-75.78L50 0 0 75-50 0 0-75.78z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 150.77999877929688\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 75.77999877929688\n    }\n  },\n  \"PunctumInclinatumLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M 0,-53.164062 35,-0.1171875 0,52.382812 -35,-0.1171875 0,-53.164062 z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M 0,-53.164062 35,-0.1171875 0,52.382812 -35,-0.1171875 0,-53.164062 z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 70,\n      \"height\": 105.546\n    },\n    \"origin\": {\n      \"x\": 35,\n      \"y\": 53.164062\n    }\n  },\n  \"Quilisma\": {\n    \"svgSrc\": \"<path d=\\\"M-50 34.938V-51c5.73 20.833 13.02 31.25 21.875 31.25 7.813 0 12.5-15.625 14.063-46.875 3.645 12.5 6.9 21.224 9.765 26.172s6.9 7.422 12.11 7.422c5.208 0 9.374-14.324 12.5-42.97 5.73 22.917 10.677 34.375 14.843 34.375 5.73 0 10.677-15.885 14.844-47.656v100c0 17.707-3.125 26.56-9.375 26.56-4.688 0-9.115-5.988-13.28-17.968-2.085 21.875-8.074 32.813-17.97 32.813-7.813 0-16.146-7.292-25-21.875-4.688 20.312-10.677 30.47-17.97 30.47-5.207 0-9.244-2.605-12.108-7.814C-48.568 47.698-50 41.708-50 34.938z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-50 34.938V-51c5.73 20.833 13.02 31.25 21.875 31.25 7.813 0 12.5-15.625 14.063-46.875 3.645 12.5 6.9 21.224 9.765 26.172s6.9 7.422 12.11 7.422c5.208 0 9.374-14.324 12.5-42.97 5.73 22.917 10.677 34.375 14.843 34.375 5.73 0 10.677-15.885 14.844-47.656v100c0 17.707-3.125 26.56-9.375 26.56-4.688 0-9.115-5.988-13.28-17.968-2.085 21.875-8.074 32.813-17.97 32.813-7.813 0-16.146-7.292-25-21.875-4.688 20.312-10.677 30.47-17.97 30.47-5.207 0-9.244-2.605-12.108-7.814C-48.568 47.698-50 41.708-50 34.938z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 150\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 89.28199768066406\n    }\n  },\n  \"TerminatingAscLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-9.375 40.22c0-11.98-4.948-17.97-14.844-17.97-10.936 0-19.53 3.646-25.78 10.938v-53.126c0-6.77 2.604-12.76 7.813-17.968 5.208-5.21 10.677-8.594 16.406-10.157 2.603-.52 5.207-.78 7.81-.78 3.647 0 7.032.78 10.157 2.343C-2.603-43.896 0-39.73 0-34V73.03h-9.375V40.22z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-9.375 40.22c0-11.98-4.948-17.97-14.844-17.97-10.936 0-19.53 3.646-25.78 10.938v-53.126c0-6.77 2.604-12.76 7.813-17.968 5.208-5.21 10.677-8.594 16.406-10.157 2.603-.52 5.207-.78 7.81-.78 3.647 0 7.032.78 10.157 2.343C-2.603-43.896 0-39.73 0-34V73.03h-9.375V40.22z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 49.999000549316406,\n      \"height\": 121.87299346923828\n    },\n    \"origin\": {\n      \"x\": 49.999000549316406,\n      \"y\": 48.842994689941406\n    }\n  },\n  \"TerminatingDesLiquescent\": {\n    \"svgSrc\": \"<path d=\\\"M-9.375-48.156V-80.97H0V26.845c0 5.73-2.604 9.896-7.813 12.5-3.125 1.562-6.51 2.343-10.156 2.343-2.603 0-5.207-.26-7.81-.78-5.73-1.563-11.2-4.95-16.407-10.157C-47.398 25.542-50 19.292-50 12v-52.344c6.25 7.292 14.844 10.938 25.78 10.938 9.897 0 14.845-6.25 14.845-18.75z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-9.375-48.156V-80.97H0V26.845c0 5.73-2.604 9.896-7.813 12.5-3.125 1.562-6.51 2.343-10.156 2.343-2.603 0-5.207-.26-7.81-.78-5.73-1.563-11.2-4.95-16.407-10.157C-47.398 25.542-50 19.292-50 12v-52.344c6.25 7.292 14.844 10.938 25.78 10.938 9.897 0 14.845-6.25 14.845-18.75z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 50,\n      \"height\": 122.65800476074219\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 80.97000122070312\n    }\n  },\n  \"VerticalEpisemaAbove\": {\n    \"svgSrc\": \"<path d=\\\"M-8-80H8L4 0h-8l-4-80z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-8-80H8L4 0h-8l-4-80z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 16,\n      \"height\": 80\n    },\n    \"origin\": {\n      \"x\": 8,\n      \"y\": 80\n    }\n  },\n  \"VerticalEpisemaBelow\": {\n    \"svgSrc\": \"<path d=\\\"M-8 80H8L4 0h-8l-4 80z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M-8 80H8L4 0h-8l-4 80z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 16,\n      \"height\": 80\n    },\n    \"origin\": {\n      \"x\": 8,\n      \"y\": 0\n    }\n  },\n  \"VirgaLong\": {\n    \"svgSrc\": \"<path d=\\\"M50-38v285.156c0 6.77-2.344 10.937-7.03 12.5-1.564 0-2.605-.78-3.126-2.344-.52-1.562-.782-10.156-.782-25.78V54.186C29.168 45.334 16.146 40.907 0 40.907c-22.917 0-39.583 5.208-50 15.624V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M50-38v285.156c0 6.77-2.344 10.937-7.03 12.5-1.564 0-2.605-.78-3.126-2.344-.52-1.562-.782-10.156-.782-25.78V54.186C29.168 45.334 16.146 40.907 0 40.907c-22.917 0-39.583 5.208-50 15.624V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 326.56201171875\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 66.90599822998047\n    }\n  },\n  \"VirgaShort\": {\n    \"svgSrc\": \"<path d=\\\"M50-38v211.72c0 7.29-2.344 11.457-7.03 12.5-1.564 0-2.606-.783-3.126-2.345-.52-1.563-.782-10.156-.782-25.78V54.187C29.167 45.332 16.146 40.906 0 40.906c-22.917 0-39.583 5.21-50 15.625V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M50-38v211.72c0 7.29-2.344 11.457-7.03 12.5-1.564 0-2.606-.783-3.126-2.345-.52-1.563-.782-10.156-.782-25.78V54.187C29.167 45.332 16.146 40.906 0 40.906c-22.917 0-39.583 5.21-50 15.625V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 100,\n      \"height\": 253.12600708007812\n    },\n    \"origin\": {\n      \"x\": 50,\n      \"y\": 66.90599822998047\n    }\n  },\n  \"Virgula\": {\n    \"svgSrc\": \"<path d=\\\"M8.178-55.66c0-22.137 12.092-33.2 36.287-33.2 11.835 0 23.53 5.66 35.108 16.98C91.15-60.547 96.94-41.766 96.94-15.534c0 53.515-31.646 87.487-94.937 101.895-2.048-2.06-3.077-5.146-3.077-9.273 0-1.03.247-1.8.76-2.316 42.71-19.027 64.075-41.678 64.075-67.92 0-11.322-2.325-20.326-6.945-27.016-4.62-6.69-9.52-11.052-14.676-13.11-5.147-2.048-11.836-3.85-20.07-5.403C12.81-39.707 8.18-45.37 8.18-55.66z\\\"/>\",\n    \"paths\": [{\n      \"type\": \"positive\",\n      \"data\": \"M8.178-55.66c0-22.137 12.092-33.2 36.287-33.2 11.835 0 23.53 5.66 35.108 16.98C91.15-60.547 96.94-41.766 96.94-15.534c0 53.515-31.646 87.487-94.937 101.895-2.048-2.06-3.077-5.146-3.077-9.273 0-1.03.247-1.8.76-2.316 42.71-19.027 64.075-41.678 64.075-67.92 0-11.322-2.325-20.326-6.945-27.016-4.62-6.69-9.52-11.052-14.676-13.11-5.147-2.048-11.836-3.85-20.07-5.403C12.81-39.707 8.18-45.37 8.18-55.66z\"\n    }],\n    \"bounds\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 98.01399993896484,\n      \"height\": 175.2209930419922\n    },\n    \"origin\": {\n      \"x\": 1.0739939212799072,\n      \"y\": 88.86000061035156\n    }\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Glyphs.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport { Units, Pitch, Point, Rect, Margins, Size, Step, MarkingPositionHint } from 'Exsurge.Core'\nimport { Glyphs } from 'Exsurge.Glyphs'\nimport { Latin } from 'Exsurge.Text'\n\n\n// load in the web font for special chant characters here:\nvar __exsurgeCharactersFont = require(\"url?limit=30000!../assets/fonts/ExsurgeChar.otf\");\n\n\nexport let GlyphCode = {\n\n  None: \"None\",\n\n  AcuteAccent: \"AcuteAccent\",\n  Stropha: \"Stropha\",\n  //  StrophaLiquescent: \"StrophaLiquescent\",\n\n  BeginningAscLiquescent: \"BeginningAscLiquescent\",\n  BeginningDesLiquescent: \"BeginningDesLiquescent\",\n\n  CustodDescLong: \"CustodDescLong\",\n  CustodDescShort: \"CustodDescShort\",\n  CustodLong: \"CustodLong\",\n  CustodShort: \"CustodShort\",\n\n  // clefs and other markings\n  DoClef: \"DoClef\",\n  FaClef: \"FaClef\",\n  Flat: \"Flat\",\n  Mora: \"Mora\",\n  Natural: \"Natural\",\n  OriscusAsc: \"OriscusAsc\",\n  OriscusDes: \"OriscusDes\",\n  OriscusLiquescent: \"OriscusLiquescent\",\n\n  PodatusLower: \"PodatusLower\",\n  PodatusUpper: \"PodatusUpper\",\n\n  Porrectus1: \"Porrectus1\", // 1 staff line difference,\n  Porrectus2: \"Porrectus2\", // 2 lines difference, etc...\n  Porrectus3: \"Porrectus3\",\n  Porrectus4: \"Porrectus4\",\n\n  PunctumCavum: \"PunctumCavum\",\n  PunctumCuadratum: \"PunctumCuadratum\",\n  PunctumCuadratumAscLiquescent: \"PunctumCuadratumAscLiquescent\",\n  PunctumCuadratumDesLiquescent: \"PunctumCuadratumDesLiquescent\",\n  PunctumInclinatum: \"PunctumInclinatum\",\n  PunctumInclinatumLiquescent: \"PunctumInclinatumLiquescent\",\n  Quilisma: \"Quilisma\",\n\n  TerminatingAscLiquescent: \"TerminatingAscLiquescent\",\n  TerminatingDesLiquescent: \"TerminatingDesLiquescent\",\n  VerticalEpisemaAbove: \"VerticalEpisemaAbove\",\n  VerticalEpisemaBelow: \"VerticalEpisemaBelow\",\n  VirgaLong: \"VirgaLong\",\n  VirgaShort: \"VirgaShort\",\n  Virgula: \"Virgula\"\n}; // GlyphCode\n\nexport var QuickSvg = {\n\n  // namespaces  \n  ns: 'http://www.w3.org/2000/svg',\n  xmlns: 'http://www.w3.org/2000/xmlns/',\n  xlink: 'http://www.w3.org/1999/xlink',\n\n  // create the root level svg object\n  svg: function(width, height) {\n    var node = document.createElementNS(this.ns,'svg');\n\n    node.setAttribute('xmlns', this.ns); \n    node.setAttribute('version', '1.1');\n    node.setAttributeNS(this.xmlns, 'xmlns:xlink', this.xlink);\n\n    node.setAttribute('width', width);\n    node.setAttribute('height', height);\n\n    // create the defs element\n    var defs = document.createElementNS(this.ns, 'defs');\n    node.appendChild(defs);\n\n    node.defs = defs;\n\n    node.clearNotations = function() {\n      // clear out all children except defs\n      node.removeChild(defs);\n\n      while (node.hasChildNodes())\n        node.removeChild(node.lastChild);\n      \n      node.appendChild(defs);\n    }\n\n    return node;\n  },\n\n  defs: function() {\n    return node;\n  },\n\n  rect: function(width, height) {\n    var node = document.createElementNS(this.ns, 'rect');\n\n    node.setAttribute('width', width);\n    node.setAttribute('height', height);\n\n    return node;\n  },\n\n  line: function(x1, y1, x2, y2) {\n    var node = document.createElementNS(this.ns, 'line');\n\n    node.setAttribute('x1', x1);\n    node.setAttribute('y1', y1);\n    node.setAttribute('x2', x2);\n    node.setAttribute('y2', y2);\n\n    return node;\n  },\n\n  g: function() {\n    var node = document.createElementNS(this.ns, 'g');\n\n    return node;\n  },\n\n  text: function() {\n    var node = document.createElementNS(this.ns, 'text');\n\n    return node;\n  },\n\n  tspan: function(str) {\n    var node = document.createElementNS(this.ns, 'tspan');\n    node.textContent = str;\n\n    return node;\n  },\n\n  // nodeRef should be the id of the object in defs (without the #)\n  use: function(nodeRef) {\n    var node = document.createElementNS(this.ns, 'use');\n    node.setAttributeNS(this.xlink, \"xlink:href\", '#' + nodeRef);\n\n    return node;\n  },\n\n  createFragment: function(name, attributes, child) {\n    if (child === undefined || child === null)\n      child = '';\n\n    var fragment = '<' + name + ' ';\n\n    for (var attr in attributes) {\n      if (attributes.hasOwnProperty(attr))\n        fragment += attr + '=\"' + attributes[attr] + '\" ';\n    }\n\n    fragment += '>' + child + '</' + name + '>';\n\n    return fragment;\n  },\n\n  parseFragment: function(fragment) {\n\n    // create temporary holder\n    var well = document.createElement('svg');\n\n    // act as a setter if svg is given\n    if (fragment) {\n\n      var container = this.g();\n\n      // dump raw svg\n      // do this to allow the browser to automatically create svg nodes?\n      well.innerHTML = '<svg>' + fragment.replace(/\\n/, '').replace(/<(\\w+)([^<]+?)\\/>/g, '<$1$2></$1>') + '</svg>'\n\n      // transplant nodes\n      for (var i = 0, il = well.firstChild.childNodes.length; i < il; i++)\n        container.appendChild(well.firstChild.firstChild)\n      \n      return container;\n    }\n  },\n\n  translate: function(node, x, y) {\n    node.setAttribute('transform', 'translate(' + x + ',' + y + ')');\n    return node;\n  },\n\n  scale: function(node, sx, sy) {\n    node.setAttribute('transform', 'scale(' + sx + ',' + sy + ')');\n    return node;\n  }\n}\n\n/*\n * ChantContext\n */\nexport class ChantContext {\n\n  constructor() {\n\n    this.defs = {};\n\n    // font styles\n    this.lyricTextSize = 16; // in points?\n    this.lyricTextFont = \"'Palatino Linotype', 'Book Antiqua', Palatino, serif\";\n    this.lyricTextColor = \"#000\";\n    \n    this.dropCapTextSize = 64;\n    this.dropCapTextFont = this.lyricTextFont;\n    this.dropCapTextColor = this.lyricTextColor;\n    \n    this.annotationTextSize = 13;\n    this.annotationTextFont = this.lyricTextFont;\n    this.annotationTextColor = this.lyricTextColor;\n\n    // everything depends on the scale of the punctum\n    this.glyphPunctumWidth = Glyphs.PunctumCuadratum.bounds.width;\n    this.glyphPunctumHeight = Glyphs.PunctumCuadratum.bounds.height;\n\n    // fixme: for now, we just set these using the glyph scales as noted above, presuming a\n    // staff line size of 0.5 in. Really what we should do is scale the punctum size based\n    // on the text metrics, right? 1 punctum ~ x height size?\n    this.glyphScaling = 1.0 / 16.0; \n\n    this.staffInterval = this.glyphPunctumWidth * this.glyphScaling;\n    this.staffLineWeight = this.glyphPunctumWidth * this.glyphScaling / 8;\n    this.neumeLineWeight = this.glyphPunctumWidth * this.glyphScaling / 8; // the weight of connecting lines in the glyphs.\n    this.dividerLineWeight = this.neumeLineWeight; // of quarter bar, half bar, etc.\n    this.episemaLineWeight = this.neumeLineWeight; // of horizontal episemae\n\n    // for keeping track of the clef\n    this.activeClef = null;\n\n    this.staffLineColor = \"#000\";\n    this.dividerLineColor = \"#000\";\n\n    this.defaultLanguage = new Latin();\n\n    this.svgTextMeasurer = QuickSvg.svg(1,1);\n    this.svgTextMeasurer.setAttribute('id', \"TextMeasurer\");\n    document.querySelector('body').appendChild(this.svgTextMeasurer);\n\n    // measure the size of a hyphen for the lyrics\n    var hyphen = new Lyric(this, \"-\", LyricType.SingleSyllable);\n    this.hyphenWidth = hyphen.bounds.width;\n\n    this.minLyricWordSpacing = this.hyphenWidth;\n\n    this.intraNeumeSpacing = this.staffInterval / 2.0;\n\n    // for connecting neume syllables...\n    this.syllableConnector = '-';\n\n    this.drawGuides = false;\n    this.drawDebuggingBounds = true;\n\n    // chant notation elements are normally separated by a minimum fixed amount of space\n    // on the staff line. It can happen, however, that two text elements are almost close\n    // enough to merge, only to be separated much more by the required hyphen (or other\n    // connecting string).\n    //\n    // This tolerance value allows a little bit of flexibility to merge two close lyrical\n    // elements, thus bringing the chant notation elements a bit closer than otherwise\n    // would be normally allowed.\n    //\n    // condensing tolerance is a percentage value (0.0-1.0, inclusive) that indicates\n    // how much the default spacing can shrink. E.g., a value of 0.80 allows the layout\n    // engine to separate two glyphs by only 80% of the normal inter-neume spacing value.\n    //\n    // fixme: condensing tolerance is not implemented yet!\n    this.condensingTolerance = 0.9;\n\n    // if auto color is true, then exsurge tries to automatically colorize\n    // some elements of the chant (directives become rubric color, etc.)\n    this.autoColor = true;\n\n    this.insertFontsInDoc();\n  }\n\n  calculateHeightFromStaffPosition(staffPosition) {\n    return -staffPosition * this.staffInterval;\n  }\n\n  insertFontsInDoc() {\n\n    var styleElement = document.getElementById('exsurge-fonts');\n\n    if (styleElement === null) {\n      // create it since it doesn't exist yet.\n      styleElement = document.createElement('style');\n      styleElement.id = 'exsurge-fonts';\n\n      styleElement.appendChild(document.createTextNode(\"@font-face{font-family: 'Exsurge Characters';font-weight: normal;font-style: normal;src: url(\" + __exsurgeCharactersFont + \") format('opentype');}\"));\n\n      document.head.appendChild(styleElement);\n    }\n  }\n}\n\n\n/*\n * ChantLayoutElement\n */\nexport class ChantLayoutElement {\n\n  constructor() {\n\n    this.bounds = new Rect();\n    this.origin = new Point(0, 0);\n\n    this.selected = false;\n    this.highlighted = false;\n  }\n\n  // draws the element an html5 canvas\n  draw(ctxt) {\n\n  }\n\n  // returns svg code for the element, used for printing support\n  createDrawable(ctxt) {\n    throw \"ChantLayout Elements must implement createDrawable(ctxt)\";\n  }\n}\n\n\nexport class DividerLineVisualizer extends ChantLayoutElement {\n\n  constructor(ctxt, staffPosition0, staffPosition1) {\n    super();\n\n    var y0 = ctxt.calculateHeightFromStaffPosition(staffPosition0);\n    var y1 = ctxt.calculateHeightFromStaffPosition(staffPosition1);\n\n    if (y0 > y1) {\n      var temp = y0;\n      y0 = y1;\n      y1 = temp;\n    }\n\n    this.bounds.x = 0;\n    this.bounds.y = y0;\n    this.bounds.width = ctxt.dividerLineWeight;\n    this.bounds.height = y1 - y0;\n\n    this.origin.x = this.bounds.width / 2;\n    this.origin.y = y0;\n  }\n\n  createDrawable(ctxt) {\n\n    return QuickSvg.createFragment('rect', {\n      'x': this.bounds.x,\n      'y': this.bounds.y,\n      'width': ctxt.dividerLineWeight,\n      'height': this.bounds.height,\n      'fill': ctxt.dividerLineColor,\n      'class': 'dividerLine'\n    });\n  }\n}\n\nexport class NeumeLineVisualizer extends ChantLayoutElement {\n\n  constructor(ctxt, note0, note1, hanging) {\n    super();\n\n    var y0 = ctxt.calculateHeightFromStaffPosition(note0.staffPosition);\n    var y1 = ctxt.calculateHeightFromStaffPosition(note1.staffPosition);\n\n    if (y0 > y1) {\n      var temp = y0;\n      y0 = y1;\n      y1 = temp;\n    }\n\n    if (hanging)\n      y1 += ctxt.glyphPunctumHeight * ctxt.glyphScaling / 2.2;\n\n    this.bounds.x = 0;\n    this.bounds.y = y0;\n    this.bounds.width = ctxt.neumeLineWeight;\n    this.bounds.height = y1 - y0;\n\n    this.origin.x = 0;\n    this.origin.y = 0;\n  }\n\n  createDrawable(ctxt) {\n\n    return QuickSvg.createFragment('rect', {\n      'x': this.bounds.x,\n      'y': this.bounds.y,\n      'width': ctxt.neumeLineWeight,\n      'height': this.bounds.height,\n      'fill': ctxt.neumeLineColor,\n      'class': 'neumeLine'\n    });\n  }\n}\n\nexport class HorizontalEpisemaVisualizer extends ChantLayoutElement {\n\n  constructor(ctxt, x, y, width) {\n    super();\n\n    this.bounds.x = x;\n    this.bounds.y = y;\n    this.bounds.width = width;\n    this.bounds.height = ctxt.episemaLineWeight;\n\n    this.origin.x = 0;\n    this.origin.y = 0;\n  }\n\n  createDrawable(ctxt) {\n\n    return QuickSvg.createFragment('rect', {\n      'x': this.bounds.x,\n      'y': this.bounds.y,\n      'width': this.bounds.width,\n      'height': this.bounds.height,\n      'fill': ctxt.neumeLineColor,\n      'class': 'horizontalEpisema'\n    });\n  }\n}\n\n\nexport class GlyphVisualizer extends ChantLayoutElement {\n\n  constructor(ctxt, glyphCode) {\n    super();\n\n    this.glyph = null;\n\n    this.setGlyph(ctxt, glyphCode);\n  }\n\n  setGlyph(ctxt, glyphCode) {\n\n    if (this.glyphCode === glyphCode)\n      return;\n\n    if (typeof glyphCode === 'undefined' || glyphCode === null || glyphCode === \"\")\n      this.glyphCode = GlyphCode.None;\n    else\n      this.glyphCode = glyphCode;\n\n    this.glyph = Glyphs[this.glyphCode];\n\n    // if this glyph hasn't been used yet, then load it up in the defs section for sharing\n    if (!ctxt.defs.hasOwnProperty(this.glyphCode)) {\n      var glyphSrc = this.glyph.svgSrc;\n\n      // create the ref\n      ctxt.defs[this.glyphCode] = QuickSvg.createFragment('g', {\n        id: this.glyphCode,\n        'class': 'glyph',\n        transform: 'scale(' + ctxt.glyphScaling + ')'\n      }, glyphSrc);\n    }\n\n\n    this.origin.x = this.glyph.origin.x * ctxt.glyphScaling;\n    this.origin.y = this.glyph.origin.y * ctxt.glyphScaling;\n\n    this.bounds.x = 0;\n    this.bounds.y = -this.origin.y;\n    this.bounds.width = this.glyph.bounds.width * ctxt.glyphScaling;\n    this.bounds.height = this.glyph.bounds.height * ctxt.glyphScaling;\n  }\n\n  setStaffPosition(ctxt, staffPosition) {\n    this.bounds.y += ctxt.calculateHeightFromStaffPosition(staffPosition);\n  }\n\n  createDrawable(ctxt) {\n\n    return QuickSvg.createFragment('use', {\n      'xlink:href': '#' + this.glyphCode,\n      x: this.bounds.x + this.origin.x,\n      y: this.bounds.y + this.origin.y\n    });\n  }\n}\n\nvar TextSpan = function(text, properties) {\n  if (typeof properties === 'undefined' || properties === null)\n    properties = \"\";\n\n  this.text = text;\n  this.properties = properties;\n};\n\nvar boldMarkup = \"*\";\nvar italicMarkup = \"_\";\nvar redMarkup = \"^\";\nvar smallCapsMarkup = \"%\";\n\nfunction MarkupStackFrame(symbol, startIndex, properties) {\n  this.symbol = symbol;\n  this.startIndex = startIndex;\n  this.properties = properties;\n}\n\nMarkupStackFrame.createStackFrame = function(symbol, startIndex) {\n\n  var properties = \"\";\n\n  switch(symbol) {\n    case boldMarkup:\n      properties = 'font-weight:bold;';\n      break;\n    case italicMarkup:\n      properties = 'font-style:italic;';\n      break;\n    case redMarkup:\n      properties = 'fill:#f00;'; // SVG text color is set by the fill property\n      break;\n    case smallCapsMarkup:\n      properties = \"font-feature-settings:'smcp';-webkit-font-feature-settings:'smcp';\";\n      break;\n  }\n\n  return new MarkupStackFrame(symbol, startIndex, properties);\n};\n\n\n// for escaping html strings before they go into the svgs\n// adapted from http://stackoverflow.com/a/12034334/5720160\nvar __subsForTspans = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\"\n};\n\nexport class TextElement extends ChantLayoutElement {\n\n  constructor(ctxt, text, fontFamily, fontSize, textAnchor) {\n    super();\n\n    // set these to some sane values for now...\n    this.bounds.x = 0;\n    this.bounds.y = 0;\n    this.bounds.width = 0;\n    this.bounds.height = 0;\n    this.origin.x = 0;\n    this.origin.y = 0;\n\n    this.fontFamily = fontFamily;\n    this.fontSize = fontSize;\n    this.textAnchor = textAnchor;\n    this.dominantBaseline = 'baseline'; // default placement\n\n    this.generateSpansFromText(ctxt, text);\n\n    this.recalculateMetrics(ctxt);\n  }\n\n  generateSpansFromText(ctxt, text) {\n\n    this.unsanitizedText = text;\n    this.text = \"\";\n    this.spans = [];\n\n    // save ourselves a lot of grief for a very common text:\n    if (text === \"*\" || text === \"\") {\n      this.spans.push(new TextSpan(text, \"\"));\n      return;\n    }\n\n    var markupStack = [];\n    var spanStartIndex = 0;\n\n    var filterFrames = (frame, symbol) => frame.Symbol === symbol;\n\n    var that = this;\n    var closeSpan = function (spanText, extraProperties) {\n      if (spanText === \"\")\n        return;\n\n      that.text += spanText;\n\n      var properties = \"\";\n      for (var i = 0; i < markupStack.length; i++)\n        properties += markupStack[i].properties;\n\n      if (extraProperties)\n        properties = properties + extraProperties;\n\n      that.spans.push(new TextSpan(spanText, properties));\n    };\n\n    var markupRegex = /(\\*|_|\\^|%|[ARVarv]\\/\\.)/g;\n\n    var match = null;\n    while ((match = markupRegex.exec(text))) {\n\n      var markupSymbol = match[0];\n\n      // non-matching symbols first\n      if (markupSymbol === \"A/.\" || markupSymbol === \"R/.\" || markupSymbol === \"V/.\" ||\n          markupSymbol === \"a/.\" || markupSymbol === \"r/.\" || markupSymbol === \"v/.\") {\n        closeSpan(text[match.index] + \".\", \"font-family:'Exsurge Characters';fill:#f00;\");\n      } else if (markupStack.length === 0) {\n        // otherwise we're dealing with matching markup delimeters\n        // if this is our first markup frame, then just create an inline for preceding text and push the stack frame\n        closeSpan(text.substring(spanStartIndex, match.index));\n        markupStack.push(MarkupStackFrame.createStackFrame(markupSymbol, match.index));\n      } else {\n\n        if (markupStack[markupStack.length - 1].symbol === markupSymbol) {\n          // group close\n          closeSpan(text.substring(spanStartIndex, match.index));\n          markupStack.pop();\n        } else if (markupStack.filter(filterFrames).length > 0) {\n          // trying to open a recursive group (or forgot to close a previous group)\n          // in either case, we just unwind to the previous stack frame\n          spanStartIndex = markupStack[markupStack.length - 1].startIndex;\n          markupStack.pop();\n          continue;\n        } else {\n          // group open\n          closeSpan(text.substring(spanStartIndex, match.index));\n          markupStack.push(MarkupStackFrame.createStackFrame(markupSymbol, match.index));\n        }\n      }\n\n      // advance the start index past the current markup\n      spanStartIndex = match.index + markupSymbol.length;\n    }\n\n    // if we finished matches, and there is still some text left, create one final run\n    if (spanStartIndex < text.length)\n      closeSpan(text.substring(spanStartIndex, text.length));\n\n    // if after all of that we still didn't create any runs, then just add the entire text\n    // string itself as a run\n    if (this.spans.length === 0)\n      closeSpan(text);\n  }\n\n  recalculateMetrics(ctxt) {\n\n    this.bounds.x = 0;\n    this.bounds.y = 0;\n\n    var xml = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + this.createDrawable(ctxt) + '</svg>';\n    var doc = new DOMParser().parseFromString(xml, 'application/xml');\n    while(ctxt.svgTextMeasurer.firstChild) {\n      ctxt.svgTextMeasurer.firstChild.remove();\n    }\n    ctxt.svgTextMeasurer.appendChild( ctxt.svgTextMeasurer.ownerDocument.importNode(doc.documentElement, true).firstChild );\n\n    var bbox = ctxt.svgTextMeasurer.firstChild.getBBox();\n\n    this.bounds.x = 0;\n    this.bounds.y = 0;\n    this.bounds.width = bbox.width;\n    this.bounds.height = bbox.height;\n    this.origin.x = 0;\n    this.origin.y = 0; // baseline?\n  }\n\n  getCssClasses() {\n    return \"\";\n  }\n\n  getExtraStyleProperties(ctxt) {\n    return \"\";\n  }\n\n  static escapeForTspan(string) {\n    return String(string).replace(/[&<>]/g, function (s) {\n      return __subsForTspans[s];\n    });\n  }\n\n  createDrawable(ctxt) {\n\n    var spans = \"\";\n\n    for (var i = 0; i < this.spans.length; i++) {\n      var options = {};\n\n      if (this.spans[i].properties)\n        options['style'] = this.spans[i].properties;\n\n      spans += QuickSvg.createFragment('tspan', options, TextElement.escapeForTspan(this.spans[i].text));\n    }\n\n    var styleProperties = \"font-family:\" + this.fontFamily +\n      \";font-size:\" + this.fontSize + \"px\" +\n      \";font-kerning:normal;\" +\n      this.getExtraStyleProperties(ctxt);\n\n    return QuickSvg.createFragment('text', {\n      'x': this.bounds.x,\n      'y': this.bounds.y,\n      'class': this.getCssClasses().trim(),\n      'text-anchor': this.textAnchor,\n      'dominant-baseline': this.dominantBaseline,\n      'style': styleProperties\n    }, spans);\n  }\n}\n\nexport var LyricType = {\n  SingleSyllable: 0,\n  BeginningSyllable: 1,\n  MiddleSyllable: 2,\n  EndingSyllable: 3,\n\n  Directive: 4 // for asterisks, \"ij.\" elements, or other performance notes.\n};\n\nexport class Lyric extends TextElement {\n  constructor(ctxt, text, lyricType) {\n    super(ctxt, text, ctxt.lyricTextFont, ctxt.lyricTextSize, 'start');\n\n    this.cssClasses += \" Lyric\";\n\n    if (typeof lyricType === 'undefined' || lyricType === null || lyricType === \"\")\n      this.lyricType = LyricType.SingleSyllable;\n    else\n      this.lyricType = lyricType;\n\n    this.needsConnector = false;\n  }\n\n  allowsConnector() {\n    return this.lyricType === LyricType.BeginningSyllable ||\n            this.lyricType === LyricType.MiddleSyllable;\n  }\n\n  setNeedsConnector(needs) {\n    if (needs === true) {\n      this.needsConnector = true;\n      this.bounds.width = this.widthWithConnector;\n\n      if (this.spans.length > 0)\n        this.spans[this.spans.length - 1].text = this.lastSpanTextWithConnector;\n    } else {\n      this.needsConnector = false;\n      this.bounds.width = this.widthWithoutConnector;\n\n      if (this.spans.length > 0)\n        this.spans[this.spans.length - 1].text = this.lastSpanText;\n    }\n  }\n\n  generateSpansFromText(ctxt, text) {\n    super.generateSpansFromText(ctxt, text);\n\n    if (this.spans.length > 0) {\n      this.lastSpanText = this.spans[this.spans.length - 1].text;\n      this.lastSpanTextWithConnector = this.lastSpanText + ctxt.syllableConnector;\n    } else {\n      this.lastSpanText = \"\";\n      this.lastSpanTextWithConnector = \"\";\n    }\n  }\n\n  recalculateMetrics(ctxt) {\n    super.recalculateMetrics(ctxt);\n\n    this.widthWithoutConnector = this.bounds.width;\n    this.textWithConnector = this.text + ctxt.syllableConnector;\n\n    this.widthWithConnector = this.bounds.width + ctxt.hyphenWidth;\n\n    var activeLanguage = ctxt.defaultLanguage;\n\n    // calculate the point where the text lines up to the staff notation\n    // and offset the rect that much\n    var offset = 0;\n\n    if (this.lyricType !== LyricType.Directive) {\n\n      // Non-directive elements are lined up to the chant notation based on vowel segments.\n      // First we determine the vowel segment of the text, then we calculate the center point\n      // of that vowel segment.\n      var result = activeLanguage.findVowelSegment(this.text, 0);\n      if (result.found === true) {\n\n        // svgTextMeasurer still has the current lyric in it...\n        \n\n        var x1 = ctxt.svgTextMeasurer.firstChild.getSubStringLength(0, result.startIndex);\n        var x2 = ctxt.svgTextMeasurer.firstChild.getSubStringLength(0, result.startIndex + result.length);\n\n        offset = x1 + (x2 - x1) / 2;\n      } else {\n        // no vowels found according the text's language. for now we just center the text\n        offset = this.widthWithoutConnector / 2;\n      }\n\n    } else {\n      // directives are always centered on the chant notation\n      offset = this.widthWithoutConnector / 2;\n    }\n\n    this.bounds.x = -offset;\n    this.bounds.y = 0;\n\n    this.origin.x = offset;\n\n    this.bounds.width = this.widthWithoutConnector;\n    this.bounds.height = ctxt.lyricTextSize;\n  }\n\n  getCssClasses() {\n\n    var classes = \"lyric \";\n\n    if (this.lyricType === LyricType.Directive)\n      classes += \"directive \";\n\n    return classes + super.getCssClasses();\n  }\n\n  getExtraStyleProperties(ctxt) {\n    var props = super.getExtraStyleProperties();\n\n    if (this.lyricType === LyricType.Directive && ctxt.autoColor === true)\n      props += \"fill:#f00;\";\n\n    return props;\n  }\n\n  createDrawable(ctxt) {\n    if (this.spans.length > 0) {\n      if (this.needsConnector)\n        this.spans[this.spans.length - 1].text = this.lastSpanTextWithConnector;\n      else\n        this.spans[this.spans.length - 1].text = this.lastSpanText;\n    }\n\n    return super.createDrawable(ctxt);\n  }\n}\n\nexport class DropCap extends TextElement {\n\n  /**\n   * @param {String} text\n   */\n  constructor(ctxt, text) {\n    super(ctxt, text, ctxt.dropCapTextFont, ctxt.dropCapTextSize, 'middle');\n\n    this.padding = ctxt.staffInterval * 2;\n  }\n\n  getCssClasses() {\n    return \"dropCap \" + super.getCssClasses();\n  }\n}\n\nexport class Annotation extends TextElement {\n\n  /**\n   * @param {String} text\n   */\n  constructor(ctxt, text) {\n    super(ctxt, text, ctxt.annotationTextFont, ctxt.annotationTextSize, 'middle');\n    this.padding = ctxt.staffInterval;\n    this.dominantBaseline = 'hanging'; // so that annotations can be aligned at the top.\n  }\n\n  getCssClasses() {\n    return \"annotation \" + super.getCssClasses();\n  }\n}\n\n\n\nexport class ChantNotationElement extends ChantLayoutElement {\n\n  constructor() {\n    super();\n\n    //double\n    this.leadingSpace = 0.0;\n    this.trailingSpace = -1; // if less than zero, this is automatically calculated at layout time\n    this.keepWithNext = false;\n\n    this.lyric = null;\n\n    this.score = null; // the ChantScore\n    this.line = null; // the ChantLine\n\n    this.visualizers = [];\n  }\n\n  hasLyric() {\n    if (this.lyric !== null)\n      return true;\n    else\n      return false;\n  }\n\n  getLyricLeft() {\n    return this.bounds.x + this.lyric.bounds.x;\n  }\n\n  getLyricRight() {\n    return this.bounds.x + this.lyric.bounds.x + this.lyric.bounds.width;\n  }\n\n  // used by subclasses while building up the chant notations.\n  addVisualizer(chantLayoutElement) {\n    if (this.bounds.isEmpty())\n      this.bounds = chantLayoutElement.bounds.clone();\n    else\n      this.bounds.union(chantLayoutElement.bounds);\n\n    this.visualizers.push(chantLayoutElement);\n  }\n\n  // same as addVisualizer, except the element is unshifted to the front\n  // of the visualizer array rather than the end. This way, some\n  // visualizers can be placed behind the others...ledge lines for example.\n  prependVisualizer(chantLayoutElement) {\n    if (this.bounds.isEmpty())\n      this.bounds = chantLayoutElement.bounds.clone();\n    else\n      this.bounds.union(chantLayoutElement.bounds);\n\n    this.visualizers.unshift(chantLayoutElement);\n  }\n\n  // chant notation elements are given an opportunity to perform their layout via this function.\n  // subclasses should call this function first in overrides of this function.\n  // on completion, exsurge presumes that the bounds, the origin, and the drawable objects are\n  // all valid and prepared for higher level layout.\n  performLayout(ctxt) {\n\n    if (this.trailingSpace < 0)\n      this.trailingSpace = ctxt.intraNeumeSpacing * 4;\n\n    // reset the bounds and the staff notations before doing a layout\n    this.visualizers = [];\n    this.bounds = new Rect(Infinity, Infinity, -Infinity, -Infinity);\n\n    if (this.hasLyric())\n      this.lyric.recalculateMetrics(ctxt);\n  }\n\n  // a helper function for subclasses to call after they are done performing layout...\n  finishLayout(ctxt) {\n    //this.origin.x -= -this.bounds.x;\n    this.bounds.x = 0;\n\n    // add the lyric and line it up\n    if (this.hasLyric())\n      this.lyric.bounds.x = this.origin.x - this.lyric.origin.x;\n  }\n\n  createDrawable(ctxt) {\n    var inner = \"\";\n\n    for (var i = 0; i < this.visualizers.length; i++)\n      inner += this.visualizers[i].createDrawable(ctxt);\n\n    if (this.lyric)\n      inner += this.lyric.createDrawable(ctxt);\n\n    return QuickSvg.createFragment('g', {\n      'class': 'ChantNotationElement ' + this.constructor.name,\n      'transform': 'translate(' + this.bounds.x + ',' + 0 + ')'\n    }, inner);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Drawing.js\n **/","module.exports = \"data:font/opentype;base64,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eHN1cmdlIENoYXJhY3RlcnM6VmVyc2lvbiAxLjAwVmVyc2lvbiAxLjAwIEZlYnJ1YXJ5IDE4LCAyMDE2LCBpbml0aWFsIHJlbGVhc2VFeHN1cmdlQ2hhcmFjdGVyc1RoaXMgRm9udCBTb2Z0d2FyZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgU0lMIE9wZW4gRm9udCBMaWNlbnNlLCBWZXJzaW9uIDEuMS4gVGhpcyBsaWNlbnNlIGlzIGNvcGllZCBiZWxvdywgYW5kIGlzIGFsc28gYXZhaWxhYmxlIHdpdGggYSBGQVEgYXQ6IGh0dHA6Ly9zY3JpcHRzLnNpbC5vcmcvT0ZMDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClNJTCBPUEVOIEZPTlQgTElDRU5TRSBWZXJzaW9uIDEuMSAtIDI2IEZlYnJ1YXJ5IDIwMDcNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNClBSRUFNQkxFDQpUaGUgZ29hbHMgb2YgdGhlIE9wZW4gRm9udCBMaWNlbnNlIChPRkwpIGFyZSB0byBzdGltdWxhdGUgd29ybGR3aWRlIGRldmVsb3BtZW50IG9mIGNvbGxhYm9yYXRpdmUgZm9udCBwcm9qZWN0cywgdG8gc3VwcG9ydCB0aGUgZm9udCBjcmVhdGlvbiBlZmZvcnRzIG9mIGFjYWRlbWljIGFuZCBsaW5ndWlzdGljIGNvbW11bml0aWVzLCBhbmQgdG8gcHJvdmlkZSBhIGZyZWUgYW5kIG9wZW4gZnJhbWV3b3JrIGluIHdoaWNoIGZvbnRzIG1heSBiZSBzaGFyZWQgYW5kIGltcHJvdmVkIGluIHBhcnRuZXJzaGlwIHdpdGggb3RoZXJzLg0KDQpUaGUgT0ZMIGFsbG93cyB0aGUgbGljZW5zZWQgZm9udHMgdG8gYmUgdXNlZCwgc3R1ZGllZCwgbW9kaWZpZWQgYW5kIHJlZGlzdHJpYnV0ZWQgZnJlZWx5IGFzIGxvbmcgYXMgdGhleSBhcmUgbm90IHNvbGQgYnkgdGhlbXNlbHZlcy4gVGhlIGZvbnRzLCBpbmNsdWRpbmcgYW55IGRlcml2YXRpdmUgd29ya3MsIGNhbiBiZSBidW5kbGVkLCBlbWJlZGRlZCwgcmVkaXN0cmlidXRlZCBhbmQvb3Igc29sZCB3aXRoIGFueSBzb2Z0d2FyZSBwcm92aWRlZCB0aGF0IGFueSByZXNlcnZlZCBuYW1lcyBhcmUgbm90IHVzZWQgYnkgZGVyaXZhdGl2ZSB3b3Jrcy4gVGhlIGZvbnRzIGFuZCBkZXJpdmF0aXZlcywgaG93ZXZlciwgY2Fubm90IGJlIHJlbGVhc2VkIHVuZGVyIGFueSBvdGhlciB0eXBlIG9mIGxpY2Vuc2UuIFRoZSByZXF1aXJlbWVudCBmb3IgZm9udHMgdG8gcmVtYWluIHVuZGVyIHRoaXMgbGljZW5zZSBkb2VzIG5vdCBhcHBseSB0byBhbnkgZG9jdW1lbnQgY3JlYXRlZCB1c2luZyB0aGUgZm9udHMgb3IgdGhlaXIgZGVyaXZhdGl2ZXMuDQoNCkRFRklOSVRJT05TDQoiRm9udCBTb2Z0d2FyZSIgcmVmZXJzIHRvIHRoZSBzZXQgb2YgZmlsZXMgcmVsZWFzZWQgYnkgdGhlIENvcHlyaWdodCBIb2xkZXIocykgdW5kZXIgdGhpcyBsaWNlbnNlIGFuZCBjbGVhcmx5IG1hcmtlZCBhcyBzdWNoLiBUaGlzIG1heSBpbmNsdWRlIHNvdXJjZSBmaWxlcywgYnVpbGQgc2NyaXB0cyBhbmQgZG9jdW1lbnRhdGlvbi4NCg0KIlJlc2VydmVkIEZvbnQgTmFtZSIgcmVmZXJzIHRvIGFueSBuYW1lcyBzcGVjaWZpZWQgYXMgc3VjaCBhZnRlciB0aGUgY29weXJpZ2h0IHN0YXRlbWVudChzKS4NCg0KIk9yaWdpbmFsIFZlcnNpb24iIHJlZmVycyB0byB0aGUgY29sbGVjdGlvbiBvZiBGb250IFNvZnR3YXJlIGNvbXBvbmVudHMgYXMgZGlzdHJpYnV0ZWQgYnkgdGhlIENvcHlyaWdodCBIb2xkZXIocykuDQoNCiJNb2RpZmllZCBWZXJzaW9uIiByZWZlcnMgdG8gYW55IGRlcml2YXRpdmUgbWFkZSBieSBhZGRpbmcgdG8sIGRlbGV0aW5nLCBvciBzdWJzdGl0dXRpbmcgLS0gaW4gcGFydCBvciBpbiB3aG9sZSAtLSBhbnkgb2YgdGhlIGNvbXBvbmVudHMgb2YgdGhlIE9yaWdpbmFsIFZlcnNpb24sIGJ5IGNoYW5naW5nIGZvcm1hdHMgb3IgYnkgcG9ydGluZyB0aGUgRm9udCBTb2Z0d2FyZSB0byBhIG5ldyBlbnZpcm9ubWVudC4NCg0KIkF1dGhvciIgcmVmZXJzIHRvIGFueSBkZXNpZ25lciwgZW5naW5lZXIsIHByb2dyYW1tZXIsIHRlY2huaWNhbCB3cml0ZXIgb3Igb3RoZXIgcGVyc29uIHdobyBjb250cmlidXRlZCB0byB0aGUgRm9udCBTb2Z0d2FyZS4NCg0KUEVSTUlTU0lPTiAmIENPTkRJVElPTlMNClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhlIEZvbnQgU29mdHdhcmUsIHRvIHVzZSwgc3R1ZHksIGNvcHksIG1lcmdlLCBlbWJlZCwgbW9kaWZ5LCByZWRpc3RyaWJ1dGUsIGFuZCBzZWxsIG1vZGlmaWVkIGFuZCB1bm1vZGlmaWVkIGNvcGllcyBvZiB0aGUgRm9udCBTb2Z0d2FyZSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6DQoNCjEpIE5laXRoZXIgdGhlIEZvbnQgU29mdHdhcmUgbm9yIGFueSBvZiBpdHMgaW5kaXZpZHVhbCBjb21wb25lbnRzLCBpbiBPcmlnaW5hbCBvciBNb2RpZmllZCBWZXJzaW9ucywgbWF5IGJlIHNvbGQgYnkgaXRzZWxmLg0KDQoyKSBPcmlnaW5hbCBvciBNb2RpZmllZCBWZXJzaW9ucyBvZiB0aGUgRm9udCBTb2Z0d2FyZSBtYXkgYmUgYnVuZGxlZCwgcmVkaXN0cmlidXRlZCBhbmQvb3Igc29sZCB3aXRoIGFueSBzb2Z0d2FyZSwgcHJvdmlkZWQgdGhhdCBlYWNoIGNvcHkgY29udGFpbnMgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgbGljZW5zZS4gVGhlc2UgY2FuIGJlIGluY2x1ZGVkIGVpdGhlciBhcyBzdGFuZC1hbG9uZSB0ZXh0IGZpbGVzLCBodW1hbi1yZWFkYWJsZSBoZWFkZXJzIG9yIGluIHRoZSBhcHByb3ByaWF0ZSBtYWNoaW5lLXJlYWRhYmxlIG1ldGFkYXRhIGZpZWxkcyB3aXRoaW4gdGV4dCBvciBiaW5hcnkgZmlsZXMgYXMgbG9uZyBhcyB0aG9zZSBmaWVsZHMgY2FuIGJlIGVhc2lseSB2aWV3ZWQgYnkgdGhlIHVzZXIuDQoNCjMpIE5vIE1vZGlmaWVkIFZlcnNpb24gb2YgdGhlIEZvbnQgU29mdHdhcmUgbWF5IHVzZSB0aGUgUmVzZXJ2ZWQgRm9udCBOYW1lKHMpIHVubGVzcyBleHBsaWNpdCB3cml0dGVuIHBlcm1pc3Npb24gaXMgZ3JhbnRlZCBieSB0aGUgY29ycmVzcG9uZGluZyBDb3B5cmlnaHQgSG9sZGVyLiBUaGlzIHJlc3RyaWN0aW9uIG9ubHkgYXBwbGllcyB0byB0aGUgcHJpbWFyeSBmb250IG5hbWUgYXMgcHJlc2VudGVkIHRvIHRoZSB1c2Vycy4NCg0KNCkgVGhlIG5hbWUocykgb2YgdGhlIENvcHlyaWdodCBIb2xkZXIocykgb3IgdGhlIEF1dGhvcihzKSBvZiB0aGUgRm9udCBTb2Z0d2FyZSBzaGFsbCBub3QgYmUgdXNlZCB0byBwcm9tb3RlLCBlbmRvcnNlIG9yIGFkdmVydGlzZSBhbnkgTW9kaWZpZWQgVmVyc2lvbiwgZXhjZXB0IHRvIGFja25vd2xlZGdlIHRoZSBjb250cmlidXRpb24ocykgb2YgdGhlIENvcHlyaWdodCBIb2xkZXIocykgYW5kIHRoZSBBdXRob3Iocykgb3Igd2l0aCB0aGVpciBleHBsaWNpdCB3cml0dGVuIHBlcm1pc3Npb24uDQoNCjUpIFRoZSBGb250IFNvZnR3YXJlLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkLCBpbiBwYXJ0IG9yIGluIHdob2xlLCBtdXN0IGJlIGRpc3RyaWJ1dGVkIGVudGlyZWx5IHVuZGVyIHRoaXMgbGljZW5zZSwgYW5kIG11c3Qgbm90IGJlIGRpc3RyaWJ1dGVkIHVuZGVyIGFueSBvdGhlciBsaWNlbnNlLiBUaGUgcmVxdWlyZW1lbnQgZm9yIGZvbnRzIHRvIHJlbWFpbiB1bmRlciB0aGlzIGxpY2Vuc2UgZG9lcyBub3QgYXBwbHkgdG8gYW55IGRvY3VtZW50IGNyZWF0ZWQgdXNpbmcgdGhlIEZvbnQgU29mdHdhcmUuDQoNClRFUk1JTkFUSU9ODQpUaGlzIGxpY2Vuc2UgYmVjb21lcyBudWxsIGFuZCB2b2lkIGlmIGFueSBvZiB0aGUgYWJvdmUgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4NCg0KRElTQ0xBSU1FUg0KVEhFIEZPTlQgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIEFOWSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVCBPRiBDT1BZUklHSFQsIFBBVEVOVCwgVFJBREVNQVJLLCBPUiBPVEhFUiBSSUdIVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBJTkNMVURJTkcgQU5ZIEdFTkVSQUwsIFNQRUNJQUwsIElORElSRUNULCBJTkNJREVOVEFMLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgVEhFIFVTRSBPUiBJTkFCSUxJVFkgVE8gVVNFIFRIRSBGT05UIFNPRlRXQVJFIE9SIEZST00gT1RIRVIgREVBTElOR1MgSU4gVEhFIEZPTlQgU09GVFdBUkUuAEMAbwBwAHkAcgBpAGcAaAB0ACAAKABjACkAIAAyADAAMQA2ACAARgByAC4AIABNAGEAdAB0AGgAZQB3ACAAUwBwAGUAbgBjAGUAcgAsACAATwAuAFMALgBKAC4AUgBlAGcAdQBsAGEAcgBFAHgAcwB1AHIAZwBlACAAQwBoAGEAcgBhAGMAdABlAHIAcwA6AFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwAFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwACAARgBlAGIAcgB1AGEAcgB5ACAAMQA4ACwAIAAyADAAMQA2ACwAIABpAG4AaQB0AGkAYQBsACAAcgBlAGwAZQBhAHMAZQBFAHgAcwB1AHIAZwBlAEMAaABhAHIAYQBjAHQAZQByAHMAVABoAGkAcwAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABpAHMAIABsAGkAYwBlAG4AcwBlAGQAIAB1AG4AZABlAHIAIAB0AGgAZQAgAFMASQBMACAATwBwAGUAbgAgAEYAbwBuAHQAIABMAGkAYwBlAG4AcwBlACwAIABWAGUAcgBzAGkAbwBuACAAMQAuADEALgAgAFQAaABpAHMAIABsAGkAYwBlAG4AcwBlACAAaQBzACAAYwBvAHAAaQBlAGQAIABiAGUAbABvAHcALAAgAGEAbgBkACAAaQBzACAAYQBsAHMAbwAgAGEAdgBhAGkAbABhAGIAbABlACAAdwBpAHQAaAAgAGEAIABGAEEAUQAgAGEAdAA6ACAAaAB0AHQAcAA6AC8ALwBzAGMAcgBpAHAAdABzAC4AcwBpAGwALgBvAHIAZwAvAE8ARgBMAA0ACgANAAoADQAKAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQANAAoAUwBJAEwAIABPAFAARQBOACAARgBPAE4AVAAgAEwASQBDAEUATgBTAEUAIABWAGUAcgBzAGkAbwBuACAAMQAuADEAIAAtACAAMgA2ACAARgBlAGIAcgB1AGEAcgB5ACAAMgAwADAANwANAAoALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAA0ACgANAAoAUABSAEUAQQBNAEIATABFAA0ACgBUAGgAZQAgAGcAbwBhAGwAcwAgAG8AZgAgAHQAaABlACAATwBwAGUAbgAgAEYAbwBuAHQAIABMAGkAYwBlAG4AcwBlACAAKABPAEYATAApACAAYQByAGUAIAB0AG8AIABzAHQAaQBtAHUAbABhAHQAZQAgAHcAbwByAGwAZAB3AGkAZABlACAAZABlAHYAZQBsAG8AcABtAGUAbgB0ACAAbwBmACAAYwBvAGwAbABhAGIAbwByAGEAdABpAHYAZQAgAGYAbwBuAHQAIABwAHIAbwBqAGUAYwB0AHMALAAgAHQAbwAgAHMAdQBwAHAAbwByAHQAIAB0AGgAZQAgAGYAbwBuAHQAIABjAHIAZQBhAHQAaQBvAG4AIABlAGYAZgBvAHIAdABzACAAbwBmACAAYQBjAGEAZABlAG0AaQBjACAAYQBuAGQAIABsAGkAbgBnAHUAaQBzAHQAaQBjACAAYwBvAG0AbQB1AG4AaQB0AGkAZQBzACwAIABhAG4AZAAgAHQAbwAgAHAAcgBvAHYAaQBkAGUAIABhACAAZgByAGUAZQAgAGEAbgBkACAAbwBwAGUAbgAgAGYAcgBhAG0AZQB3AG8AcgBrACAAaQBuACAAdwBoAGkAYwBoACAAZgBvAG4AdABzACAAbQBhAHkAIABiAGUAIABzAGgAYQByAGUAZAAgAGEAbgBkACAAaQBtAHAAcgBvAHYAZQBkACAAaQBuACAAcABhAHIAdABuAGUAcgBzAGgAaQBwACAAdwBpAHQAaAAgAG8AdABoAGUAcgBzAC4ADQAKAA0ACgBUAGgAZQAgAE8ARgBMACAAYQBsAGwAbwB3AHMAIAB0AGgAZQAgAGwAaQBjAGUAbgBzAGUAZAAgAGYAbwBuAHQAcwAgAHQAbwAgAGIAZQAgAHUAcwBlAGQALAAgAHMAdAB1AGQAaQBlAGQALAAgAG0AbwBkAGkAZgBpAGUAZAAgAGEAbgBkACAAcgBlAGQAaQBzAHQAcgBpAGIAdQB0AGUAZAAgAGYAcgBlAGUAbAB5ACAAYQBzACAAbABvAG4AZwAgAGEAcwAgAHQAaABlAHkAIABhAHIAZQAgAG4AbwB0ACAAcwBvAGwAZAAgAGIAeQAgAHQAaABlAG0AcwBlAGwAdgBlAHMALgAgAFQAaABlACAAZgBvAG4AdABzACwAIABpAG4AYwBsAHUAZABpAG4AZwAgAGEAbgB5ACAAZABlAHIAaQB2AGEAdABpAHYAZQAgAHcAbwByAGsAcwAsACAAYwBhAG4AIABiAGUAIABiAHUAbgBkAGwAZQBkACwAIABlAG0AYgBlAGQAZABlAGQALAAgAHIAZQBkAGkAcwB0AHIAaQBiAHUAdABlAGQAIABhAG4AZAAvAG8AcgAgAHMAbwBsAGQAIAB3AGkAdABoACAAYQBuAHkAIABzAG8AZgB0AHcAYQByAGUAIABwAHIAbwB2AGkAZABlAGQAIAB0AGgAYQB0ACAAYQBuAHkAIAByAGUAcwBlAHIAdgBlAGQAIABuAGEAbQBlAHMAIABhAHIAZQAgAG4AbwB0ACAAdQBzAGUAZAAgAGIAeQAgAGQAZQByAGkAdgBhAHQAaQB2AGUAIAB3AG8AcgBrAHMALgAgAFQAaABlACAAZgBvAG4AdABzACAAYQBuAGQAIABkAGUAcgBpAHYAYQB0AGkAdgBlAHMALAAgAGgAbwB3AGUAdgBlAHIALAAgAGMAYQBuAG4AbwB0ACAAYgBlACAAcgBlAGwAZQBhAHMAZQBkACAAdQBuAGQAZQByACAAYQBuAHkAIABvAHQAaABlAHIAIAB0AHkAcABlACAAbwBmACAAbABpAGMAZQBuAHMAZQAuACAAVABoAGUAIAByAGUAcQB1AGkAcgBlAG0AZQBuAHQAIABmAG8AcgAgAGYAbwBuAHQAcwAgAHQAbwAgAHIAZQBtAGEAaQBuACAAdQBuAGQAZQByACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUAIABkAG8AZQBzACAAbgBvAHQAIABhAHAAcABsAHkAIAB0AG8AIABhAG4AeQAgAGQAbwBjAHUAbQBlAG4AdAAgAGMAcgBlAGEAdABlAGQAIAB1AHMAaQBuAGcAIAB0AGgAZQAgAGYAbwBuAHQAcwAgAG8AcgAgAHQAaABlAGkAcgAgAGQAZQByAGkAdgBhAHQAaQB2AGUAcwAuAA0ACgANAAoARABFAEYASQBOAEkAVABJAE8ATgBTAA0ACgAiAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAdABoAGUAIABzAGUAdAAgAG8AZgAgAGYAaQBsAGUAcwAgAHIAZQBsAGUAYQBzAGUAZAAgAGIAeQAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAHUAbgBkAGUAcgAgAHQAaABpAHMAIABsAGkAYwBlAG4AcwBlACAAYQBuAGQAIABjAGwAZQBhAHIAbAB5ACAAbQBhAHIAawBlAGQAIABhAHMAIABzAHUAYwBoAC4AIABUAGgAaQBzACAAbQBhAHkAIABpAG4AYwBsAHUAZABlACAAcwBvAHUAcgBjAGUAIABmAGkAbABlAHMALAAgAGIAdQBpAGwAZAAgAHMAYwByAGkAcAB0AHMAIABhAG4AZAAgAGQAbwBjAHUAbQBlAG4AdABhAHQAaQBvAG4ALgANAAoADQAKACIAUgBlAHMAZQByAHYAZQBkACAARgBvAG4AdAAgAE4AYQBtAGUAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAYQBuAHkAIABuAGEAbQBlAHMAIABzAHAAZQBjAGkAZgBpAGUAZAAgAGEAcwAgAHMAdQBjAGgAIABhAGYAdABlAHIAIAB0AGgAZQAgAGMAbwBwAHkAcgBpAGcAaAB0ACAAcwB0AGEAdABlAG0AZQBuAHQAKABzACkALgANAAoADQAKACIATwByAGkAZwBpAG4AYQBsACAAVgBlAHIAcwBpAG8AbgAiACAAcgBlAGYAZQByAHMAIAB0AG8AIAB0AGgAZQAgAGMAbwBsAGwAZQBjAHQAaQBvAG4AIABvAGYAIABGAG8AbgB0ACAAUwBvAGYAdAB3AGEAcgBlACAAYwBvAG0AcABvAG4AZQBuAHQAcwAgAGEAcwAgAGQAaQBzAHQAcgBpAGIAdQB0AGUAZAAgAGIAeQAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAuAA0ACgANAAoAIgBNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuACIAIAByAGUAZgBlAHIAcwAgAHQAbwAgAGEAbgB5ACAAZABlAHIAaQB2AGEAdABpAHYAZQAgAG0AYQBkAGUAIABiAHkAIABhAGQAZABpAG4AZwAgAHQAbwAsACAAZABlAGwAZQB0AGkAbgBnACwAIABvAHIAIABzAHUAYgBzAHQAaQB0AHUAdABpAG4AZwAgAC0ALQAgAGkAbgAgAHAAYQByAHQAIABvAHIAIABpAG4AIAB3AGgAbwBsAGUAIAAtAC0AIABhAG4AeQAgAG8AZgAgAHQAaABlACAAYwBvAG0AcABvAG4AZQBuAHQAcwAgAG8AZgAgAHQAaABlACAATwByAGkAZwBpAG4AYQBsACAAVgBlAHIAcwBpAG8AbgAsACAAYgB5ACAAYwBoAGEAbgBnAGkAbgBnACAAZgBvAHIAbQBhAHQAcwAgAG8AcgAgAGIAeQAgAHAAbwByAHQAaQBuAGcAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIAB0AG8AIABhACAAbgBlAHcAIABlAG4AdgBpAHIAbwBuAG0AZQBuAHQALgANAAoADQAKACIAQQB1AHQAaABvAHIAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAYQBuAHkAIABkAGUAcwBpAGcAbgBlAHIALAAgAGUAbgBnAGkAbgBlAGUAcgAsACAAcAByAG8AZwByAGEAbQBtAGUAcgAsACAAdABlAGMAaABuAGkAYwBhAGwAIAB3AHIAaQB0AGUAcgAgAG8AcgAgAG8AdABoAGUAcgAgAHAAZQByAHMAbwBuACAAdwBoAG8AIABjAG8AbgB0AHIAaQBiAHUAdABlAGQAIAB0AG8AIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUALgANAAoADQAKAFAARQBSAE0ASQBTAFMASQBPAE4AIAAmACAAQwBPAE4ARABJAFQASQBPAE4AUwANAAoAUABlAHIAbQBpAHMAcwBpAG8AbgAgAGkAcwAgAGgAZQByAGUAYgB5ACAAZwByAGEAbgB0AGUAZAAsACAAZgByAGUAZQAgAG8AZgAgAGMAaABhAHIAZwBlACwAIAB0AG8AIABhAG4AeQAgAHAAZQByAHMAbwBuACAAbwBiAHQAYQBpAG4AaQBuAGcAIABhACAAYwBvAHAAeQAgAG8AZgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAsACAAdABvACAAdQBzAGUALAAgAHMAdAB1AGQAeQAsACAAYwBvAHAAeQAsACAAbQBlAHIAZwBlACwAIABlAG0AYgBlAGQALAAgAG0AbwBkAGkAZgB5ACwAIAByAGUAZABpAHMAdAByAGkAYgB1AHQAZQAsACAAYQBuAGQAIABzAGUAbABsACAAbQBvAGQAaQBmAGkAZQBkACAAYQBuAGQAIAB1AG4AbQBvAGQAaQBmAGkAZQBkACAAYwBvAHAAaQBlAHMAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUALAAgAHMAdQBiAGoAZQBjAHQAIAB0AG8AIAB0AGgAZQAgAGYAbwBsAGwAbwB3AGkAbgBnACAAYwBvAG4AZABpAHQAaQBvAG4AcwA6AA0ACgANAAoAMQApACAATgBlAGkAdABoAGUAcgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAgAG4AbwByACAAYQBuAHkAIABvAGYAIABpAHQAcwAgAGkAbgBkAGkAdgBpAGQAdQBhAGwAIABjAG8AbQBwAG8AbgBlAG4AdABzACwAIABpAG4AIABPAHIAaQBnAGkAbgBhAGwAIABvAHIAIABNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuAHMALAAgAG0AYQB5ACAAYgBlACAAcwBvAGwAZAAgAGIAeQAgAGkAdABzAGUAbABmAC4ADQAKAA0ACgAyACkAIABPAHIAaQBnAGkAbgBhAGwAIABvAHIAIABNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuAHMAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABtAGEAeQAgAGIAZQAgAGIAdQBuAGQAbABlAGQALAAgAHIAZQBkAGkAcwB0AHIAaQBiAHUAdABlAGQAIABhAG4AZAAvAG8AcgAgAHMAbwBsAGQAIAB3AGkAdABoACAAYQBuAHkAIABzAG8AZgB0AHcAYQByAGUALAAgAHAAcgBvAHYAaQBkAGUAZAAgAHQAaABhAHQAIABlAGEAYwBoACAAYwBvAHAAeQAgAGMAbwBuAHQAYQBpAG4AcwAgAHQAaABlACAAYQBiAG8AdgBlACAAYwBvAHAAeQByAGkAZwBoAHQAIABuAG8AdABpAGMAZQAgAGEAbgBkACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUALgAgAFQAaABlAHMAZQAgAGMAYQBuACAAYgBlACAAaQBuAGMAbAB1AGQAZQBkACAAZQBpAHQAaABlAHIAIABhAHMAIABzAHQAYQBuAGQALQBhAGwAbwBuAGUAIAB0AGUAeAB0ACAAZgBpAGwAZQBzACwAIABoAHUAbQBhAG4ALQByAGUAYQBkAGEAYgBsAGUAIABoAGUAYQBkAGUAcgBzACAAbwByACAAaQBuACAAdABoAGUAIABhAHAAcAByAG8AcAByAGkAYQB0AGUAIABtAGEAYwBoAGkAbgBlAC0AcgBlAGEAZABhAGIAbABlACAAbQBlAHQAYQBkAGEAdABhACAAZgBpAGUAbABkAHMAIAB3AGkAdABoAGkAbgAgAHQAZQB4AHQAIABvAHIAIABiAGkAbgBhAHIAeQAgAGYAaQBsAGUAcwAgAGEAcwAgAGwAbwBuAGcAIABhAHMAIAB0AGgAbwBzAGUAIABmAGkAZQBsAGQAcwAgAGMAYQBuACAAYgBlACAAZQBhAHMAaQBsAHkAIAB2AGkAZQB3AGUAZAAgAGIAeQAgAHQAaABlACAAdQBzAGUAcgAuAA0ACgANAAoAMwApACAATgBvACAATQBvAGQAaQBmAGkAZQBkACAAVgBlAHIAcwBpAG8AbgAgAG8AZgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAgAG0AYQB5ACAAdQBzAGUAIAB0AGgAZQAgAFIAZQBzAGUAcgB2AGUAZAAgAEYAbwBuAHQAIABOAGEAbQBlACgAcwApACAAdQBuAGwAZQBzAHMAIABlAHgAcABsAGkAYwBpAHQAIAB3AHIAaQB0AHQAZQBuACAAcABlAHIAbQBpAHMAcwBpAG8AbgAgAGkAcwAgAGcAcgBhAG4AdABlAGQAIABiAHkAIAB0AGgAZQAgAGMAbwByAHIAZQBzAHAAbwBuAGQAaQBuAGcAIABDAG8AcAB5AHIAaQBnAGgAdAAgAEgAbwBsAGQAZQByAC4AIABUAGgAaQBzACAAcgBlAHMAdAByAGkAYwB0AGkAbwBuACAAbwBuAGwAeQAgAGEAcABwAGwAaQBlAHMAIAB0AG8AIAB0AGgAZQAgAHAAcgBpAG0AYQByAHkAIABmAG8AbgB0ACAAbgBhAG0AZQAgAGEAcwAgAHAAcgBlAHMAZQBuAHQAZQBkACAAdABvACAAdABoAGUAIAB1AHMAZQByAHMALgANAAoADQAKADQAKQAgAFQAaABlACAAbgBhAG0AZQAoAHMAKQAgAG8AZgAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAG8AcgAgAHQAaABlACAAQQB1AHQAaABvAHIAKABzACkAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABzAGgAYQBsAGwAIABuAG8AdAAgAGIAZQAgAHUAcwBlAGQAIAB0AG8AIABwAHIAbwBtAG8AdABlACwAIABlAG4AZABvAHIAcwBlACAAbwByACAAYQBkAHYAZQByAHQAaQBzAGUAIABhAG4AeQAgAE0AbwBkAGkAZgBpAGUAZAAgAFYAZQByAHMAaQBvAG4ALAAgAGUAeABjAGUAcAB0ACAAdABvACAAYQBjAGsAbgBvAHcAbABlAGQAZwBlACAAdABoAGUAIABjAG8AbgB0AHIAaQBiAHUAdABpAG8AbgAoAHMAKQAgAG8AZgAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAGEAbgBkACAAdABoAGUAIABBAHUAdABoAG8AcgAoAHMAKQAgAG8AcgAgAHcAaQB0AGgAIAB0AGgAZQBpAHIAIABlAHgAcABsAGkAYwBpAHQAIAB3AHIAaQB0AHQAZQBuACAAcABlAHIAbQBpAHMAcwBpAG8AbgAuAA0ACgANAAoANQApACAAVABoAGUAIABGAG8AbgB0ACAAUwBvAGYAdAB3AGEAcgBlACwAIABtAG8AZABpAGYAaQBlAGQAIABvAHIAIAB1AG4AbQBvAGQAaQBmAGkAZQBkACwAIABpAG4AIABwAGEAcgB0ACAAbwByACAAaQBuACAAdwBoAG8AbABlACwAIABtAHUAcwB0ACAAYgBlACAAZABpAHMAdAByAGkAYgB1AHQAZQBkACAAZQBuAHQAaQByAGUAbAB5ACAAdQBuAGQAZQByACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUALAAgAGEAbgBkACAAbQB1AHMAdAAgAG4AbwB0ACAAYgBlACAAZABpAHMAdAByAGkAYgB1AHQAZQBkACAAdQBuAGQAZQByACAAYQBuAHkAIABvAHQAaABlAHIAIABsAGkAYwBlAG4AcwBlAC4AIABUAGgAZQAgAHIAZQBxAHUAaQByAGUAbQBlAG4AdAAgAGYAbwByACAAZgBvAG4AdABzACAAdABvACAAcgBlAG0AYQBpAG4AIAB1AG4AZABlAHIAIAB0AGgAaQBzACAAbABpAGMAZQBuAHMAZQAgAGQAbwBlAHMAIABuAG8AdAAgAGEAcABwAGwAeQAgAHQAbwAgAGEAbgB5ACAAZABvAGMAdQBtAGUAbgB0ACAAYwByAGUAYQB0AGUAZAAgAHUAcwBpAG4AZwAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAuAA0ACgANAAoAVABFAFIATQBJAE4AQQBUAEkATwBOAA0ACgBUAGgAaQBzACAAbABpAGMAZQBuAHMAZQAgAGIAZQBjAG8AbQBlAHMAIABuAHUAbABsACAAYQBuAGQAIAB2AG8AaQBkACAAaQBmACAAYQBuAHkAIABvAGYAIAB0AGgAZQAgAGEAYgBvAHYAZQAgAGMAbwBuAGQAaQB0AGkAbwBuAHMAIABhAHIAZQAgAG4AbwB0ACAAbQBlAHQALgANAAoADQAKAEQASQBTAEMATABBAEkATQBFAFIADQAKAFQASABFACAARgBPAE4AVAAgAFMATwBGAFQAVwBBAFIARQAgAEkAUwAgAFAAUgBPAFYASQBEAEUARAAgACIAQQBTACAASQBTACIALAAgAFcASQBUAEgATwBVAFQAIABXAEEAUgBSAEEATgBUAFkAIABPAEYAIABBAE4AWQAgAEsASQBOAEQALAAgAEUAWABQAFIARQBTAFMAIABPAFIAIABJAE0AUABMAEkARQBEACwAIABJAE4AQwBMAFUARABJAE4ARwAgAEIAVQBUACAATgBPAFQAIABMAEkATQBJAFQARQBEACAAVABPACAAQQBOAFkAIABXAEEAUgBSAEEATgBUAEkARQBTACAATwBGACAATQBFAFIAQwBIAEEATgBUAEEAQgBJAEwASQBUAFkALAAgAEYASQBUAE4ARQBTAFMAIABGAE8AUgAgAEEAIABQAEEAUgBUAEkAQwBVAEwAQQBSACAAUABVAFIAUABPAFMARQAgAEEATgBEACAATgBPAE4ASQBOAEYAUgBJAE4ARwBFAE0ARQBOAFQAIABPAEYAIABDAE8AUABZAFIASQBHAEgAVAAsACAAUABBAFQARQBOAFQALAAgAFQAUgBBAEQARQBNAEEAUgBLACwAIABPAFIAIABPAFQASABFAFIAIABSAEkARwBIAFQALgAgAEkATgAgAE4ATwAgAEUAVgBFAE4AVAAgAFMASABBAEwATAAgAFQASABFACAAQwBPAFAAWQBSAEkARwBIAFQAIABIAE8ATABEAEUAUgAgAEIARQAgAEwASQBBAEIATABFACAARgBPAFIAIABBAE4AWQAgAEMATABBAEkATQAsACAARABBAE0AQQBHAEUAUwAgAE8AUgAgAE8AVABIAEUAUgAgAEwASQBBAEIASQBMAEkAVABZACwAIABJAE4AQwBMAFUARABJAE4ARwAgAEEATgBZACAARwBFAE4ARQBSAEEATAAsACAAUwBQAEUAQwBJAEEATAAsACAASQBOAEQASQBSAEUAQwBUACwAIABJAE4AQwBJAEQARQBOAFQAQQBMACwAIABPAFIAIABDAE8ATgBTAEUAUQBVAEUATgBUAEkAQQBMACAARABBAE0AQQBHAEUAUwAsACAAVwBIAEUAVABIAEUAUgAgAEkATgAgAEEATgAgAEEAQwBUAEkATwBOACAATwBGACAAQwBPAE4AVABSAEEAQwBUACwAIABUAE8AUgBUACAATwBSACAATwBUAEgARQBSAFcASQBTAEUALAAgAEEAUgBJAFMASQBOAEcAIABGAFIATwBNACwAIABPAFUAVAAgAE8ARgAgAFQASABFACAAVQBTAEUAIABPAFIAIABJAE4AQQBCAEkATABJAFQAWQAgAFQATwAgAFUAUwBFACAAVABIAEUAIABGAE8ATgBUACAAUwBPAEYAVABXAEEAUgBFACAATwBSACAARgBSAE8ATQAgAE8AVABIAEUAUgAgAEQARQBBAEwASQBOAEcAUwAgAEkATgAgAFQASABFACAARgBPAE4AVAAgAFMATwBGAFQAVwBBAFIARQAuAAAAAgAAAAAAAP8GAGQAAAAAAAAAAAAAAAAAAAAAAAAAAABfAAMABAAFAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAQwBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQAAAAMACAACABAAAf//AAIAAAABAAAAAAABAAAADgAAAAAAAAAAAAIAAQAAAF4AAQABAAAACgBKAGQAAmN5cmwADmxhdG4AGAAEAAAAAP//AAAAEAACSVBBIAAaVklUIAAiAAD//wACAAEAAAAA//8AAQABAAD//wAAAAJrZXJuAA5tYXJrABQAAAABAAEAAAABAAAAAgAGAA4ABAAEAAEAEAACAAAAAQAsAAEADAAQAAAAIAAiAAIAAAABAAYAIQAyADYAQQBSAFYAAAAGAAEAjgAEAAAABgAWADAASgBkAHIAgAAGAA7/nAAhADYAQQA2ADIADQA2//IAUgAXAAYADv+cACEAWABBAFgAMgChADYAvQBSAE8ABgAO/nAAIf6TAEH+kwAy//kANgAOAFL/YQADAA7/nABSABcAVv/VAAMADv+cAFIANgBWAEwAAwAO/nAAUgAJAFYAGQABAAYAIQAyADYAQQBSAFYAAQAAAAoATgBoAAJjeXJsAA5sYXRuABoABAAAAAD//wABAAAAEAACSVBBIAAaVklUIAAiAAD//wACAAAAAQAA//8AAQAAAAD//wABAAAAAmFhbHQADnNtY3AAFAAAAAEAAAAAAAEAAAABAAQAAwAAAAEACAABABgAAwAMABAAFAABAEEAAQBSAAEAVgABAAMAIQAyADYAAA==\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url-loader?limit=30000!./assets/fonts/ExsurgeChar.otf\n ** module id = 5\n ** module chunks = 0\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from './Exsurge.Core'\nimport { Step, Pitch, Rect, Point, Margins } from './Exsurge.Core'\nimport { ctxt, QuickSvg, ChantLayoutElement, ChantNotationElement, GlyphCode, GlyphVisualizer, Lyric, Annotation, DropCap } from './Exsurge.Drawing'\nimport { Glyphs } from './Exsurge.Glyphs'\nimport { Custod, AccidentalType } from './Exsurge.Chant.Signs'\nimport { Gabc } from './Exsurge.Gabc'\n\n\nexport var LiquescentType = {\n  None: 0,\n\n  // flags that can be combined, though of course it\n  // it doesn't make sense to combine some!\n  Large: 1 << 0,\n  Small: 1 << 1,\n  Ascending: 1 << 2,\n  Descending: 1 << 3,\n  InitioDebilis: 1 << 4,\n\n  // handy liquescent types\n  LargeAscending: 1 << 0 | 1 << 2,\n  LargeDescending: 1 << 0 | 1 << 3,\n  SmallAscending: 1 << 1 | 1 << 2,\n  SmallDescending: 1 << 1 | 1 << 3\n};\n\nexport var NoteShape = {\n  // shapes\n  Default:    0,\n  Virga:      1,\n  Inclinatum: 2,\n  Quilisma:   3,\n  Stropha:    4,\n  Oriscus:    5\n};\n\nexport var NoteShapeModifiers = {\n\n  // flags which modify the shape\n  // not all of them apply to every shape of course\n  None:       0,\n  Ascending:  1 << 0,\n  Descending: 1 << 1,\n  Cavum:      1 << 2,\n  Stemmed:    1 << 3\n};\n\n/**\n * @class\n */\nexport class Note extends ChantLayoutElement {\n\n  /**\n   * @para {Pitch} pitch\n   */\n  constructor(pitch) {\n    super();\n\n    if (typeof pitch !== 'undefined')\n      this.pitch = pitch;\n    else\n      this.pitch = null;\n\n    this.glyphVisualizer = null;\n\n    // The staffPosition on a note is an integer that indicates the vertical position on the staff.\n    // 0 is the center space on the staff (equivalent to gabc 'g'). Positive numbers go up\n    // the staff, and negative numbers go down, i.e., 1 is gabc 'h', 2 is gabc 'i', -1 is gabc 'f', etc.\n    this.staffPosition = 0;\n    this.liquescent = LiquescentType.None;\n    this.shape = NoteShape.Default;\n    this.shapeModifiers = NoteShapeModifiers.None;\n    this.markings = [];\n  }\n\n  setGlyph(ctxt, glyphCode) {\n    if (this.glyphVisualizer)\n      this.glyphVisualizer.setGlyph(ctxt, glyphCode);\n    else\n      this.glyphVisualizer = new GlyphVisualizer(ctxt, glyphCode);\n\n    this.glyphVisualizer.setStaffPosition(ctxt, this.staffPosition);\n\n    // assign glyphvisualizer metrics to this note\n    this.bounds.x = this.glyphVisualizer.bounds.x;\n    this.bounds.y = this.glyphVisualizer.bounds.y;\n    this.bounds.width = this.glyphVisualizer.bounds.width;\n    this.bounds.height = this.glyphVisualizer.bounds.height;\n\n    this.origin.x = this.glyphVisualizer.origin.x;\n    this.origin.y = this.glyphVisualizer.origin.y;\n  }\n\n  // a utility function for modifiers\n  shapeModifierMatches(shapeModifier) {\n    if (shapeModifier === NoteShapeModifiers.None)\n      return this.shapeModifier === NoteShapeModifiers.None;\n    else\n      return this.shapeModifier & shapeModifier !== 0;\n  }\n\n  draw(ctxt) {\n\n    this.glyphVisualizer.bounds.x = this.bounds.x;\n    this.glyphVisualizer.bounds.y = this.bounds.y;\n\n    this.glyphVisualizer.draw(ctxt);\n  }\n\n  createDrawable(ctxt) {\n\n    this.glyphVisualizer.bounds.x = this.bounds.x;\n    this.glyphVisualizer.bounds.y = this.bounds.y;\n    return this.glyphVisualizer.createDrawable(ctxt);\n  }\n}\n\nexport class Clef extends ChantNotationElement {\n\n  constructor(staffPosition, octave, defaultAccidental = null) {\n    super();\n\n    this.isClef = true;\n    this.staffPosition = staffPosition;\n    this.octave = octave;\n    this.defaultAccidental = defaultAccidental;\n    this.activeAccidental = defaultAccidental;\n  }\n\n  resetAccidentals() {\n    this.activeAccidental = this.defaultAccidental;\n  }\n\n  pitchToStaffPosition(pitch) {\n\n  }\n\n  performLayout(ctxt) {\n    ctxt.activeClef = this;\n\n    if (this.defaultAccidental)\n      this.defaultAccidental.performLayout(ctxt);\n\n    super.performLayout(ctxt);\n  }\n\n  finishLayout(ctxt) {\n\n    // if we have a default accidental, then add a glyph for it now\n    if (this.defaultAccidental) {\n      var accidentalGlyph = this.defaultAccidental.createGlyphVisualizer(ctxt);\n      accidentalGlyph.bounds.x += this.visualizers[0].bounds.right() + ctxt.intraNeumeSpacing;\n      this.addVisualizer(accidentalGlyph);\n    }\n\n    super.finishLayout(ctxt);\n  }\n}\n\nexport class DoClef extends Clef {\n\n  constructor(staffPosition, octave, defaultAccidental = null) {\n    super(staffPosition, octave, defaultAccidental);\n\n    this.leadingSpace = 0.0;\n  }\n\n  pitchToStaffPosition(pitch) {\n    return (pitch.octave - this.octave) * 7 + this.staffPosition +\n            Pitch.stepToStaffOffset(pitch.step) -\n            Pitch.stepToStaffOffset(Step.Do);\n  }\n\n  staffPositionToPitch(staffPosition) {\n    var offset = staffPosition - this.staffPosition;\n    var octaveOffset = Math.floor(offset / 7);\n\n    var step = Pitch.staffOffsetToStep(offset);\n\n    if (this.defaultAccidental !== null && step === this.defaultAccidental.step)\n      step += this.defaultAccidental.accidentalType;\n\n    return new Pitch(step, this.octave + octaveOffset);\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.DoClef);\n    glyph.setStaffPosition(ctxt, this.staffPosition);\n    this.addVisualizer(glyph);\n\n    this.finishLayout(ctxt);\n  }\n\n  clone() {\n    return new DoClef(this.staffPosition, this.octave, this.defaultAccidental);\n  }\n}\n\n\nexport class FaClef extends Clef {\n\n  constructor(staffPosition, octave, defaultAccidental = null) {\n    super(staffPosition, octave, defaultAccidental);\n\n    this.octave = octave;\n\n    this.leadingSpace = 0;\n  }\n\n  pitchToStaffPosition(pitch) {\n    return (pitch.octave - this.octave) * 7 + this.staffPosition +\n            Pitch.stepToStaffOffset(pitch.step) -\n            Pitch.stepToStaffOffset(Step.Fa);\n  }\n\n  staffPositionToPitch(staffPosition) {\n    var offset = staffPosition - this.staffPosition + 3; // + 3 because it's a fa clef (3 == offset from Do)\n    var octaveOffset = Math.floor(offset / 7);\n\n    var step = Pitch.staffOffsetToStep(offset);\n\n    if (step === Step.Ti && this.defaultAccidental === AccidentalType.Flat)\n      step = Step.Te;\n\n    return new Pitch(step, this.octave + octaveOffset);\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.FaClef);\n    glyph.setStaffPosition(ctxt, this.staffPosition);\n    this.addVisualizer(glyph);\n\n    this.finishLayout(ctxt);\n  }\n\n  clone() {\n    return new FaClef(this.staffPosition, this.octave, this.defaultAccidental);\n  }\n}\n\nexport class ChantLineBreak extends ChantNotationElement {\n\n  constructor(justify) {\n    super();\n\n    this.justify = justify;\n  }\n\n  performLayout(ctxt) {\n\n    // reset the bounds before doing a layout\n    this.bounds = new Rect(0, 0, 0, 0);\n  }\n\n  clone() {\n    var lb = new ChantLineBreak();\n    lb.justify = this.justify;\n\n    return lb;\n  }\n}\n\n\n// a chant line represents one staff line on the page. ChantLines are created by the score\n// and laid out by the page\nexport class ChantLine extends ChantLayoutElement {\n\n  constructor(score) {\n    super();\n\n    this.score = score;\n\n    this.scoreNotationStart = 0;\n    this.scoreNotationCount = 0;\n    this.notations = [];\n    this.notationBounds = null; // Rect\n\n    this.lyricBounds = null; // Rect\n\n    this.staffLeft = 0;\n    this.staffRight = 0;\n\n    this.custod = null;\n\n    this.justify = true;\n\n    this.ledgerLines = [];\n\n    this.startingClef = null; // necessary for the layout process\n\n    this.nextLine = null;\n    this.previousLine = null; // for layout assistance\n\n    // fixme: make these configurable values from the score\n    this.spaceAfterNotations = 30; // the space between the notation bounds and the first text track\n    this.spaceBetweenTextTracks = 20; // spacing between each text track\n  }\n\n  setStartingClef(clef) {\n    this.startingClef = clef.clone();\n  }\n\n  performLayout(ctxt) {\n\n    // start off with a rectangle that holds at least the four staff lines\n    // we fudge the 3 to 3.1 so that the svg doesn't crop off the upper/lower staff lines...\n    this.notationBounds = new Rect(this.staffLeft, -3.1 * ctxt.staffInterval,\n      this.staffRight - this.staffLeft, 6.2 * ctxt.staffInterval);\n\n    // run through all the elements of the line and calculate the bounds of the notations,\n    // as well as the bounds of each text track we will use\n    var i;\n    var notation = null;\n\n    for (i = 0; i < this.notations.length; i++)\n      this.notationBounds.union(this.notations[i].bounds);\n\n    this.lyricVerticalOffset = this.notationBounds.y + this.notationBounds.height + ctxt.lyricTextSize;\n\n    // finalize the lyrics placement\n    for (i = 0; i < this.notations.length; i++) {\n      notation = this.notations[i];\n\n      if (!notation.hasLyric())\n        continue;\n\n      notation.lyric.bounds.y = this.lyricVerticalOffset;\n    }\n\n    // dropCap and the annotations\n    if (this.scoreNotationStart === 0) {\n\n      if (this.score.dropCap !== null) {\n\n        // drop caps and annotations are drawn from their center, so aligning them\n        // horizontally is as easy as this.staffLeft / 2\n        this.score.dropCap.bounds.x = this.staffLeft / 2;\n        this.score.dropCap.bounds.y = this.lyricVerticalOffset;\n      }\n\n      if (this.score.annotation !== null) {\n        // annotations use dominant-baseline to align text to the top\n        this.score.annotation.bounds.x += this.staffLeft / 2;\n        this.score.annotation.bounds.y +=  - ctxt.staffInterval * 3;\n      }\n    }\n\n    this.notationBounds.height += ctxt.lyricTextSize;\n\n    this.bounds.x = 0;\n    this.bounds.y = this.notationBounds.y;\n    this.bounds.width = this.notationBounds.right();\n    this.bounds.height = this.notationBounds.height;\n\n    // the origin of the chant line's coordinate space is at the center line of the left extremity of the staff\n    this.origin = new Point(this.staffLeft, -this.notationBounds.y);\n  }\n\n  createDrawable(ctxt) {\n    var inner = \"\";\n\n    // add the chant lines\n    var i, x1 = this.staffLeft, x2 = this.staffRight;\n\n    // create the staff lines\n    for (i = -3; i <= 3; i += 2) {\n\n      inner += QuickSvg.createFragment('line', {\n        'x1': x1,\n        'y1': ctxt.staffInterval * i,\n        'x2': x2,\n        'y2': ctxt.staffInterval * i,\n        'stroke': ctxt.staffLineColor,\n        'stroke-width': ctxt.staffLineWeight,\n        'class': 'staffLine'\n      });\n    }\n\n    // create the ledger lines\n    for (i = 0; i < this.ledgerLines.length; i++) {\n\n      var ledgerLine = this.ledgerLines[i];\n      var y = ctxt.calculateHeightFromStaffPosition(ledgerLine.staffPosition);\n\n      inner += QuickSvg.createFragment('line', {\n        'x1': ledgerLine.x1,\n        'y1': y,\n        'x2': ledgerLine.x2,\n        'y2': y,\n        'stroke': ctxt.staffLineColor,\n        'stroke-width': ctxt.staffLineWeight,\n        'class': 'ledgerLine'\n      });\n    }\n\n    // dropCap and the annotations\n    if (this.scoreNotationStart === 0) {\n\n      if (this.score.dropCap !== null)\n        inner += this.score.dropCap.createDrawable(ctxt);\n\n      if (this.score.annotation !== null)\n          inner += this.score.annotation.createDrawable(ctxt);\n    }\n\n    // add all of the notations\n    for (i = 0; i < this.notations.length; i++)\n      inner += this.notations[i].createDrawable(ctxt);\n\n    return QuickSvg.createFragment('g', {\n      'class': 'chantLine',\n      'transform': 'translate(' + this.bounds.x + ',' + this.bounds.y + ')'\n    }, inner);\n  }\n\n\n  buildFromChantNotationIndex(ctxt, newElementStart, width) {\n\n    // todo: reset / clear the children we have in case they have data\n    this.scoreNotationStart = newElementStart;\n    this.scoreNotationCount = 0;\n    this.notations = [];\n\n    this.staffLeft = 0;\n\n    if (width > 0)\n      this.staffRight = this.staffLeft + width;\n    else\n      this.staffRight = 99999999; // no limit to staff size\n\n    // If this is the first chant line, then we have to make room for a\n    // drop cap and/or annotation, if present\n    if (this.scoreNotationStart === 0) {\n\n      var padding = 0;\n\n      if (this.score.dropCap !== null)\n        padding = this.score.dropCap.bounds.width + this.score.dropCap.padding * 2;\n\n      if (this.score.annotation !== null)\n        padding = Math.max(padding, this.score.annotation.bounds.width + this.score.annotation.padding * 4);\n\n      this.staffLeft += padding;\n    }\n\n    // set up the clef...\n    // Also, add the clef as a child (which will also set the clef in the context)\n    this.setStartingClef(ctxt.activeClef);\n    this.startingClef.performLayout(ctxt);\n    this.startingClef.bounds.x = this.staffLeft;\n    this.notations.push(this.startingClef);\n\n    var current = this.startingClef, previous = null, previousWithLyric = null;\n\n    // todo: estimate how much space we have available to us\n    var rightBoundary = this.staffRight - Glyphs.CustodLong.bounds.width - ctxt.intraNeumeSpacing * 4; // possible custod on the line\n\n    // todo: iterate through the notations, fittng what we can on this line\n    var i, scoreNotations = this.score.notations;\n\n    for (i = newElementStart; i < scoreNotations.length; i++) {\n\n      if (current.hasLyric())\n        previousWithLyric = current;\n\n      previous = current;\n      current = scoreNotations[i];\n\n      // try to fit the current element on this line.\n      // if it doesn't fit, we finish up here.\n      var fitsOnLine = this.positionNotationElement(ctxt, previousWithLyric, previous, current, rightBoundary);\n      if (fitsOnLine === false) {\n\n        // check if the previous elements want to be kept with this one\n        for (var k = i - 1; k > this.scoreNotationStart; k--) {\n          var cne = this.score.notations[k];\n\n          if (cne.keepWithNext === true) {\n            this.notations.pop(); // remove it from our notations\n            this.scoreNotationCount--;\n          } else\n            break;\n        }\n\n        // we are at the end of the line!\n        break;\n      }\n\n      current.chantLine = this;\n      this.notations.push(current);\n      this.scoreNotationCount++;\n\n      // line breaks are a special case indicating to stop processing here\n      if (current.constructor.name === 'ChantLineBreak' && width > 0) {\n        this.justify = current.justify;\n        break;\n      }\n    }\n\n    var last, extraSpace = 0;\n\n    if (this.notations.length > 0) {\n      last = this.notations[this.notations.length - 1];\n\n      if (last.hasLyric() && last.getLyricRight() > (last.bounds.right() + last.trailingSpace))\n        extraSpace = this.staffRight - last.getLyricRight();\n      else\n        extraSpace = this.staffRight - (last.bounds.right() + last.trailingSpace);\n    }\n\n    // create the custod at the end of the line (if we need it!)\n    // if we find an element following this one that is a neume, we create a custod for it\n    for (i = this.scoreNotationStart + this.scoreNotationCount; i < this.score.notations.length; i++) {\n      var notation = this.score.notations[i];\n\n      if ('notes' in notation && notation.notes.length > 0) {\n\n        var custod = new Custod();\n        custod.referringNeume = notation;\n\n        custod.performLayout(ctxt);\n\n        if (this.notations.length > 0) {\n          last = this.notations[this.notations.length - 1];\n          custod.bounds.x = last.bounds.x + last.bounds.width;\n        }\n\n        this.custod = custod;\n        this.notations.push(custod);\n\n        extraSpace -= custod.bounds.width + custod.leadingSpace;\n\n        // nothing more to see here...\n        break;\n      }\n    }\n\n    if (width <= 0 && this.notations.length > 0) {\n      // set the staff width based on the notations.\n      this.staffRight = this.notations[this.notations.length - 1].bounds.right();\n    }\n\n    // Justify the line if we are not the last one\n    if (this.justify === true && width > 0 &&\n        this.scoreNotationStart + this.scoreNotationCount < this.score.notations.length &&\n        extraSpace > 0)\n      this.justifyElements(extraSpace);\n\n    this.finishLayout(ctxt);\n  }\n\n  justifyElements(extraSpace) {\n\n    var indices = [];\n\n    var i, prev = null, curr = null, prevWithLyrics = null;\n\n    // if we have a custod, place it at the end of the line\n    if (this.custod !== null) \n      this.custod.bounds.x = this.staffRight - this.custod.bounds.width - this.custod.leadingSpace;\n\n    // first pass: determine the neumes we can space apart\n    // start at 1 to skip the clef\n    for (i = 1; i < this.notations.length - 1; i++) {\n\n      if (curr !== null && curr.hasLyric())\n        prevWithLyrics = curr;\n\n      prev = curr;\n      curr = this.notations[i];\n\n      if (prev !== null && prev.keepWithNext === true)\n        continue;\n\n      if (prevWithLyrics !== null && prevWithLyrics.lyric.allowsConnector() && !prevWithLyrics.lyric.needsConnector)\n        continue;\n\n      if (curr.constructor.name === 'ChantLineBreak')\n        continue;\n\n      // otherwise, we can add space before this element\n      indices.push(i);\n    }\n\n    if (indices.length === 0)\n      return;\n\n    var offset = 0;\n    var increment = extraSpace / indices.length;\n    var lastIndex = (this.notations[this.notations.length - 1].constructor.name === 'Custod') ? this.notations.length - 1 : this.notations.length;\n    for (i = 1; i < lastIndex; i++) {\n\n      curr = this.notations[i];\n\n      if (indices.indexOf(i) >= 0) {\n        curr.bounds.x += offset + increment;\n        offset += increment;\n      } else\n        curr.bounds.x += offset;\n    }\n\n    offset = offset;\n  }\n\n  finishLayout(ctxt) {\n\n    this.ledgerLines = []; // clear any existing ledger lines\n\n    var epismata = []; // keep track of epismata in case we can connect some\n\n    // make a final pass over all of the notes to add any necessary\n    // ledger lines and to smooth out epismata\n    for (var i = 0; i < this.notations.length; i++) {\n\n      // if it's not a neume, then skip over it, right?\n      if (typeof this.notations[i].notes === 'undefined')\n        continue;\n\n      var neume = this.notations[i];\n\n      for (var j = 0; j < neume.notes.length; j++) {\n        var note = neume.notes[j];\n\n        // do we need a ledger line for this note?\n        var staffPosition = note.staffPosition;\n\n        if (staffPosition >= 5 || staffPosition <= -5) {\n\n          var x1 = neume.bounds.x + note.bounds.x - ctxt.staffInterval;\n          var x2 = neume.bounds.x + note.bounds.x + note.bounds.width + ctxt.staffInterval;\n\n          // round the staffPosition to the nearest line\n          if (staffPosition > 0)\n            staffPosition = staffPosition - (staffPosition - 1) % 2;\n          else\n            staffPosition = staffPosition - (staffPosition + 1) % 2;\n\n          // if we have a ledger line close by, then average out the distance between the two\n          var minLedgerSeperation = ctxt.staffInterval * 5;\n\n          if (this.ledgerLines.length > 0 &&\n              this.ledgerLines[this.ledgerLines.length - 1].x2 + minLedgerSeperation >= x1) {\n\n            // average out the distance\n            var half = (x1 - this.ledgerLines[this.ledgerLines.length - 1].x2) / 2;\n            this.ledgerLines[this.ledgerLines.length - 1].x2 += half;\n            x1 -= half;\n          }\n\n          // finally, add the ledger line\n          this.ledgerLines.push({\n            x1: x1,\n            x2: x2,\n            staffPosition: staffPosition\n          });\n        }\n\n        var noteHasEpisema = false;\n\n        // blend epismata as we're able\n        for (var k = 0; k < note.markings.length; k++) {\n\n          if (note.markings[k].constructor.name !== \"HorizontalEpisema\")\n            continue;\n\n          noteHasEpisema = true;\n          var episema = note.markings[k];\n\n          // we try to blend the episema if we're able.\n          if (epismata.length === 0 ||\n              epismata[0].episema.positionHint !== episema.positionHint ||\n              epismata[0].episema.terminating === true) {\n\n            // start a new set of epismata to potentially blend\n            epismata = [];\n            epismata.push({\n              episema: episema,\n              neume: neume\n            });\n          } else {\n            // blend all previous with this one\n            var newY;\n\n            if (episema.positionHint === Exsurge.MarkingPositionHint.Below)\n              newY = Math.max(episema.bounds.y, epismata[0].episema.bounds.y);\n            else\n              newY = Math.min(episema.bounds.y, epismata[0].episema.bounds.y);\n\n            if (episema.bounds.y !== newY)\n              episema.updateY(newY);\n            else {\n              for (var l = 0; l < epismata.length; l++)\n                epismata[l].episema.updateY(newY);\n            }\n\n            // extend the last episema to meet the new one\n            var newWidth = (neume.bounds.x + episema.bounds.x) - (epismata[epismata.length - 1].neume.bounds.x + epismata[epismata.length - 1].episema.bounds.x);\n            epismata[epismata.length - 1].episema.updateWidth(newWidth);\n\n            epismata.push({\n              episema: episema,\n              neume: neume\n            });\n          }\n        }\n\n        // if the note doesn't have any episema, then make sure and stop blending epismata\n        if (noteHasEpisema === false)\n          epismata = [];\n      }\n    }\n  }\n\n\n  // this is where the real core of positioning neumes takes place\n  // returns true if positioning was able to fit the neume before rightBoundary.\n  // returns false if cannot fit before given right margin.\n  // fixme: if this returns false, shouldn't we set the connectors on prev to be activated?!\n  positionNotationElement(ctxt, prevWithLyric, prev, curr, rightBoundary) {\n\n    // To begin we just place the current notation right after the previous,\n    // irrespective of lyrics.\n    curr.bounds.x = prev.bounds.right() + prev.trailingSpace;\n\n    if (prevWithLyric === null) {\n\n      var maxRight = curr.bounds.right() + curr.trailingSpace;\n\n      // if the lyric left is negative, then offset the neume appropriately\n      if (curr.hasLyric()) {\n        curr.lyric.setNeedsConnector(false); // we hope for the best!\n\n        if (curr.getLyricLeft() < 0)\n          curr.bounds.x += -curr.getLyricLeft();\n\n        maxRight = Math.max(maxRight, curr.getLyricRight());\n      }\n\n      if (maxRight > rightBoundary)\n        return false;\n      else\n        return true;\n    }\n\n    if (curr.hasLyric() === false) {\n\n      if (prevWithLyric.lyric.allowsConnector())\n        prevWithLyric.lyric.setNeedsConnector(true);\n\n      if (curr.bounds.right() + curr.trailingSpace < rightBoundary)\n        return true;\n      else {\n        //curr.bounds.x = this.startingClef.bounds.right();\n        return false;\n      }\n    }\n\n    curr.lyric.setNeedsConnector(false); // we hope for the best!\n\n    var currLyricLeft = curr.getLyricLeft();\n    var prevLyricRight = prevWithLyric.getLyricRight();\n\n    if (prevWithLyric.lyric.allowsConnector() === false) {\n\n      // No connector needed, but include space between words if necessary!\n      if (prevLyricRight + ctxt.minLyricWordSpacing > currLyricLeft) {\n        // push the current element over a bit.\n        curr.bounds.x += prevLyricRight + ctxt.minLyricWordSpacing - currLyricLeft;\n      }\n\n    } else {\n\n      // we may need a connector yet...\n\n      if (prevLyricRight > currLyricLeft) {\n        // in this case, the lyric elements actually overlap.\n        // so nope, no connector needed. instead, we just place the lyrics together\n        // fixme: for better text layout, we could actually use the kerning values\n        // between the prev and curr lyric elements!\n        curr.bounds.x += prevLyricRight - currLyricLeft;\n\n      } else {\n\n        // bummer, looks like we couldn't merge the syllables together. Better add a connector...\n        prevWithLyric.lyric.setNeedsConnector(true);\n        prevLyricRight = prevWithLyric.getLyricRight();\n\n        if (prevLyricRight > currLyricLeft)\n          curr.bounds.x += prevLyricRight - currLyricLeft;\n      }\n    }\n\n    if (curr.bounds.right() + curr.trailingSpace < rightBoundary)\n      return true;\n\n    // if we made it this far, then the element won't fit on this line.\n    // set the position of the current element to the beginning of a chant line,\n    // and mark the previous lyric as connecting if needed.\n    // curr.bounds.x = this.startingClef.bounds.right();\n\n    if (prevWithLyric.lyric !== null && prevWithLyric.lyric.allowsConnector())\n      prevWithLyric.lyric.setNeedsConnector(true);\n\n    return false;\n  }\n}\n\n/*\n * Score, document\n */\nexport class ChantScore {\n\n  constructor() {\n\n    this.startingClef = null; // Clef\n\n    this.notations = [];\n    this.lines = [];\n    this.notes = [];\n\n    this.dropCap = null;\n    this.annotation = null;\n\n    this.compiled = false;\n\n    this.autoColoring = true;\n\n    // valid after chant lines are created...\n    this.bounds = new Rect();\n  }\n\n  performLayout(ctxt, finishedCallback) {\n\n    // first order of business: let the clef perform layout\n    this.startingClef.performLayout(ctxt);\n\n    if (this.dropCap)\n      this.dropCap.recalculateMetrics(ctxt);\n\n    if (this.annotation)\n      this.annotation.recalculateMetrics(ctxt);\n\n    if (this.compiled) {\n      setTimeout(() => {\n        if (finishedCallback)\n          finishedCallback();\n      }, 0);\n    } else {\n      // boot the compilation process\n      setTimeout(() => {\n        this.compileElement(ctxt, 0, finishedCallback);\n      }, 0);\n    }\n  }\n\n  compileElement(ctxt, index, finishedCallback) {\n\n    if (index >= this.notations.length) {\n\n      if (!this.compiled) {\n        this.compiled = true;\n        setTimeout(() => {\n          if (finishedCallback)\n            finishedCallback();\n        }, 0);\n      }\n\n      return;\n    }\n\n    var timeout = new Date().getTime() + 50; // process for fifty milliseconds\n    do {\n      var notation = this.notations[index++];\n      if(!notation.compiled) {\n        notation.performLayout(ctxt);\n        notation.compiled = true;\n      }\n    } while (index < this.notations.length && new Date().getTime() < timeout);\n\n    // schedule the next block of processing\n    setTimeout(() => {\n      this.compileElement(ctxt, index, finishedCallback);\n    }, 0);\n  }\n\n  layoutChantLines(ctxt, width, finishedCallback) {\n\n    this.lines = [];\n\n    var y = 0;\n    var currIndex = 0;\n\n    if (ctxt.activeClef === null)\n      ctxt.activeClef = this.startingClef;\n\n    do {\n\n      var line = new ChantLine(this);\n\n      line.buildFromChantNotationIndex(ctxt, currIndex, width);\n      currIndex += line.scoreNotationCount;\n      line.performLayout(ctxt);\n      this.lines.push(line);\n\n      line.bounds.y = -line.bounds.y + y;\n      y += line.bounds.height + ctxt.staffInterval * 3;\n\n    } while (currIndex < this.notations.length);\n\n    var lastLine = this.lines[this.lines.length - 1];\n\n    this.bounds.x = 0;\n    this.bounds.y = 0;\n    this.bounds.width = lastLine.bounds.width;\n    this.bounds.height = y;\n\n    if (finishedCallback)\n      finishedCallback(this);\n  }\n\n  createDrawable(ctxt) {\n\n    var i, drawable = \"\";\n\n    // create defs section\n    for (var def in ctxt.defs)\n      if (ctxt.defs.hasOwnProperty(def))\n        drawable += ctxt.defs[def];\n\n    drawable = QuickSvg.createFragment('defs', {}, drawable);\n\n    for (i = 0; i < this.lines.length; i++)\n      drawable += this.lines[i].createDrawable(ctxt);\n\n    drawable = QuickSvg.createFragment('g', {}, drawable);\n\n    drawable = QuickSvg.createFragment('svg', {\n      'xmlns': 'http://www.w3.org/2000/svg',\n      'version': '1.1',\n      'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n      'class': 'ChantScore',\n      'width': this.bounds.width,\n      'height': this.bounds.height\n    }, drawable);\n\n    return drawable;\n  }\n\n  unserializeFromJson(data) {\n    this.autoColoring = data['auto-coloring'];\n\n    if (data.annotation !== null && data.annotation !== \"\") {\n      // create the annotation\n      this.annotation = new Annotation(ctxt, data.annotation);\n    } else\n      this.annotation = null;\n\n    var createDropCap = data['drop-cap'] === 'auto' ? true : false;\n\n    Gabc.parseChantNotations(data.notations, this, createDropCap);\n  }\n\n  serializeToJson() {\n    var data = {};\n\n    data['type'] = \"score\";\n    data['auto-coloring'] = true;\n\n    if (this.annotation !== null)\n      data.annotation = this.annotation.unsanitizedText;\n    else\n      data.annotation = \"\";\n\n    \n\n    return data;\n  }\n}\n\nexport class ChantDocument {\n  constructor() {\n\n    var defaults = {\n      layout: {\n        units: \"mm\",\n        'default-font': {\n          'font-family': \"Crimson\",\n          'font-size': 14\n        },\n        page: {\n          width: 8.5,\n          height: 11,\n          'margin-left': 0,\n          'margin-top': 0,\n          'margin-right': 0,\n          'margin-bottom': 0\n        }\n      },\n      scores: []\n    };\n\n    // default layout\n    this.copyLayout(this, defaults);\n\n    this.scores = defaults.scores;\n  }\n\n  copyLayout(to, from) {\n\n    to.layout = {\n      units: from.layout.units,\n      'default-font': {\n        'font-family': from.layout['default-font']['font-family'],\n        'font-size': from.layout['default-font']['font-size']\n      },\n      page: {\n        width: from.layout.page.width,\n        height: from.layout.page.height,\n        'margin-left': from.layout.page['margin-left'],\n        'margin-top': from.layout.page['margin-top'],\n        'margin-right': from.layout.page['margin-right'],\n        'margin-bottom': from.layout.page['margin-bottom']\n      }\n    };\n  }\n\n  unserializeFromJson(data) {\n\n    this.copyLayout(this, data);\n\n    this.scores = [];\n\n    // read in the scores\n    for (var i = 0; i < data.scores.length; i++) {\n      var score = new ChantScore();\n\n      score.unserializeFromJson(data.scores[i]);\n      this.scores.push(score);\n    }\n  }\n\n  serializeToJson() {\n    var data = {};\n\n    this.copyLayout(data, this);\n\n    data.scores = [];\n\n    // save scores...\n    for (var i = 0; i < this.scores.length; i++)\n      data.scores.push(this.scores[i].serializeToJson());\n\n    return data;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from 'Exsurge.Core'\nimport { ctxt, GlyphCode, GlyphVisualizer, DividerLineVisualizer, ChantNotationElement } from 'Exsurge.Drawing'\n\n/*\n *\n */\nexport class Custod extends ChantNotationElement {\n\n  constructor() {\n    super();\n    this.referringNeume = null;\n    this.note = null;\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var staffPosition = 0; // a default value just to make sure we don't fail rebuilding\n    var glyphCode;\n\n    if (this.referringNeume !== null) {\n      if (this.referringNeume.notes.length > 0)\n        staffPosition = this.referringNeume.notes[0].staffPosition;\n    } else if (note !== null)\n      staffPosition = this.note.staffPosition;\n\n    glyphCode = Custod.getGlyphCode(staffPosition);\n\n    var glyph = new GlyphVisualizer(ctxt, glyphCode);\n    glyph.setStaffPosition(ctxt, staffPosition);\n    this.addVisualizer(glyph);\n\n    this.finishLayout(ctxt);\n  }\n\n  static getGlyphCode(staffPosition) {\n\n    if (staffPosition <= 2) {\n\n      // ascending custodes\n      if (Math.abs(staffPosition) % 2 === 1)\n        return GlyphCode.CustodLong;\n      else\n        return GlyphCode.CustodShort;\n    } else {\n\n      // descending custodes\n      if (Math.abs(staffPosition) % 2 === 1)\n        return GlyphCode.CustodDescLong;\n      else\n        return GlyphCode.CustodDescShort;\n    }\n  }\n}\n\n/*\n * DividingLine\n */\nexport class DividingLine extends ChantNotationElement {\n\n  constructor() {\n    super();\n\n    this.resetsAccidentals = true;\n  }\n}\n\n/*\n * QuarterBar\n */\nexport class QuarterBar extends DividingLine {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n    this.addVisualizer(new DividerLineVisualizer(ctxt, 2, 4));\n\n    this.origin.x = this.bounds.width / 2;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * HalfBar\n */\nexport class HalfBar extends DividingLine {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    this.addVisualizer(new DividerLineVisualizer(ctxt, -2, 2));\n\n    this.origin.x = this.bounds.width / 2;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * FullBar\n */\nexport class FullBar extends DividingLine {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n    \n    this.addVisualizer(new DividerLineVisualizer(ctxt, -3, 3));\n\n    this.origin.x = this.bounds.width / 2;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * DoubleBar\n */\nexport class DoubleBar extends DividingLine {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line0 = new DividerLineVisualizer(ctxt, -3, 3);\n    line0.bounds.x = 0;\n    this.addVisualizer(line0);\n\n    var line1 = new DividerLineVisualizer(ctxt, -3, 3);\n    line1.bounds.x = ctxt.intraNeumeSpacing * 2;\n    this.addVisualizer(line1);\n\n    this.origin.x = this.bounds.width / 2;\n\n    this.finishLayout(ctxt);\n  }\n}\n\nexport const AccidentalType = {\n  Flat: -1,\n  Natural: 0,\n  Sharp: 1\n};\n\n/*\n * Accidental\n */\nexport class Accidental extends ChantNotationElement {\n\n  constructor(staffPosition, accidentalType) {\n    super();\n    this.isAccidental = true;\n    this.keepWithNext = true; // accidentals should always stay connected...\n    \n    this.staffPosition = staffPosition;\n    this.accidentalType = accidentalType;\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    this.addVisualizer(this.createGlyphVisualizer(ctxt));\n\n    this.finishLayout(ctxt);\n  }\n\n  // creation of the glyph visualizer is refactored out or performLayout\n  // so that clefs can use the same logic for their accidental glyph\n  createGlyphVisualizer(ctxt) {\n\n    var glyphCode = GlyphCode.Flat;\n\n    switch (this.accidentalType) {\n      case AccidentalType.Natural:\n        glyphCode = GlyphCode.Natural;\n        break;\n      case AccidentalType.Sharp:\n        glyphCode = GlyphCode.Sharp;\n        break;\n      default:\n        glyphCode = GlyphCode.Flat;\n        break;\n    }\n\n    var glyph = new GlyphVisualizer(ctxt, glyphCode);\n    glyph.setStaffPosition(ctxt, this.staffPosition);\n\n    return glyph;\n  }\n\n  adjustStep(step) {\n    switch (this.accidentalType) {\n      case AccidentalType.Flat:\n        if (step === Step.Ti) return Step.Te;\n        if (step === Step.Mi) return Step.Me;\n        break;\n      case AccidentalType.Sharp:\n        if (step === Step.Do) return Step.Du;\n        if (step === Step.Fa) return Step.Fu;\n        break;\n      case AccidentalType.Natural:\n        if (step === Step.Te) return Step.Ti;\n        if (step === Step.Me) return Step.Mi;\n        if (step === Step.Du) return Step.Do;\n        if (step === Step.Fu) return Step.Fa;\n        break;\n    }\n\n    // no adjustment needed\n    return step;\n  }\n\n  applyToPitch(pitch) {\n\n    // fixme: this is broken since we changed to staff positions\n\n    // no adjusment needed\n    if (this.octave !== pitch.octave)\n      return;\n\n    pitch.step = this.adjustStep(pitch.step);\n  }\n}\n\n/*\n * Virgula\n */\nexport class Virgula extends ChantNotationElement {\n\n  constructor() {\n    super();\n\n    // fixme: the staff position of the virgula is customizable, so that it\n    // can be placed on different lines (top or bottom) depending on the\n    // notation tradition of what is being notated (e.g., Benedictine has it\n    //  on top line, Norbertine at the bottom)\n    this.staffPosition = 3;\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.Virgula);\n    glyph.setStaffPosition(ctxt, this.staffPosition);\n\n    this.addVisualizer(glyph);\n\n    this.origin.x = this.bounds.width / 2;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Signs.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport { Units, Pitch, Point, Rect, Margins, Size, Step, MarkingPositionHint } from 'Exsurge.Core'\nimport { LyricType, Lyric, DropCap } from 'Exsurge.Drawing'\nimport { Note, LiquescentType, NoteShape, NoteShapeModifiers, ChantScore, ChantDocument, Clef, DoClef, FaClef, ChantLineBreak } from 'Exsurge.Chant'\nimport * as Markings from 'Exsurge.Chant.Markings'\nimport * as Signs from 'Exsurge.Chant.Signs'\nimport * as Neumes from 'Exsurge.Chant.Neumes'\nimport { ctxt } from 'Exsurge.Drawing'\n\n\n\n// reusable reg exps\nvar __syllablesRegex = /(?=.)((?:[^(])*)(?:\\(?([^)]*)\\)?)?/g;\nvar __notationsRegex = /z0|z|Z|::|:|;|,|`|c1|c2|c3|c4|f3|f4|cb3|cb4|\\/\\/|\\/|\\!|-?[a-mA-M][oOwWvVrRsxy#~\\+><_\\.'012345]*/g;\n\nexport var Gabc = {\n\n  loadChantScore: function (ctxt, gabcNotations, createDropCap) {\n\n    var score = new ChantScore();\n\n    // fixme: no dropcap until the text engine is working again\n    this.parseChantNotations(ctxt, gabcNotations, score, createDropCap);\n\n    return score;\n  },\n\n  parseChantNotations: function (ctxt, gabcNotations, score, createDropCap) {\n    var passByRef = {\n      activeClef: null\n    };\n\n    // split the notations on whitespace boundaries\n    var words = score.gabcSource = gabcNotations.match(/\\S+/g);\n    score.notations = this.parseChantWords(ctxt, words, score, createDropCap, passByRef);\n  },\n\n  parseChantWords: function (ctxt, words, score, createDropCap, passByRef) {\n    var notations = [];\n    \n    for (var i = 0; i < words.length; i++) {\n      var word = words[i];\n\n      var currSyllable = 0;\n\n      if (word === '')\n        continue;\n\n      var matches = [];\n      \n      while ((match = __syllablesRegex.exec(word)))\n        matches.push(match);\n\n      words[i] = word = {\n        word: word,\n        notationIndex: notations.length\n      };\n\n      for (var j = 0; j < matches.length; j++) {\n        var match = matches[j];\n\n        var lyricText = match[1].trim();\n        var notationData = match[2];\n\n        var items = this.createNotations(ctxt, score, notationData, passByRef);\n\n        if (items.length === 0)\n          continue;\n\n        // create lyric if we have it...\n        if (lyricText !== \"\") {\n\n          var lyricType;\n          if (currSyllable === 0 && matches.length === 1)\n            lyricType = LyricType.SingleSyllable;\n          else if (currSyllable === 0 && matches.length > 1)\n            lyricType = LyricType.BeginningSyllable;\n          else if (currSyllable === matches.length - 1)\n            lyricType = LyricType.EndingSyllable;\n          else\n            lyricType = LyricType.MiddleSyllable;\n\n          // if we are to create a dropCap and we haven't done so yet, do it now\n          if (createDropCap && score.dropCap === null) {\n            score.dropCap = new DropCap(ctxt, lyricText.substring(0, 1));\n            words.dropCapIndex = i;\n\n            // if the dropcap is a single character syllable (vowel) that is the\n            // beginning of the word, then we use a hyphen in place of the lyric text\n            // and treat it as a single syllable.\n            if (lyricText.length === 1 && lyricType === LyricType.BeginningSyllable) {\n              lyricText = ctxt.syllableConnector;\n              lyricType = LyricType.SingleSyllable;\n            } else\n              lyricText = lyricText.substring(1);\n          }\n\n          // add the lyrics to the first notation that makes sense...\n          var notationWithLyrics = null;\n          for (var k = 0; k < items.length; k++) {\n            var cne = items[k];\n            if (cne.constructor.name === \"Accidental\")\n              continue;\n\n            notationWithLyrics = cne;\n            break;\n          }\n\n          // if it's not a neume then make the lyric a directive\n          if (typeof notationWithLyrics.notes === 'undefined')\n            lyricType = LyricType.Directive;\n\n          var lyric = this.makeLyric(ctxt, lyricText, lyricType);\n\n          // also, new words reset the accidentals, per the Solesmes style (see LU xviij)\n          if (lyric.lyricType === LyricType.BeginningSyllable ||\n            lyric.lyricType === LyricType.SingleSyllable)\n            passByRef.activeClef.resetAccidentals();\n\n          notationWithLyrics.lyric = lyric;\n        }\n\n        notations = notations.concat(items);\n\n        currSyllable++;\n      }\n      word.notationLength = notations.length - word.notationIndex;\n    }\n    return notations;\n  },\n\n  updateChantScore: function (ctxt, gabcNotations, score, createDropCap) {\n    var oldWords = score.gabcSource.map(function(word) { return word.word; });\n    var newWords = gabcNotations.match(/\\S+/g) || [];\n  \n    // find the part of the words array that has changed:\n    var lenOld = oldWords.length,\n        lenNew = newWords.length,\n        minLen = Math.min(lenOld,lenNew),\n        i = 0;\n    // Count how many words are the same at the beginnings of the arrays:\n    while(i < minLen && oldWords[i] === newWords[i]) {\n      ++i;\n    }\n    var numSameWordsAtBeginning = i,\n        numSameWordsAtEnd = 0;\n    if(i < minLen) {\n      // Count how many words are the same at the ends of the arrays (but only if the shorter array wasn't completely a subset of the longer)\n      i = 1;\n      while(i <= minLen && oldWords[lenOld-i] === newWords[lenNew-i]) {\n        ++i;\n      }\n      numSameWordsAtEnd = i - 1;\n    }\n    if(lenOld === lenNew && i === lenOld) {\n      // the gabc source has not been altered.  No need to do anything.\n      return;\n    }\n    if(numSameWordsAtBeginning == 0) {\n      // if even the first word changed, we need to reset the clef:\n      score.startingClef = null;\n    }\n    \n    var dcIndex = score.gabcSource.dropCapIndex;\n    // if there is a drop cap, and it is not among the words at the beginning that have remained the same,\n    if(typeof dcIndex == 'number' && dcIndex >= numSameWordsAtBeginning) {\n      // we need to remove it from the score, so that it will make a new one...\n      score.dropCap = null;\n    }\n\n    var numWordsRemoved = lenOld - numSameWordsAtEnd - numSameWordsAtBeginning;\n    var wordsAdded = newWords.slice(numSameWordsAtBeginning, lenNew - numSameWordsAtEnd);\n    var wordsRemoved = score.gabcSource.slice(numSameWordsAtBeginning, numSameWordsAtBeginning + numWordsRemoved);\n\n    // calculate index to put the new notations in the notations array, based on where the last identical word's notations are\n    // calculate length of notations to remove based on where the last removed word's notations are.\n    var notationIndex = 0, numNotationsRemoved = 0;\n    if(numWordsRemoved) {\n      notationIndex = wordsRemoved[0].notationIndex;\n      var lastWordRemoved = wordsRemoved[wordsRemoved.length - 1];\n      numNotationsRemoved = lastWordRemoved.notationIndex + lastWordRemoved.notationLength - notationIndex;\n    } else {\n      var lastSameWord = score.gabcSource[numSameWordsAtBeginning - 1];\n      if(lastSameWord) notationIndex = lastSameWord.notationIndex + lastSameWord.notationLength;\n    }\n    \n    // Find the last active clef\n    var clefs = score.notations.slice(0,notationIndex).filter(function(notation) { return notation.isClef; });\n    var activeClef = clefs.length? clefs[clefs.length - 1] : score.startingClef;\n    var passByRef = {\n      activeClef: activeClef\n    };\n\n    // Parse the words that were added:\n    var newNotations = this.parseChantWords(ctxt, wordsAdded, score, createDropCap, passByRef);\n\n    if(createDropCap) {\n      // If we lost the drop cap, we need to go through, parsing the old words, until we find a new drop cap or get to the end.\n      while(score.dropCap === null && numSameWordsAtEnd > 0) {\n        var oldWord = oldWords.slice(-numSameWordsAtEnd);\n        newNotations = newNotations.concat(this.parseChantWords(ctxt, oldWord, createDropCap, passByRef));\n        wordsAdded.dropCapIndex = oldWord.dropCapIndex;\n        --numSameWordsAtEnd;\n      }\n    }\n\n    // Update the notation index on words that have just been added.\n    if(notationIndex) {\n      wordsAdded.forEach(function(word) {\n        word.notationIndex += notationIndex;\n      });\n    }\n    \n    // if there was a dropcap handled in the word that was added, we need to update the dropCapIndex in score.gabcSource\n    if(typeof wordsAdded.dropCapIndex == 'number') {\n      score.gabcSource.dropCapIndex = wordsAdded.dropCapIndex + numSameWordsAtBeginning;\n    }\n    // splice the added words into the gabcSource array\n    [].splice.apply(score.gabcSource, [numSameWordsAtBeginning, numWordsRemoved].concat(wordsAdded));\n    \n    // the words that have not changed are now associated with notations that may have shifted position in the notations array\n    var notationOffset = newNotations.length - numNotationsRemoved;\n    if(notationOffset) {\n      score.gabcSource.slice(numSameWordsAtBeginning + wordsAdded.length).forEach(function(word){\n        word.notationIndex += notationOffset\n      });\n    }\n\n    // splice the added notations into the notations array\n    [].splice.apply(score.notations, [notationIndex, numNotationsRemoved].concat(newNotations));\n    score.compiled = false;\n  },\n\n  makeLyric: function (ctxt, text, lyricType) {\n\n    if (text.length > 1 && text[text.length - 1] === '-') {\n      if (lyricType === LyricType.EndingSyllable)\n        lyricType = LyricType.MiddleSyllable;\n      else if (lyricType === LyricType.SingleSyllable)\n        lyricType = LyricType.BeginningSyllable;\n\n      text = text.substring(0, text.length - 1);\n    }\n\n    var elides = false;\n    if (text.length > 1 && text[text.length - 1] === '_') {\n      // must be an elision\n      elides = true;\n      text = text.substring(0, text.length - 1);\n    }\n\n    if (text === \"*\" || text === \"\")\n      lyricType = LyricType.Directive;\n\n    var s = new Lyric(ctxt, text, lyricType);\n    s.elidesToNext = elides;\n\n    return s;\n  },\n\n  createNotations: function (ctxt, score, data, passByRef) {\n\n    var notations = [];\n\n    // if there is no data, then this must be a text only object\n    if (data === undefined || data === null || data === \"\") {\n      notations.push(new Neumes.TextOnly());\n      return notations;\n    }\n\n    var notes = [];\n    var out = { trailingSpace: -1 };\n\n    var that = this;\n    var addNotation = function(notation) {\n\n      // first, if we have any notes left over, we create a neume out of them\n      if (notes.length > 0) {\n        // create neume(s)\n\n        var neumes = that.createNeumesFromNotes(ctxt, score, notes, out.trailingSpace);\n        for (var i = 0; i < neumes.length; i++)\n          notations.push(neumes[i]);\n\n        // reset the trailing space\n        out.trailingSpace = -1;\n\n        notes = [];\n      }\n\n      // then, if we're passed a notation, let's add it\n      // also, perform chant logic here\n      if (notation !== null) {\n\n        if (notation.isClef) {\n          if (score.startingClef === null) {\n            score.startingClef = notation;\n            return;\n          }\n        } else if (notation.isAccidental)\n          passByRef.activeClef.activeAccidental = notation;\n        else if (notation.resetsAccidentals)\n          passByRef.activeClef.resetAccidentals();\n\n        notations.push(notation);\n      }\n    };\n\n    var atoms = data.match(__notationsRegex);\n\n    for (var i = 0; i < atoms.length; i++) {\n\n      var atom = atoms[i], lineBreak = null;\n\n      // handle the clefs and dividers here\n      switch (atom) {\n        case \",\":\n          addNotation(new Signs.QuarterBar());\n          break;\n        case \"`\":\n          addNotation(new Signs.Virgula());\n          break;\n        case \";\":\n          addNotation(new Signs.HalfBar());\n          break;\n        case \":\":\n          addNotation(new Signs.FullBar());\n          break;\n        case \"::\":\n          addNotation(new Signs.DoubleBar());\n          break;\n          // other gregorio dividers are not supported\n\n        case \"c1\":\n          passByRef.activeClef = new DoClef(-3, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"c2\":\n          passByRef.activeClef = new DoClef(-1, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"c3\":\n          passByRef.activeClef = new DoClef(1, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"c4\":\n          passByRef.activeClef = new DoClef(3, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"f3\":\n          passByRef.activeClef = new FaClef(1, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"f4\":\n          passByRef.activeClef = new FaClef(3, 2);\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"cb3\":\n          passByRef.activeClef = new DoClef(1, 2, new Signs.Accidental(0, Signs.AccidentalType.Flat));\n          addNotation(passByRef.activeClef);\n          break;\n\n        case \"cb4\":\n          passByRef.activeClef = new DoClef(3, 2, new Signs.Accidental(2, Signs.AccidentalType.Flat));\n          addNotation(passByRef.activeClef);\n          break;\n\n          case \"z\":\n            lineBreak = new ChantLineBreak(true);\n            addNotation(lineBreak);\n            break;\n          case \"Z\":\n            lineBreak = new ChantLineBreak(false);\n            addNotation(lineBreak);\n            break;\n          case \"z0\":\n            // unsupported for now...\n            break;\n\n          // spacing indicators\n          case \"!\":\n            out.trailingSpace = 0;\n            addNotation(null);\n            break;\n          case \"/\":\n            out.trailingSpace = ctxt.intraNeumeSpacing;\n            addNotation(null);\n            break;\n          case \"//\":\n            out.trailingSpace = ctxt.intraNeumeSpacing * 2;\n            addNotation(null);\n            break;\n\n\n          default:\n            // might be a custod, might be an accidental, or might be a note\n            if (atom.length > 1 && atom[1] === '+') {\n              // custod\n              var custod = new Custod();\n\n              custod.note = new Note(this.convertGabcStaffPositionToScribamPitch(passByRef.activeClef, data[0]));\n\n              addNotation(custod);\n\n            } else if (atom.length > 1 && (atom[1] === 'x' || atom[1] === 'y' || atom[1] === '#')) {\n\n              var accidentalType;\n\n              switch (atom[1]) {\n                case 'y':\n                  accidentalType = Signs.AccidentalType.Natural;\n                  break;\n                case '#':\n                  accidentalType = Signs.AccidentalType.Sharp;\n                  break;\n                default:\n                  accidentalType = Signs.AccidentalType.Flat;\n                  break;\n              }\n\n              var note = this.createNoteFromData(ctxt, passByRef.activeClef, atom);\n              var accidental = new Signs.Accidental(note.staffPosition, accidentalType);\n              accidental.trailingSpace = ctxt.intraNeumeSpacing * 2;\n\n              passByRef.activeClef.activeAccidental = accidental;\n              \n              addNotation(accidental);\n            } else {\n\n              // to make our interpreter more robust, make sure we have a clef to work with\n              if (passByRef.activeClef === null)\n                passByRef.activeClef = new DoClef(1, 2);\n\n              // looks like it's a note\n              notes.push(this.createNoteFromData(ctxt, passByRef.activeClef, atom));\n            }\n            break;\n      }\n    }\n\n    // finish up any remaining notes we have left\n    addNotation(null);\n\n    return notations;\n  },\n\n  createNeumesFromNotes: function (ctxt, score, notes, finalTrailingSpace) {\n    \n    var neumes = [];\n    var intraNeumeSpacing = ctxt.intraNeumeSpacing;\n\n    var prevNote = null, currNote = null;\n    var firstNoteIndex = 0;\n    var currNoteIndex = 0;\n\n    // here we use a simple finite state machine to create the neumes from the notes\n    // createNeume is helper function which returns the next state after a neume is created\n    // (unknownState). Each state object has a neume() function and a handle() function.\n    // neume() allows us to create the neume of the state in the event that we run out\n    // of notes. handle() gives the state an opportunity to examine the currNote and\n    // determine what to do...either transition to a different neume/state, or\n    // continue building the neume of that state. handle() returns the next state\n\n    var createNeume = function (neume, includeCurrNote) {\n\n      // add the notes to the neume\n      var lastNoteIndex = includeCurrNote ? currNoteIndex : currNoteIndex - 1;\n      while (firstNoteIndex <= lastNoteIndex)\n        neume.notes.push(notes[firstNoteIndex++]);\n\n      neumes.push(neume);\n\n      if (includeCurrNote === false) {\n        currNoteIndex--;\n        neume.keepWithNext = true;\n        neume.trailingSpace = intraNeumeSpacing;\n      }\n\n      return unknownState;\n    };\n\n    var unknownState = {\n      neume: function() {\n        return new Neumes.Punctum();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.shape === NoteShape.Virga)\n          return virgaState;\n        else if (currNote.shape === NoteShape.Stropha)\n          return apostrophaState;\n        else if (currNote.shape === NoteShape.Oriscus)\n          return oriscusState;\n        else if (currNote.shapeModifiers & NoteShapeModifiers.Cavum)\n          return createNeume(new Neumes.Punctum(), true);\n        else\n          return punctumState;\n      }\n    };\n\n    var punctumState = {\n      neume: function() {\n        return new Neumes.Punctum();\n      },\n      handle: function(currNote, prevNote) {\n        \n        if (currNote.staffPosition > prevNote.staffPosition)\n          return podatusState;\n        else if (currNote.staffPosition < prevNote.staffPosition) {\n          if (currNote.shape === NoteShape.Inclinatum)\n            return climacusState;\n          else\n            return clivisState;\n        } else\n          return distrophaState;\n      }\n    };\n\n    var oriscusState = {\n      neume: function() {\n        return new Neumes.Oriscus();\n      },\n      handle: function(currNote, prevNote) {\n        \n        if (currNote.shape === NoteShape.Default) {\n\n          if (currNote.staffPosition > prevNote.staffPosition) {\n            prevNote.shapeModifiers |= NoteShapeModifiers.Ascending;\n            return createNeume(new Neumes.PesQuassus(), true);\n          } else if (currNote.staffPosition < prevNote.staffPosition) {\n            prevNote.shapeModifiers |= NoteShapeModifiers.Descending;\n            return createNeume(new Neumes.Clivis(), true);\n          }\n        } else\n          // stand alone oriscus\n          return createNeume(new Neumes.Oriscus(), true);\n      }\n    };\n\n    var podatusState = {\n      neume: function() {\n        return new Neumes.Podatus();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.staffPosition > prevNote.staffPosition) {\n\n          if (prevNote.shape === NoteShape.Oriscus)\n            return salicusState;\n          else\n            return scandicusState;\n\n        } else if (currNote.staffPosition < prevNote.staffPosition) {\n          if (currNote.shape === NoteShape.Inclinatum)\n            return pesSubpunctisState;\n          else\n            return torculusState;\n        } else\n          return createNeume(new Neumes.Podatus(), false);\n      }\n    };\n\n    var clivisState = {\n      neume: function() {\n        return new Neumes.Clivis();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition > prevNote.staffPosition)\n          return porrectusState;\n        else\n          return createNeume(new Neumes.Clivis(), false);\n      }\n    };\n\n    var climacusState = {\n      neume: function() {\n        return new Neumes.Climacus();\n      },\n      handle: function(currNote, prevNote) {\n        if (currNote.shape !== NoteShape.Inclinatum)\n          return createNeume(new Neumes.Climacus(), false);\n        else\n          return state;\n      }\n    };\n\n    var porrectusState = {\n      neume: function() {\n        return new Neumes.Porrectus();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\n          return createNeume(new Neumes.PorrectusFlexus(), true);\n        else\n          return createNeume(new Neumes.Porrectus(), false);\n      }\n    };\n\n    var pesSubpunctisState = {\n      neume: function() {\n        return new Neumes.PesSubpunctis();\n      },\n      handle: function(currNote, prevNote) {\n    \n        if (currNote.shape !== NoteShape.Inclinatum)\n          return createNeume(new Neumes.PesSubpunctis(), false);\n        else\n          return state;\n      }\n    };\n\n    var salicusState = {\n      neume: function() {\n        return new Neumes.Salicus();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.staffPosition < prevNote.staffPosition)\n          return salicusFlexusState;\n        else\n          return createNeume(new Neumes.Salicus(), false);\n      }\n    };\n\n    var salicusFlexusState = {\n      neume: function() {\n        return new Neumes.SalicusFlexus();\n      },\n      handle: function(currNote, prevNote) {\n        return createNeume(new Neumes.SalicusFlexus(), false);\n      }\n    };\n\n    var scandicusState = {\n      neume: function() {\n        return new Neumes.Scandicus();\n      },\n      handle: function(currNote, prevNote) {\n\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\n          return scandicusFlexusState;\n        else\n          return createNeume(new Neumes.Scandicus(), false);\n      }\n    };\n\n    var scandicusFlexusState = {\n      neume: function() {\n        return new Neumes.ScandicusFlexus();\n      },\n      handle: function(currNote, prevNote) {\n        return createNeume(new Neumes.ScandicusFlexus(), false);\n      }\n    };\n\n    var virgaState = {\n      neume: function() {\n        return new Neumes.Virga();\n      },\n      handle: function(currNote, prevNote) {\n    \n        if (currNote.shape === NoteShape.Inclinatum && currNote.staffPosition < prevNote.staffPosition)\n          return climacusState;\n        else if (currNote.shape === NoteShape.Virga && currNote.staffPosition === prevNote.staffPosition)\n          return bivirgaState;\n        else\n          return createNeume(new Neumes.Virga(), false);\n      }\n    };\n\n    var bivirgaState = {\n      neume: function() {\n        return new Neumes.Bivirga();\n      },\n      handle: function(currNote, prevNote) {\n    \n        if (currNote.shape === NoteShape.Virga && currNote.staffPosition === prevNote.staffPosition)\n          return createNeume(new Neumes.Trivirga(), false);\n        else\n          return createNeume(new Neumes.Bivirga(), false);\n      }\n    };\n\n    var apostrophaState = {\n      neume: function() {\n        return new Neumes.Apostropha();\n      },\n      handle: function(currNote, prevNote) {\n        if (currNote.staffPosition === prevNote.staffPosition && currNote.shape === NoteShape.Stropha)\n          return distrophaState;\n        else\n          return createNeume(new Neumes.Apostropha(), false);\n      }\n    };\n\n    var distrophaState = {\n      neume: function() {\n        return new Neumes.Distropha();\n      },\n      handle: function(currNote, prevNote) {\n        if (currNote.staffPosition === prevNote.staffPosition && currNote.shape === NoteShape.Stropha)\n          return createNeume(new Neumes.Tristropha(), true);\n        else\n          return createNeume(new Neumes.Distropha(), false);\n      }\n    };\n\n    var torculusState = {\n      neume: function() {\n        return new Neumes.Torculus();\n      },\n      handle: function(currNote, prevNote) {\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition > prevNote.staffPosition)\n          return torculusResupinusState;\n        else\n          return createNeume(new Neumes.Torculus(), false);\n      }\n    };\n\n    var torculusResupinusState = {\n      neume: function() {\n        return new Neumes.TorculusResupinus();\n      },\n      handle: function(currNote, prevNote) {\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\n          return createNeume(new Neumes.TorculusResupinusFlexus(), true);\n        else\n          return createNeume(new Neumes.TorculusResupinus(), false);\n      }\n    };\n\n    var state = unknownState;\n\n    while (currNoteIndex < notes.length) {\n\n      prevNote = currNote;\n      currNote = notes[currNoteIndex];\n\n      state = state.handle(currNote, prevNote);\n\n      // if we are on the last note, then try to create a neume if we need to.\n      if (currNoteIndex === notes.length - 1 && state !== unknownState)\n        createNeume(state.neume(), true);\n\n      currNoteIndex++;\n    }\n\n    if (neumes.length > 0) {\n      if (finalTrailingSpace >= 0) {\n        neumes[neumes.length - 1].keepWithNext = true;\n        neumes[neumes.length - 1].trailingSpace = finalTrailingSpace;\n      }\n    }\n\n    return neumes;\n  },\n\n  createNoteFromData: function (ctxt, clef, data) {\n\n    var note = new Note();\n\n    if (data.length < 1)\n      throw 'Invalid note data: ' + data;\n\n    if (data[0] === '-') { // liquescent initio debilis\n      note.liquescent = LiquescentType.InitioDebilis;\n      data = data.substring(1);\n    }\n\n    if (data.length < 1)\n      throw 'Invalid note data: ' + data;\n\n    // the next char is always the pitch\n    var pitch = this.convertGabcStaffPositionToScribamPitch(clef, data[0]);\n\n    if (data[0] === data[0].toUpperCase())\n      note.shape = NoteShape.Inclinatum;\n\n    note.staffPosition = this.convertGabcStaffPositionToScribamStaffPosition(clef, data[0]);\n    note.pitch = pitch;\n\n    var mark;\n\n    // process the modifiers\n    for (var i = 1; i < data.length; i++) {\n\n      var c = data[i];\n      var lookahead = '\\0';\n\n      var haveLookahead = i + 1 < data.length;\n      if (haveLookahead)\n        lookahead = data[i + 1];\n\n      switch (c) {\n\n        // rhythmic markings\n        case '.':\n          mark = new Markings.Mora(note, ctxt.staffInterval / 4.0);\n          if (haveLookahead && lookahead === '1')\n            mark.positionHint = MarkingPositionHint.Above;\n          else if (haveLookahead && lookahead === '0')\n            mark.positionHint = MarkingPositionHint.Below;\n          \n          note.markings.push(mark);\n          break;\n\n        case '_':\n          mark = new Markings.HorizontalEpisema(note);\n          if (haveLookahead) {\n            if (lookahead === '0')\n              mark.positionHint = MarkingPositionHint.Below;\n            else if (lookahead === '1')\n              mark.positionHint = MarkingPositionHint.Above;\n            else if (lookahead === '2')\n              mark.terminating = true;\n\n            // check for another lookahead...\n            if (++i + 1 < data.length && data[i + 1] === '2') {\n              mark.terminating = true;\n              i++;\n            }\n          }\n          note.markings.push(mark);\n          break;\n\n        case '\\'':\n          mark = new Markings.Ictus(note);\n          if (haveLookahead && lookahead === '1')\n            mark.positionHint = MarkingPositionHint.Above;\n          else if (haveLookahead && lookahead === '0')\n            mark.positionHint = MarkingPositionHint.Below;\n\n          note.markings.push(mark);\n          break;\n\n        //note shapes\n        case 'r':\n          if (haveLookahead && lookahead === '1') {\n            note.markings.push(new Markings.AcuteAccent(note));\n            i++;\n          } else\n            note.shapeModifiers |= NoteShapeModifiers.Cavum;\n          break;\n\n        case 's':\n          note.shape = NoteShape.Stropha;\n          break;\n\n        case 'v':\n          note.shape = NoteShape.Virga;\n          break;\n\n        case 'w':\n          note.shape = NoteShape.Quilisma;\n          break;\n\n        case 'o':\n          note.shape = NoteShape.Oriscus;\n          if (haveLookahead && lookahead === '<') {\n            note.shapeModifiers |= NoteShapeModifiers.Ascending;\n            i++;\n          } else if (haveLookahead && lookahead === '>') {\n            note.shapeModifiers |= NoteShapeModifiers.Descending;\n            i++;\n          } else\n            note.shapeModifiers |= NoteShapeModifiers.Ascending;\n          break;\n\n        case 'O':\n          note.shape = NoteShape.Oriscus;\n          if (haveLookahead && lookahead === '<') {\n            note.shapeModifiers |= NoteShapeModifiers.Ascending | NoteShapeModifiers.Stemmed;\n            i++;\n          } else if (haveLookahead && lookahead === '>') {\n            note.shapeModifiers |= NoteShapeModifiers.Descending | NoteShapeModifiers.Stemmed;\n            i++;\n          } else\n            note.shapeModifiers |= NoteShapeModifiers.Ascending | NoteShapeModifiers.Stemmed;\n          break;\n\n        // liquescents\n        case '~':\n          if (note.shape === NoteShape.Inclinatum)\n            note.liquescent |= LiquescentType.Small;\n          else if (note.shape === NoteShape.Oriscus)\n            note.liquescent |= LiquescentType.Large;\n          else\n            note.liquescent |= LiquescentType.Small;\n          break;\n        case '<':\n          note.liquescent |= LiquescentType.Ascending;\n          break;\n        case '>':\n          note.liquescent |= LiquescentType.Descending;\n          break;\n\n        // accidentals\n        case 'x':\n          if (note.pitch.step === Step.Mi)\n            note.pitch.step = Step.Me;\n          else if (note.pitch.step === Step.Ti)\n            note.pitch.step = Step.Te;\n          break;\n        case 'y':\n          if (note.pitch.step === Step.Te)\n            note.pitch.step = Step.Ti;\n          else if (note.pitch.step === Step.Me)\n            note.pitch.step = Step.Mi;\n          else if (note.pitch.step === Step.Du)\n            note.pitch.step = Step.Do;\n          else if (note.pitch.step === Step.Fu)\n            note.pitch.step = Step.Fa;\n          break;\n        case '#':\n          if (note.pitch.step === Step.Do)\n            note.pitch.step = Step.Du;\n          else if (note.pitch.step === Step.Fa)\n            note.pitch.step = Step.Fu;\n          break;\n      }\n    }\n\n    return note;\n  },\n\n  // returns pitch\n  convertGabcStaffPositionToScribamStaffPosition: function (clef, gabcStaffPos) {\n    return gabcStaffPos.toLowerCase().charCodeAt(0) - 'a'.charCodeAt(0) - 6;\n  },\n\n  // returns pitch\n  convertGabcStaffPositionToScribamPitch: function (clef, gabcStaffPos) {\n    var scribamStaffPosition = this.convertGabcStaffPositionToScribamStaffPosition(clef, gabcStaffPos)\n\n    var pitch = clef.staffPositionToPitch(scribamStaffPosition);\n\n    if (clef.activeAccidental !== null)\n      clef.activeAccidental.applyToPitch(pitch);\n\n    return pitch;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Gabc.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from './Exsurge.Core'\nimport { ctxt, QuickSvg, ChantLayoutElement, GlyphCode, GlyphVisualizer, HorizontalEpisemaVisualizer } from './Exsurge.Drawing'\nimport { Note, NoteShape } from './Exsurge.Chant'\n\nexport class Marking extends ChantLayoutElement {\n\n  constructor(note) {\n    super();\n\n    this.note = note;\n    this.horizontalOffset = 0;\n    this.verticalOffset = 0;\n    this.positionHint = Exsurge.MarkingPositionHint.Default;\n\n    // each marking has its own visualizer\n    this.visualizer = null;\n  }\n\n  performLayout(ctxt) {\n\n  }\n}\n\nexport class AcuteAccent extends Marking {\n\n  constructor(note) {\n    super(note);\n\n    this.positionHint = Exsurge.MarkingPositionHint.Above;\n  }\n\n  performLayout(ctxt) {\n\n    this.visualizer = new GlyphVisualizer(ctxt, GlyphCode.AcuteAccent);\n\n    // fixme: acute markings might need to be positioned vertically over\n    // the notation bounds of the chantline after everything has already\n    // been laid out on the line...for now we just place them a\n    // reasonable height above the staff line.\n    this.verticalOffset = -ctxt.staffInterval * 5;\n    this.horizontalOffset = -this.visualizer.bounds.x; // center on the note itself\n\n    this.bounds = this.visualizer.bounds.clone();\n    this.bounds.x += this.horizontalOffset;\n    this.bounds.y += this.verticalOffset;\n\n    // position the visualizer too...\n    this.visualizer.bounds.x = this.bounds.x;\n    this.visualizer.bounds.y = this.bounds.y;\n\n    super.performLayout(ctxt);\n  }\n}\n\n/*\n * HorizontalEpisema\n */\nexport class HorizontalEpisema extends Marking {\n\n  constructor(note) {\n    super(note);\n  }\n\n  updateY(y) {\n    this.bounds.y = y;\n    this.visualizer.bounds.y = y;\n    this.terminating = false; // indicates if this episema should terminate itself or not\n  }\n\n  updateWidth(width) {\n    this.bounds.width = width;\n    this.visualizer.bounds.width = width;\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // following logic helps to keep the episemae away from staff lines if they get too close\n    // The idea is this: since the staff lines are odd numbered multiples of ctxt.staffInterval,\n    // Math.round(y / ctxt.staffInterval) % 2 tells us if we're closer to a space or a line.\n    // If it's an odd number then we shift away from line by adding .5 to the step, which puts\n    // us the closest we want to be to a line.\n\n    var y = 0, step;\n    var minDistanceAway = ctxt.staffInterval * 0.4; // min distance from neume\n\n    if (this.positionHint === Exsurge.MarkingPositionHint.Below) {\n      y = this.note.bounds.bottom() + minDistanceAway; // the highest the line could be at\n      step = Math.round(y / ctxt.staffInterval);\n\n      // if it's an odd step, that means we're near a line, and therefore\n      // need to shift down\n      if (Math.abs(step % 2) === 1)\n        y = (step + 0.5) * ctxt.staffInterval;\n    } else {\n      y = this.note.bounds.y - minDistanceAway; // the lowest the line could be at\n      step = Math.round(y / ctxt.staffInterval);\n\n      // if it's an odd step, that means we're near a line, and therefore\n      // need to shift up\n      if (Math.abs(step % 2) === 1)\n        y = (step - 0.5) * ctxt.staffInterval;\n    }\n\n    var glyphCode = this.note.glyphVisualizer.glyphCode;\n    var width;\n\n    // The porrectus requires special handling of the note width,\n    // otherwise the width is just that of the note itself\n    if (glyphCode === GlyphCode.Porrectus1 ||\n        glyphCode === GlyphCode.Porrectus2 ||\n        glyphCode === GlyphCode.Porrectus3 ||\n        glyphCode === GlyphCode.Porrectus4)\n      width = ctxt.staffInterval;\n    else\n      width = this.note.bounds.width;\n\n    this.bounds.x = this.note.bounds.x;\n    this.bounds.y = y;\n    this.bounds.width = width;\n    this.bounds.height = ctxt.episemaLineWeight;\n\n    this.origin.x = 0;\n    this.origin.y = 0;\n\n    this.visualizer = new HorizontalEpisemaVisualizer(ctxt, this.note.bounds.x, y, width);\n  }\n}\n\n/*\n * Ictus\n */\nexport class Ictus extends Marking {\n\n  constructor(note) {\n    super(note);\n  }\n\n  performLayout(ctxt) {\n\n    var glyphCode;\n\n    // fixme: this positioning logic doesn't work for the ictus on a virga apparently...?\n\n    if (this.positionHint === Exsurge.MarkingPositionHint.Above) {\n      glyphCode = GlyphCode.VerticalEpisemaAbove;\n    } else {\n      glyphCode = GlyphCode.VerticalEpisemaBelow;\n    }\n\n    var staffPosition = this.note.staffPosition;\n    \n    this.horizontalOffset = this.note.bounds.width / 2;\n    this.verticalOffset = 0;\n\n    switch (glyphCode) {\n      case GlyphCode.VerticalEpisemaAbove:\n        if (staffPosition % 2 === 0)\n          this.verticalOffset -= ctxt.staffInterval * 1.5;\n        else\n          this.verticalOffset -= ctxt.staffInterval * .9;\n        break;\n\n      case GlyphCode.VerticalEpisemaBelow:\n      default:\n        if (staffPosition % 2 === 0)\n          this.verticalOffset += ctxt.staffInterval * 1.5;\n        else\n          this.verticalOffset += ctxt.staffInterval * .8;\n        break;\n    }\n\n    this.visualizer = new GlyphVisualizer(ctxt, glyphCode);\n    this.visualizer.setStaffPosition(ctxt, staffPosition);\n\n    this.bounds = this.visualizer.bounds.clone();\n    this.bounds.x = this.note.bounds.x + this.horizontalOffset - this.visualizer.origin.x;\n    this.bounds.y += this.verticalOffset;\n\n    this.visualizer.bounds.x = this.bounds.x;\n    this.visualizer.bounds.y = this.bounds.y;\n\n    super.performLayout(ctxt);\n  }\n}\n\n/*\n * Mora\n */\nexport class Mora extends Marking {\n\n  constructor(note, horizontalOffset) {\n    super(note);\n\n    this.horizontalOffset = horizontalOffset;\n  }\n\n  performLayout(ctxt) {\n\n    var staffPosition = this.note.staffPosition;\n\n    this.visualizer = new GlyphVisualizer(ctxt, GlyphCode.Mora);\n    this.visualizer.setStaffPosition(ctxt, staffPosition);\n\n    this.verticalOffset = 0;\n    switch (this.positionHint) {\n      case Exsurge.MarkingPositionHint.Below:\n        if (staffPosition % 2 === 0)\n          this.verticalOffset += ctxt.staffInterval / 3.0;\n        else\n          this.verticalOffset += (ctxt.staffInterval * 2) / 3.0;\n        break;\n\n      case Exsurge.MarkingPositionHint.Default:\n      case Exsurge.MarkingPositionHint.Above:\n      default:\n        if (staffPosition % 2 === 0)\n          this.verticalOffset -= ctxt.staffInterval / 3.0;\n        else\n          this.verticalOffset -= (ctxt.staffInterval * 2) / 3.0;\n        break;\n    }\n\n    this.bounds = this.visualizer.bounds.clone();\n    this.bounds.x += this.note.bounds.right() + this.horizontalOffset;\n    this.bounds.y += this.verticalOffset;\n\n    this.visualizer.bounds.x = this.bounds.x;\n    this.visualizer.bounds.y = this.bounds.y;\n\n    super.performLayout(ctxt);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Markings.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from 'Exsurge.Core'\nimport { Step, Pitch, Rect, Point, Margins } from 'Exsurge.Core'\nimport { ctxt, QuickSvg, ChantLayoutElement, ChantNotationElement, GlyphCode, GlyphVisualizer, NeumeLineVisualizer, HorizontalEpisemaLineVisualizer } from 'Exsurge.Drawing'\nimport { Note, LiquescentType, NoteShape, NoteShapeModifiers } from 'Exsurge.Chant'\nimport { Glyphs } from 'Exsurge.Glyphs'\n\n/*\n * Neumes base class\n */\nexport class Neume extends ChantNotationElement {\n\n  constructor() {\n    super();\n\n    this.notes = [];\n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n  }\n\n  finishLayout(ctxt) {\n\n    // allow subclasses an opportunity position their own markings...\n    this.positionMarkings();\n\n    // layout the markings of the notes\n    for (var i = 0; i < this.notes.length; i++) {\n      var note = this.notes[i];\n\n      for (var j = 0; j < note.markings.length; j++) {\n        var marking = note.markings[j];\n\n        marking.performLayout(ctxt);\n        this.addVisualizer(marking.visualizer);\n      }\n    }\n\n    super.finishLayout(ctxt);\n  }\n\n  // subclasses can override this in order to correctly place markings in a neume specific way\n  positionMarkings() {\n\n  }\n\n  layoutNotesAsPodatus(ctxt, lowerNote, upperNote, startingX) {\n\n    startingX = startingX || 0;\n\n    var overhangUpperNote = true;\n\n    if (lowerNote.liquescent === LiquescentType.InitioDebilis) {\n\n      // liquescent upper note or not?\n      if (upperNote.liquescent === LiquescentType.None)\n        upperNote.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n      else\n        upperNote.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n\n      lowerNote.setGlyph(ctxt, GlyphCode.TerminatingDesLiquescent);\n      overhangUpperNote = false;\n    } else if (upperNote.liquescent === LiquescentType.LargeAscending) {\n      lowerNote.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n      upperNote.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n      overhangUpperNote = false;\n    } else if (upperNote.liquescent === LiquescentType.LargeDescending) {\n      lowerNote.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n      upperNote.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n      overhangUpperNote = false;\n    } else if (upperNote.liquescent === LiquescentType.SmallAscending) {\n      lowerNote.setGlyph(ctxt, GlyphCode.BeginningAscLiquescent);\n      upperNote.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n    } else {\n      // standard shape\n      lowerNote.setGlyph(ctxt, GlyphCode.PodatusLower);\n      upperNote.setGlyph(ctxt, GlyphCode.PodatusUpper);\n    }\n\n    // allow a quilisma pes\n    if (lowerNote.shape === NoteShape.Quilisma)\n      lowerNote.setGlyph(ctxt, GlyphCode.Quilisma);\n\n    lowerNote.bounds.x = startingX;\n\n    var line = new NeumeLineVisualizer(ctxt, lowerNote, upperNote, false);\n    line.bounds.x = lowerNote.bounds.right() - line.bounds.width;\n    this.addVisualizer(line);\n\n    // if it's overhanging, then right align the glyph\n    if (overhangUpperNote === true)\n      upperNote.bounds.x += line.bounds.right() - upperNote.bounds.width;\n    else\n      upperNote.bounds.x += line.bounds.x;\n\n    // add the elements\n    this.addVisualizer(lowerNote);\n    this.addVisualizer(upperNote);\n  }\n\n  // lays out a sequence of notes that are inclinati (e.g., climacus, pes subpunctis)\n  layoutNotesAsInclinati(ctxt, notes, startingX) {\n\n    var staffPosition = notes[0].staffPosition, prevStaffPosition = notes[0].staffPosition;\n\n    // it is important to advance by the width of the inclinatum glyph itself\n    // rather than by individual note widths, so that any liquescents are spaced\n    // the same as non-liquscents\n    var advanceWidth = Glyphs.PunctumInclinatum.bounds.width * ctxt.glyphScaling;\n\n    // now add all the punctum inclinati\n    for (var i = 0; i < notes.length; i++, prevStaffPosition = staffPosition) {\n      var note = notes[i];\n\n      if (note.liquescent === LiquescentType.LargeAscending ||\n        note.liquescent === LiquescentType.LargeDescending)\n        // fixme: is the large inclinatum liquescent the same as the apostropha?\n        note.setGlyph(ctxt, GlyphCode.Apostropha);\n      else if (note.liquescent === LiquescentType.SmallAscending ||\n        note.liquescent === LiquescentType.SmallDescending)\n        note.setGlyph(ctxt, GlyphCode.PunctumInclinatumLiquescent);\n      else\n        // fixme: some climaci in the new chant books end with a punctum cuadratum\n        // (see, for example, the antiphon \"Sancta Maria\" for October 7).\n        note.setGlyph(ctxt, GlyphCode.PunctumInclinatum);\n\n      staffPosition = note.staffPosition;\n\n      // fixme: how do these calculations look for puncti inclinati based on staff position offsets?\n      var multiple;\n      switch (Math.abs(prevStaffPosition - staffPosition)) {\n        case 0:\n          multiple = 0;\n          break;\n        case 1:\n          multiple = 0.8;\n          break;\n        default:\n          multiple = 1.2;\n          break;\n      }\n\n      startingX += advanceWidth * multiple;\n      note.bounds.x += startingX;\n\n      this.addVisualizer(note);\n    }\n  }\n}\n\n/*\n * Apostropha\n */\nexport class Apostropha extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // determine the glyph to use\n    var note = this.notes[0];\n\n    if (note.liquescent !== LiquescentType.None)\n      note.setGlyph(ctxt, GlyphCode.StrophaLiquescent);\n    else\n      note.setGlyph(ctxt, GlyphCode.Stropha);\n\n    this.addVisualizer(note);\n\n    this.origin.x = note.origin.x;\n    this.origin.y = note.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n\n  static determineNoteGlyphCode(note) {\n\n    if (note.shape === NoteShape.Stropha)\n      return GlyphCode.Stropha;\n\n    if (note.shapeModifiers & NoteShapeModifiers.Cavum)\n      return GlyphCode.PunctumCavum;\n\n    return GlyphCode.PunctumCuadratum;\n  }\n}\n\n/*\n * Bivirga\n *\n * For simplicity in implementation, Bivirga's have two notes in the object\n * structure. These technically must be the same pitch though.\n */\nexport class Bivirga extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note1 = this.notes[0];\n    var note2 = this.notes[1];\n\n    note1.setGlyph(ctxt, Virga.getGlyphCode(note1.staffPosition));\n    note2.setGlyph(ctxt, Virga.getGlyphCode(note1.staffPosition));\n\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\n\n    this.addVisualizer(note1);\n    this.addVisualizer(note2);\n\n    this.origin.x = note1.origin.x;\n    this.origin.y = note1.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Trivirga\n *\n * For simplicity in implementation, Trivirga's have three notes in the object\n * structure. These technically must be the same pitch though.\n */\nexport class Trivirga extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note1 = this.notes[0];\n    var note2 = this.notes[1];\n    var note3 = this.notes[2];\n\n    note1.setGlyph(ctxt, Virga.getGlyphCode(note1.staffPosition));\n    note2.setGlyph(ctxt, Virga.getGlyphCode(note1.staffPosition));\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\n\n    note3.setGlyph(ctxt, Virga.getGlyphCode(staffPosition));\n    note3.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing + note2.bounds.width + ctxt.intraNeumeSpacing;\n\n    this.addVisualizer(note1);\n    this.addVisualizer(note2);\n    this.addVisualizer(note3);\n\n    this.origin.x = note1.origin.x;\n    this.origin.y = note1.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Climacus\n */\nexport class Climacus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // the first note is always a virga...\n    var virga = this.notes[0];\n    virga.setGlyph(ctxt, Virga.getGlyphCode(virga.staffPosition));\n\n    this.addVisualizer(virga);\n\n    this.layoutNotesAsInclinati(ctxt, this.notes.slice(1), virga.bounds.right() + ctxt.intraNeumeSpacing / 2);\n\n    this.origin.x = virga.origin.x;\n    this.origin.y = virga.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Clivis\n */\nexport class Clivis extends Neume {\n\n  positionMarkings() {\n\n    var hasLowerMora = false;\n    var marking, i;\n\n    // 1. morae need to be lined up if both notes have morae\n    // 2. like the podatus, mora on lower note needs to below\n    //    under certain circumstances\n    for (i = 0; i < this.notes[1].markings.length; i++) {\n      marking = this.notes[1].markings[i];\n\n      if (marking.constructor.name === 'Mora') {\n\n        hasLowerMora = true;\n\n        if (this.notes[0].staffPosition - this.notes[1].staffPosition === 1 &&\n            Math.abs(this.notes[1].staffPosition % 2) === 1)\n          marking.positionHint = Exsurge.MarkingPositionHint.Below;\n      }\n    }\n\n    for (i = 0; i < this.notes[0].markings.length; i++) {\n      marking = this.notes[0].markings[i];\n\n      if (marking.constructor.name === 'Mora' && hasLowerMora) {\n        marking.positionHint = Exsurge.MarkingPositionHint.Above;\n        marking.horizontalOffset += this.notes[1].bounds.right() - this.notes[0].bounds.right();\n      }\n    }    \n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line;\n\n    var upper = this.notes[0];\n    var lower = this.notes[1];\n\n    if (upper.shape === NoteShape.Oriscus)\n      upper.setGlyph(ctxt, GlyphCode.OriscusDes);\n    else {\n      upper.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n      // add an ascending line\n      line = new NeumeLineVisualizer(ctxt, lower, upper, true);\n      line.bounds.x = upper.bounds.x;\n      this.addVisualizer(line);\n    }\n\n    if (lower.liquescent & LiquescentType.Small) {\n      lower.setGlyph(ctxt, GlyphCode.TerminatingDesLiquescent);\n      lower.bounds.x -= lower.bounds.width; // right aligned\n    } else if (lower.liquescent === LiquescentType.Ascending)\n      lower.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n    else if (lower.liquescent === LiquescentType.Descending)\n      lower.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else\n      lower.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    var x = upper.bounds.right();\n\n    // do we need to draw a descending line?\n    if (upper.staffPosition - lower.staffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, upper, lower, false);\n      line.bounds.x = x - line.bounds.width;\n      this.addVisualizer(line);\n\n      if (!(lower.liquescent & LiquescentType.Small))\n        x -= line.bounds.width;\n    }\n\n    lower.bounds.x += x;\n\n    this.addVisualizer(upper);\n    this.addVisualizer(lower);\n\n    this.origin.x = upper.origin.x;\n    this.origin.y = upper.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n\n\n/*\n * Distropha\n *\n * For simplicity in implementation, Distropha's have two notes in the object\n * structure. These technically must be the same pitch though (like Bivirga).\n */\nexport class Distropha extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note1 = this.notes[0];\n    var note2 = this.notes[1];\n\n    note1.setGlyph(ctxt, Apostropha.determineNoteGlyphCode(note1));\n    note2.setGlyph(ctxt, Apostropha.determineNoteGlyphCode(note2));\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\n\n    this.addVisualizer(note1);\n    this.addVisualizer(note2);\n\n    this.origin.x = note1.origin.x;\n    this.origin.y = note1.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Oriscus\n */\nexport class Oriscus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // determine the glyph to use\n    var note = this.notes[0];\n\n    if (note.liquescent !== LiquescentType.None) {\n      note.setGlyph(ctxt, GlyphCode.OriscusLiquescent);\n    } else {\n      if (note.shapeModifiers & NoteShapeModifiers.Ascending)\n        note.setGlyph(ctxt, GlyphCode.OriscusAsc);\n      else\n        note.setGlyph(ctxt, GlyphCode.OriscusDes);\n    }\n\n    this.addVisualizer(note);\n\n    this.origin.x = note.origin.x;\n    this.origin.y = note.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * PesQuassus\n */\nexport class PesQuassus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var x = 0;\n\n    var lower = this.notes[0];\n    var upper = this.notes[1];\n    var line;\n\n    var lowerStaffPos = lower.staffPosition;\n    var upperStaffPos = upper.staffPosition;\n\n    if (lower.shape === NoteShape.Oriscus)\n      lower.setGlyph(ctxt, GlyphCode.OriscusAsc);\n    else\n      lower.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    if (upper.liquescent === LiquescentType.LargeDescending)\n      upper.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else\n      upper.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    lower.bounds.x = x;\n    this.addVisualizer(lower);\n\n    x += lower.bounds.right();\n\n    var needsLines = upperStaffPos - lowerStaffPos > 1;\n    if (needsLines) {\n      line = new NeumeLineVisualizer(ctxt, lower, upper, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    upper.bounds.x = x;\n\n    upper.bounds.x = x;\n    this.addVisualizer(upper);\n\n    x += upper.bounds.width;\n\n    // add a hanging line if we need it\n    if (needsLines) {\n      line = new NeumeLineVisualizer(ctxt, upper, lower, true);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    this.origin.x = lower.origin.x;\n    this.origin.y = lower.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * PesSubpunctis\n */\nexport class PesSubpunctis extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // layout is a podatus followed by inclinati\n    this.layoutNotesAsPodatus(ctxt, this.notes[0], this.notes[1]);\n    this.layoutNotesAsInclinati(ctxt, this.notes.slice(2), this.notes[0].bounds.right() + ctxt.intraNeumeSpacing / 2);\n\n    this.origin.x = this.notes[0].origin.x;\n    this.origin.y = this.notes[0].origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Podatus\n *\n * This podatus class handles a few neume types actually, depending on the note\n * data: Podatus (including various liquescent types on the upper note),\n * Podatus initio debilis, and Quilisma-Pes\n */\nexport class Podatus extends Neume {\n\n  positionMarkings() {\n    var marking, i;\n\n    // 1. episema on lower note should always be below, upper note above\n    // 2. morae: \n    //   a. if podatus difference is 1 and lower note is on a line,\n    //      the lower mora should be below\n    for (i = 0; i < this.notes[0].markings.length; i++) {\n      marking = this.notes[0].markings[i];\n\n      if (marking.constructor.name === 'HorizontalEpisema')\n        marking.positionHint = Exsurge.MarkingPositionHint.Below;\n      else if (marking.constructor.name === 'Mora' &&\n          (this.notes[1].staffPosition - this.notes[0].staffPosition) === 1 &&\n          Math.abs(this.notes[0].staffPosition % 2) === 1)\n        marking.positionHint = Exsurge.MarkingPositionHint.Below;\n    }\n\n    for (i = 0; i < this.notes[1].markings.length; i++) {\n      marking = this.notes[1].markings[i];\n\n      if (marking.constructor.name === 'HorizontalEpisema')\n        marking.positionHint = Exsurge.MarkingPositionHint.Above;\n    }    \n  }\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    this.layoutNotesAsPodatus(ctxt, this.notes[0], this.notes[1]);\n\n    this.origin.x = this.notes[0].origin.x;\n    this.origin.y = this.notes[0].origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Porrectus\n */\nexport class Porrectus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line;\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var x = 0.0;\n\n    var firstStaffPosition = first.staffPosition;\n    var secondStaffPosition = second.staffPosition;\n    var thirdStaffPosition = third.staffPosition;\n\n    switch (firstStaffPosition - secondStaffPosition) {\n      case 1:\n        first.setGlyph(ctxt, GlyphCode.Porrectus1);\n        break;\n      case 2:\n        first.setGlyph(ctxt, GlyphCode.Porrectus2);\n        break;\n      case 3:\n        first.setGlyph(ctxt, GlyphCode.Porrectus3);\n        break;\n      case 4:\n        first.setGlyph(ctxt, GlyphCode.Porrectus4);\n        break;\n      default:\n        // fixme: should we generate an error here?\n        first.setGlyph(ctxt, GlyphCode.None);\n        break;\n    }\n\n\n    // the second glyph does not draw anything, but it still has logical importance for the editing\n    // environment...it can respond to changes which will then change the swash glyph of the first.\n    second.setGlyph(ctxt, GlyphCode.None);\n\n    // add the first line and the swash\n    line = new NeumeLineVisualizer(ctxt, first, second, true);\n\n    line.bounds.x = first.bounds.x;\n    x = first.bounds.right();\n    second.bounds.x = x - second.bounds.width;\n    x = second.bounds.right();\n\n    this.addVisualizer(line);\n    this.addVisualizer(first);\n    this.addVisualizer(second);\n\n    // add the connecting line\n    if (thirdStaffPosition - secondStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, second, third, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    var overhangThirdNote = true;\n\n    if (third.liquescent === LiquescentType.SmallAscending)\n      third.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n    else if (third.liquescent === LiquescentType.LargeDescending) {\n      third.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n      overhangThirdNote = false;\n    } else\n      third.setGlyph(ctxt, GlyphCode.PodatusUpper);\n\n    if (overhangThirdNote)\n      third.bounds.x = second.bounds.right() - third.bounds.width;\n    else\n      third.bounds.x = x;\n\n    this.addVisualizer(third);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * PorrectusFlexus\n */\nexport class PorrectusFlexus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line;\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var fourth = this.notes[3];\n    var x = 0;\n\n    var firstStaffPosition = first.staffPosition;\n    var secondStaffPosition = second.staffPosition;\n    var thirdStaffPosition = third.staffPosition;\n    var fourthStaffPosition = fourth.staffPosition;\n\n    switch (firstStaffPosition - secondStaffPosition) {\n      case 1:\n        first.setGlyph(ctxt, GlyphCode.Porrectus1);\n        break;\n      case 2:\n        first.setGlyph(ctxt, GlyphCode.Porrectus2);\n        break;\n      case 3:\n        first.setGlyph(ctxt, GlyphCode.Porrectus3);\n        break;\n      case 4:\n        first.setGlyph(ctxt, GlyphCode.Porrectus4);\n        break;\n      default:\n        // fixme: should we generate an error here?\n        first.setGlyph(ctxt, GlyphCode.None);\n        break;\n    }\n\n    // add the first line and the swash\n    line = new NeumeLineVisualizer(ctxt, first, second, true);\n\n    x = line.bounds.x = first.bounds.x;\n    x = first.bounds.right();\n    this.addVisualizer(line);\n    this.addVisualizer(first);\n\n\n    // the second glyph does not draw anything, but it still has logical importance for the editing\n    // environment...it can respond to changes which will then change the swash glyph of the first.\n    second.setGlyph(ctxt, GlyphCode.None);\n    second.bounds.x = x;\n    x = second.bounds.right();\n    this.addVisualizer(second);\n\n\n    // add a connecting line\n    if (thirdStaffPosition - secondStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, second, third, false);\n      x -= line.bounds.width;\n      line.bounds.x += x;\n      this.addVisualizer(line);\n    }\n\n    third.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    third.bounds.x = x;\n    x = third.bounds.right();\n    this.addVisualizer(third);\n\n    // add a connecting line\n    if (thirdStaffPosition - fourthStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\n      x -= line.bounds.width;\n      line.bounds.x += x;\n      this.addVisualizer(line);\n    }\n\n    fourth.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    fourth.bounds.x = x;\n    this.addVisualizer(fourth);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Punctum\n */\nexport class Punctum extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // determine the glyph to use\n\n    var note = this.notes[0];\n\n    if (note.liquescent !== LiquescentType.None) {\n      if (note.shape === NoteShape.Inclinatum)\n        note.setGlyph(ctxt, GlyphCode.PunctumInclinatumLiquescent);\n      else if (note.shape === NoteShape.Oriscus)\n        note.setGlyph(ctxt, GlyphCode.OriscusLiquescent);\n      else if (note.liquescent === LiquescentType.LargeAscending)\n        note.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n      else if (note.liquescent === LiquescentType.LargeDescending)\n        note.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n\n    } else {\n\n      if (note.shapeModifiers & NoteShapeModifiers.Cavum)\n        note.setGlyph(ctxt, GlyphCode.PunctumCavum);\n      else if (note.shape === NoteShape.Inclinatum)\n        note.setGlyph(ctxt, GlyphCode.PunctumInclinatum);\n      else if (note.shape === NoteShape.Quilisma)\n        note.setGlyph(ctxt, GlyphCode.Quilisma);\n      else\n        note.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    }\n\n    this.addVisualizer(note);\n\n    this.origin.x = note.origin.x;\n    this.origin.y = note.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Scandicus\n */\nexport class Salicus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n\n    var x = 0;\n\n    // first note of a salicus is always a punctum cuadratum\n    first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    x += first.bounds.width;\n\n    // if the next note doesn't require a stem connector, then add a tad bit\n    // of spacing here\n    if (!(second.shapeModifiers & NoteShapeModifiers.Stemmed))\n      x += ctxt.intraNeumeSpacing;\n\n    // second note is always an oriscus, which may or may not be stemmed\n    // to the first\n    second.setGlyph(ctxt, GlyphCode.OriscusAsc);\n\n    // do we need a line between first and second notes?\n    if (second.shapeModifiers & NoteShapeModifiers.Stemmed &&\n      second.staffPosition - first.staffPosition > 1) { // need stem when notes are greater than 1 space apart\n\n      var line = new NeumeLineVisualizer(ctxt, first, second, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    second.bounds.x = x;\n    x += second.bounds.width;\n\n    // third note can be a punctum cuadratum or various liquescent forms\n    if (third.liquescent === LiquescentType.LargeAscending)\n      third.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n    else if (third.liquescent === LiquescentType.LargeDescending)\n      third.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else if (third.liquescent & LiquescentType.Small) {\n      third.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n      third.bounds.x -= third.bounds.width; // right aligned\n    } else {\n      // virga terminator\n      third.setGlyph(ctxt, Virga.getGlyphCode(third.staffPosition));\n    }\n\n    // do we need a line between second and third notes?\n    if (third.staffPosition - second.staffPosition > 1) {\n      \n      line = new NeumeLineVisualizer(ctxt, second, third, false);\n      line.bounds.x = second.bounds.right() - line.bounds.width;\n      this.addVisualizer(line);\n\n      if (!(third.liquescent & LiquescentType.Small))\n        x -= line.bounds.width;\n    }\n\n    third.bounds.x += x;\n\n    // add the note elements\n    this.addVisualizer(first);\n    this.addVisualizer(second);\n    this.addVisualizer(third);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Scandicus\n */\nexport class SalicusFlexus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var fourth = this.notes[3];\n\n    var x = 0;\n\n    // first note of a salicus is always a punctum cuadratum\n    first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    x += first.bounds.width;\n\n    // if the next note doesn't require a stem connector, then add a tad bit\n    // of spacing here\n    if (!(second.shapeModifiers & NoteShapeModifiers.Stemmed))\n      x += ctxt.intraNeumeSpacing;\n\n    // second note is always an oriscus, which may or may not be stemmed\n    // to the first\n    second.setGlyph(ctxt, GlyphCode.OriscusAsc);\n\n    // do we need a line between first and second notes?\n    if (second.shapeModifiers & NoteShapeModifiers.Stemmed &&\n      second.staffPosition - first.staffPosition > 1) { // need stem when notes are greater than 1 space apart\n\n      var line = new NeumeLineVisualizer(ctxt, first, second, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    second.bounds.x = x;\n    x += second.bounds.width;\n\n    // third note can be a punctum cuadratum or various liquescent forms,\n    // ...based on note four though!\n    if (fourth.liquescent & LiquescentType.Small)\n      third.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else\n      third.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    // do we need a line between second and third notes?\n    if (third.staffPosition - second.staffPosition > 1) {\n      \n      line = new NeumeLineVisualizer(ctxt, second, third, false);\n      line.bounds.x = second.bounds.right() - line.bounds.width;\n      this.addVisualizer(line);\n\n      x -= line.bounds.width;\n    }\n\n    third.bounds.x += x;\n    x += third.bounds.width;\n\n    // finally, do the fourth note\n    if (fourth.liquescent === LiquescentType.LargeAscending)\n      fourth.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n    else if (fourth.liquescent === LiquescentType.LargeDescending)\n      fourth.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else if (fourth.liquescent & LiquescentType.Small) {\n      fourth.setGlyph(ctxt, GlyphCode.TerminatingDesLiquescent);\n      fourth.bounds.x -= fourth.bounds.width; // right-aligned\n    } else\n      fourth.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    // do we need a line between second and third notes?\n    if (third.staffPosition - fourth.staffPosition > 1) {\n      \n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\n      line.bounds.x = third.bounds.right() - line.bounds.width;\n      this.addVisualizer(line);\n\n      if (!(fourth.liquescent & LiquescentType.Small))\n        x -= line.bounds.width;\n    }\n\n    fourth.bounds.x += x;\n\n    // add the note elements\n    this.addVisualizer(first);\n    this.addVisualizer(second);\n    this.addVisualizer(third);\n    this.addVisualizer(fourth);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Scandicus\n */\nexport class Scandicus extends Neume {\n\n  // fixme: for now, we render the scandicus as a punctum followed by a podatus. however,\n  // it could also be a podatus followed by a virga...see LU, \"Preface,\" xj.\n  //\n  // perhaps the best way to indicate the virga form is to check if the note shape of\n  // the third note is a virga!\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n\n    first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    if (second.isLiquescent || third.isLiquescent) {\n      second.setGlyph(ctxt, GlyphCode.BeginningAscLiquescent);\n      third.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n    } else {\n      second.setGlyph(ctxt, GlyphCode.PodatusLower);\n      third.setGlyph(ctxt, GlyphCode.PodatusUpper);\n    }\n\n    // fixme: can a scandicus have a quilisma like this?\n    if (second.shape === NoteShape.Quilisma)\n      second.setGlyph(ctxt, GlyphCode.Quilisma);\n\n    var line = new NeumeLineVisualizer(ctxt, second, third, false);\n\n    second.bounds.x = first.bounds.right();\n    line.bounds.x = second.bounds.right() - line.bounds.width;\n    third.bounds.x = second.bounds.right() - third.bounds.width;\n\n    // add the elements\n    this.addVisualizer(first);\n    this.addVisualizer(second);\n    this.addVisualizer(line);\n    this.addVisualizer(third);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n\n/*\n * Scandicus Flexus\n */\nexport class ScandicusFlexus extends Neume {\n\n  // see notes in Scandicus about determining the first three notes.\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var fourth = this.notes[3];\n\n    first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    if (second.isLiquescent || third.isLiquescent) {\n      second.setGlyph(ctxt, GlyphCode.BeginningAscLiquescent);\n      third.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n    } else {\n      second.setGlyph(ctxt, GlyphCode.PodatusLower);\n      third.setGlyph(ctxt, GlyphCode.PodatusUpper);\n    }\n\n    // fixme: can a scandicus have a quilisma like this?\n    if (second.shape === NoteShape.Quilisma)\n      second.setGlyph(ctxt, GlyphCode.Quilisma);\n\n    var line = new NeumeLineVisualizer(ctxt, second, third, false);\n\n    second.bounds.x = first.bounds.right();\n    line.bounds.x = second.bounds.right() - line.bounds.width;\n    third.bounds.x = second.bounds.right() - third.bounds.width;\n    fourth.bounds.x = third.bounds.right();\n\n    // do we need to draw a descending line?\n    var staffPos3 = third.staffPosition;\n    var staffPos4 = fourth.staffPosition;\n    if (staffPos3 - staffPos4 > 1) {\n      var extraLine = new NeumeLineVisualizer(ctxt, third, fourth, false);\n      fourth.bounds.x -= extraLine.bounds.width;\n      extraLine.bounds.x -= extraLine.bounds.width;\n      this.addVisualizer(extraLine);\n    }\n\n    // add the elements\n    this.addVisualizer(first);\n    this.addVisualizer(second);\n    this.addVisualizer(line);\n    this.addVisualizer(third);\n    this.addVisualizer(fourth);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * TextOnly\n */\nexport class TextOnly extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    // add an empty glyph as a placeholder\n    this.addVisualizer(new GlyphVisualizer(ctxt, GlyphCode.None));\n\n    this.origin.x = 0;\n    this.origin.y = 0;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Torculus\n */\nexport class Torculus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note1 = this.notes[0];\n    var note2 = this.notes[1];\n    var note3 = this.notes[2];\n    var drawFirstLine = note2.staffPosition - note1.staffPosition > 1;\n    var line;\n\n    if (note1.liquescent === LiquescentType.InitioDebilis) {\n      note1.setGlyph(ctxt, GlyphCode.TerminatingDesLiquescent);\n      drawFirstLine = true; // always draw first line with an initio debilis\n    } else\n      note1.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    note2.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    if (note3.liquescent & LiquescentType.Small) {\n      note3.setGlyph(ctxt, GlyphCode.TerminatingDesLiquescent);\n      note3.bounds.x -= note3.bounds.width; // right aligned\n    } else if (note3.liquescent & LiquescentType.Ascending)\n      note3.setGlyph(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\n    else if (note3.liquescent & LiquescentType.Descending)\n      note3.setGlyph(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\n    else \n      note3.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n\n    var x = note1.bounds.right();\n\n    // do we need to draw the first (ascending) line?\n    if (drawFirstLine) {\n      line = new NeumeLineVisualizer(ctxt, note1, note2, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n    note2.bounds.x = x;\n    x += note2.bounds.width;\n\n    // do we need to draw a descending line?\n    if (note2.staffPosition - note3.staffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, note2, note3, false);\n      line.bounds.x = x - line.bounds.width;\n      this.addVisualizer(line);\n\n      if (!(note3.liquescent & LiquescentType.Small))\n        x -= line.bounds.x;\n    }\n\n    note3.bounds.x += x;\n\n    this.addVisualizer(note1);\n    this.addVisualizer(note2);\n    this.addVisualizer(note3);\n\n    this.origin.x = note1.origin.x;\n    this.origin.y = note1.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * TorculusResupinus\n */\nexport class TorculusResupinus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line;\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var fourth = this.notes[3];\n    var x = 0;\n\n    // first, figure out the porrectus swash\n    var firstStaffPosition = first.staffPosition;\n    var secondStaffPosition = second.staffPosition;\n    var thirdStaffPosition = third.staffPosition;\n    var fourthStaffPosition = fourth.staffPosition;\n\n    switch (first.shape) {\n      case NoteShape.Quilisma:\n        first.setGlyph(ctxt, GlyphCode.Quilisma);\n        break;\n\n      default:\n        first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n        break;\n    }\n\n    x = first.bounds.right();\n    this.addVisualizer(first);\n\n    // if we need a line between the first punctum and the porrectus swash, add it now\n    if (secondStaffPosition - firstStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, first, second, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n\n    switch (Math.abs(secondStaffPosition - thirdStaffPosition)) {\n      case 1:\n        second.setGlyph(ctxt, GlyphCode.Porrectus1);\n        break;\n      case 2:\n        second.setGlyph(ctxt, GlyphCode.Porrectus2);\n        break;\n      case 3:\n        second.setGlyph(ctxt, GlyphCode.Porrectus3);\n        break;\n      case 4:\n        second.setGlyph(ctxt, GlyphCode.Porrectus4);\n        break;\n      default:\n        // fixme: this should be an error!\n        second.setGlyph(ctxt, GlyphCode.Porrectus1);\n        break;\n    }\n\n    second.bounds.x = x;\n    x = second.bounds.right();\n    this.addVisualizer(second);\n\n    // the third glyph does not draw anything, but it still has logical importance for the editing\n    // environment...it can respond to changes which will then change the swash glyph of the first.\n    third.setGlyph(ctxt, GlyphCode.None);\n\n    // do we need an ascending line after the porrectus swash?\n    if (fourthStaffPosition - thirdStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\n      line.bounds.x = x - line.bounds.width;\n      this.addVisualizer(line);\n    }\n\n    if (fourth.isLiquescent)\n      fourth.setGlyph(ctxt, GlyphCode.TerminatingAscLiquescent);\n    else\n      fourth.setGlyph(ctxt, GlyphCode.PodatusUpper);\n\n    fourth.bounds.x += x;\n    this.addVisualizer(fourth);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * TorculusResupinusFlexus\n */\nexport class TorculusResupinusFlexus extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var line;\n    var first = this.notes[0];\n    var second = this.notes[1];\n    var third = this.notes[2];\n    var fourth = this.notes[3];\n    var fifth = this.notes[4];\n    var x = 0;\n\n    var firstStaffPosition = first.staffPosition;\n    var secondStaffPosition = second.staffPosition;\n    var thirdStaffPosition = third.staffPosition;\n    var fourthStaffPosition = fourth.staffPosition;\n    var fifthStaffPosition = fifth.staffPosition;\n\n    switch (first.shape) {\n      case NoteShape.Quilisma:\n        first.setGlyph(ctxt, GlyphCode.Quilisma);\n        break;\n\n      default:\n        first.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n        break;\n    }\n\n    x = first.bounds.right();\n    this.addVisualizer(first);\n\n    // if we need a line between the first punctum and the porrectus swash, add it now\n    if (secondStaffPosition - firstStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, first, second, false);\n      x -= line.bounds.width;\n      line.bounds.x = x;\n      this.addVisualizer(line);\n    }\n\n\n    switch (secondStaffPosition - thirdStaffPosition) {\n      case 1:\n        second.setGlyph(ctxt, GlyphCode.Porrectus1);\n        break;\n      case 2:\n        second.setGlyph(ctxt, GlyphCode.Porrectus2);\n        break;\n      case 3:\n        second.setGlyph(ctxt, GlyphCode.Porrectus3);\n        break;\n      case 4:\n        second.setGlyph(ctxt, GlyphCode.Porrectus4);\n        break;\n      default:\n        // fixme: should we generate an error here?\n        second.setGlyph(ctxt, GlyphCode.None);\n        break;\n    }\n\n    second.bounds.x = x;\n    x = second.bounds.right();\n    this.addVisualizer(second);\n\n    // the second glyph does not draw anything, but it still has logical importance for the editing\n    // environment...it can respond to changes which will then change the swash glyph of the first.\n    third.setGlyph(ctxt, GlyphCode.None);\n    third.bounds.x = x;\n    x = third.bounds.right();\n    this.addVisualizer(third);\n\n    // add a connecting line\n    if (fourthStaffPosition - thirdStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\n      x -= line.bounds.width;\n      line.bounds.x += x;\n      this.addVisualizer(line);\n    }\n\n    fourth.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    fourth.bounds.x = x;\n    x = fourth.bounds.right();\n    this.addVisualizer(fourth);\n\n    // add a connecting line\n    if (fourthStaffPosition - fifthStaffPosition > 1) {\n      line = new NeumeLineVisualizer(ctxt, fourth, fifth, false);\n      x -= line.bounds.width * 1.5;\n      line.bounds.x += x;\n      this.addVisualizer(line);\n    }\n\n    fifth.setGlyph(ctxt, GlyphCode.PunctumCuadratum);\n    fifth.bounds.x = x;\n    this.addVisualizer(fifth);\n\n    this.origin.x = first.origin.x;\n    this.origin.y = first.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Tristropha\n *\n * For simplicity in implementation, Tristropha's have three notes in the object\n * structure. These technically must be the same pitch though (like the\n * Distropha and Bivirga).\n */\nexport class Tristropha extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note1 = this.notes[0];\n    var note2 = this.notes[1];\n    var note3 = this.notes[2];\n\n    var staffPosition = note1.staffPosition;\n\n    note1.setGlyph(ctxt, Apostropha.determineNoteGlyphCode(note1));\n\n    note2.setGlyph(ctxt, Apostropha.determineNoteGlyphCode(note2));\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\n\n    note3.setGlyph(ctxt, Apostropha.determineNoteGlyphCode(note3));\n    note3.bounds.x += note1.bounds.width + note2.bounds.width + ctxt.intraNeumeSpacing * 2;\n\n    this.addVisualizer(note1);\n    this.addVisualizer(note2);\n    this.addVisualizer(note3);\n\n    this.origin.x = note1.origin.x;\n    this.origin.y = note1.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n}\n\n/*\n * Virga\n */\nexport class Virga extends Neume {\n\n  performLayout(ctxt) {\n    super.performLayout(ctxt);\n\n    var note = this.notes[0];\n\n    var staffPosition = note.staffPosition;\n\n    var glyphCode = Virga.getGlyphCode(staffPosition);\n    note.setGlyph(ctxt, glyphCode);\n\n    this.addVisualizer(note);\n\n    this.origin.x = note.origin.x;\n    this.origin.y = note.origin.y;\n\n    this.finishLayout(ctxt);\n  }\n\n  // The virga's glyph depends on its staff position. This is a helper function\n  // that can be used by other neumes that use the virga glyphs...\n  static getGlyphCode(staffPosition) {\n    if (Math.abs(staffPosition) % 2 === 1)\n      return GlyphCode.VirgaLong;\n    else\n      return GlyphCode.VirgaShort;\n\n    // fixme: add logic for virgas low on the staff that are probably short also...\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Neumes.js\n **/"],"sourceRoot":""}